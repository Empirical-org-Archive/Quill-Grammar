!function e(t,r,i){function n(l,o){if(!r[l]){if(!t[l]){var a="function"==typeof require&&require;if(!o&&a)return a(l,!0);if(s)return s(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[l]={exports:{}};t[l][0].call(c.exports,function(e){var r=t[l][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[l].exports}for(var s="function"==typeof require&&require,l=0;l<i.length;l++)n(i[l]);return n}({"./src/scripts/app/app.module.js":[function(e){"use strict";angular.module("quill-grammar",[e("./core/core.module.js").name,e("./index/index.module.js").name,e("./teacher/teacher.module.js").name,e("./layout/layout.module.js").name]).config(e("./app.config.js"))},{"./app.config.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/app.config.js","./core/core.module.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/core/core.module.js","./index/index.module.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.module.js","./layout/layout.module.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/layout/layout.module.js","./teacher/teacher.module.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.module.js"}],"/home/will/Clients/Quill-Grammar/.tmp/config.js":[function(e,t){t.exports=angular.module("quill-grammar.config",[]).constant("environment","production").constant("firebaseUrl","https://quillgrammar.firebaseio.com/")},{}],"/home/will/Clients/Quill-Grammar/.tmp/templates.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.templates",[]).run(["$templateCache",function(e){e.put("index.html",'<!DOCTYPE html><html ng-app="quill-grammar" ng-strict-di><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title></title><base href="/"></head><body><ui-view></ui-view></body></html>'),e.put("layout.html","<ui-view></ui-view>"),e.put("teacher.html",'<div class="grammar-cms"><grammar-cms-categories-new></grammar-cms-categories-new><grammar-cms-categories-list></grammar-cms-categories-list></div>'),e.put("index.html",'<button ng-show="showNextQuestion" ng-click="nextQuestion()">Next Question</button>\n<grammar-rule-question rule-question="currentRuleQuestion">\n</grammar-rule-question>\n<button ng-show="showPreviousQuestion" ng-click="previousQuestion()">Previous Question</button>\n'),e.put("categories.list.html",'<ul>\n  <li ng-repeat="category in categories">\n    <grammar-cms-category category="category"></grammar-cms-category>\n  <li>\n</ul>\n'),e.put("categories.new.html",'<button ng-click=\'toggleCategoryModal()\'>New Category</button>\n<grammar-cms-modal-dialog\n  show=\'showNewCategoryModal\'\n  action=\'saveCategory\'>\n  <form validate>\n    <label for="category">Category Title</label>\n    <input type="text" name="category" placeholder="Category Name" ng-model="category.title" />\n    <input type="submit" ng-click="$parent.doAction(category)" value="Add Category" />\n  </form>\n</grammar-cms-modal-dialog>\n'),e.put("category.edit.html",'<ul>\n  <li><img src="assets/images/newrule.png" ng-click=\'newRule()\' alt="Add Rule" title="Add Rule"/></li>\n  <li><img src="assets/images/delete.png" ng-click="showDeleteCategory()" alt="Delete Category" title="Delete Category"/></li>\n  <li><img src="assets/images/edit.png" ng-click="editCategory(category)" alt="Edit Category" title="Edit Category"/></li>\n</ul>\n\n<grammar-cms-modal-dialog\n  show=\'showNewRuleModal\'\n  action=\'saveRule\'>\n  <form validate ng-submit="$parent.doAction(category, rule)">\n    <p>New Rule for {{category.title}}</p>\n    <input type="text" name="rule" placeholder="Rule Name" ng-model="rule.title" required/>\n    <input type="text" name="description" placeholder="Rule Description"\n      ng-model="rule.description" required/>\n    <input type="text" name="classification" placeholder="Rule Classification"\n      ng-model="rule.classification" required/>\n    <input type="submit" value="Add Rule" />\n  </form>\n</grammar-cms-modal-dialog>\n\n<grammar-cms-delete-modal-dialog show=\'showDeleteCategoryModal\' on-delete="deleteCategory" item="category">\n  <p>Deleting this will delete all rules and practice questions in this category.</p>\n</grammar-cms-delete-modal-dialog>\n'),e.put("category.show.html",'<div class="grammar-cms-section">\n  <div class="grammar-cms-heading">\n    <h2>{{category.title}}</h2>\n    <button\n      ng-show="!category.resolvedRules"\n      ng-click="showRules(category)"\n    >Show Rules</button>\n  <p>{{category.error}}</p>\n  </div>\n  <grammar-cms-category-panel\n    category="category"\n    class="grammar-cms-panel">\n  </grammar-cms-category-panel>\n</div>\n<div ng-show="category.resolvedRules">\n  <grammar-cms-rule\n    ng-show="rule"\n    rule="rule"\n    ng-repeat="rule in category.resolvedRules">\n  </grammar-cms-rule>\n  <button ng-click="hideRules(category)">Hide Rules</button\n</div>\n'),e.put("deleteModal.html",'<div class="modal" ng-show="show">\n  <input class="modal-state" type="checkbox" ng-checked="show"/>\n  <div class="modal-window">\n    <div class="modal-inner">\n      <label class="modal-close" ng-click="hideModal()"></label>\n      <p>Delete {{item.title}}?<p>\n      <div ng-transclude></div>\n      <button ng-click="_onDelete(item)">Delete</button>\n      <p class="error" ng-show="error">{{error}}</p>\n    </div>\n  </div>\n</div>\n'),e.put("modal.html",'<div class="modal" ng-show="show">\n  <input class="modal-state" type="checkbox" ng-checked="show"/>\n  <div class="modal-window">\n    <div class="modal-inner">\n      <label class="modal-close" ng-click="hideModal()"></label>\n      <div ng-transclude></div>\n    </div>\n  </div>\n</div>\n'),e.put("question.edit.html",'<ul>\n  <li><span class="spacer"></span></li>\n  <li><img src="assets/images/delete.png" ng-click="showDeleteRuleQuestion()" alt="Delete Rule Question" title="Delete Rule Question"/></li>\n  <li><img src="assets/images/edit.png" ng-click="editRuleQuestion(question)" alt="Edit Rule Question"/title="Edit Rule Question"></li>\n</ul>\n\n<grammar-cms-delete-modal-dialog show=\'showDeleteRuleQuestionModal\' on-delete="deleteRuleQuestion" item="question">\n  <p>{{question.prompt}}</p>\n</grammar-cms-delete-modal-dialog>\n'),e.put("question.show.html",'<div class="grammar-cms-section">\n  <div class="grammar-cms-heading">\n    <p>{{question.prompt}}</p>\n  </div>\n  <grammar-cms-rule-question-panel class="grammar-cms-panel" question="question"></grammar-cms-rule-question-panel>\n</div>\n'),e.put("rule.edit.html",'<ul>\n  <li><img src="assets/images/newrulequestion.png" ng-click=\'showRuleQuestionModal()\' alt="Add Rule Question" title="Add Rule Question"/></li>\n  <li><img src="assets/images/delete.png" ng-click="showDeleteRule()" alt="Delete Rule" title="Delete Rule"/></li>\n  <li><img src="assets/images/edit.png" ng-click="editRule(rule)" alt="Edit Rule" title="Edit Rule"/></li>\n</ul>\n\n<grammar-cms-modal-dialog\n  show=\'showNewRuleQuestionModal\'\n  action=\'saveRuleQuestion\'>\n  <form validate ng-submit=\'$parent.doAction(rule, question)\'>\n    <p>Adding rule question for rule "{{rule.title}}"</p>\n    <input required type="text" name="prompt" placeholder="Prompt"\n    ng-model="question.prompt" />\n    <input type="text" name="hint" placeholder="Hint"\n    ng-model="question.hint" />\n    <p><b>Body</b></p>\n    <ul>\n      <li style="display: block;" ng-repeat="b in question.body">\n        <input type="text" ng-model="b" />\n      </li>\n    </ul>\n    <input type="text" name="body" placeholder="Correct Response"\n    ng-model="question.tempB" />\n    <button type="button" ng-click="addAnswerToBody(question)">\n      Add Correct Response\n    </button>\n    <input required type="text" name="instructions" placeholder="Instructions"\n    ng-model="question.instructions"/>\n    <input type="submit" value="Add Practice Question" />\n  </form>\n</grammar-cms-modal-dialog>\n\n<grammar-cms-delete-modal-dialog show=\'showDeleteRuleModal\' on-delete="deleteRule" item="rule">\n  <p>This will delete all practice questions for this rule.</p>\n</grammar-cms-delete-modal-dialog>\n'),e.put("rule.show.html",'<div class="grammar-cms-section">\n  <div class="grammar-cms-heading">\n    <h5>{{rule.title}} - {{rule.ruleNumber}}</h5>\n  </div>\n  <grammar-cms-rule-panel class="grammar-cms-panel"\n  rule="rule"></grammar-cms-rule-panel>\n</div>\n\n<ul>\n  <li ng-repeat="question in rule.resolvedRuleQuestions">\n    <grammar-cms-rule-question question="question"></grammar-cms-rule-question>\n  </li>\n</ul>\n'),e.put("ruleQuestion.html",'<div class="ruleQuestion">\n  <p ng-bind-html="ruleQuestion.resolvedInstructions | trustedHtml"></p>\n  <p ng-bind-html="ruleQuestion.hint | trustedHtml"></p>\n  <p ng-bind-html="ruleQuestion.prompt | formatPrompt | trustedHtml"></p>\n  <input type="text" ng-model="ruleQuestion.response"/>\n  <button ng-click="checkAnswer()">Check Answer</button>\n  <p ng-show="ruleQuestion.message">{{ruleQuestion.message}}</p>\n</div>\n')}])},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/app.config.js":[function(e,t){"use strict";t.exports=["$urlRouterProvider","$locationProvider",function(e,t){e.otherwise("/"),t.html5Mode({enabled:!0})}]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/core/core.module.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.core",["ui.router",e("../../../../.tmp/config").name,e("../../../../.tmp/templates").name])},{"../../../../.tmp/config":"/home/will/Clients/Quill-Grammar/.tmp/config.js","../../../../.tmp/templates":"/home/will/Clients/Quill-Grammar/.tmp/templates.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.config.js":[function(e,t){"use strict";t.exports=["$stateProvider",function(e){e.state("index",{parent:"app",url:"/",templateUrl:"index.html",controller:"index as ind"})}]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.controller.js":[function(e,t){"use strict";t.exports=["$scope","RuleQuestionService",function(e,t){t._getAllRuleQuestionsWithInstructions().then(function(t){var r=0;e.showNextQuestion=!1,e.showPreviousQuestion=!1,e.currentRuleQuestion=t[r],e.nextQuestion=function(){e.currentRuleQuestion=t[++r]},e.previousQuestion=function(){e.currentRuleQuestion=t[--r]},e.$watch("currentRuleQuestion",function(){e.currentRuleQuestion||e.finish(),e.showNextQuestion=r<t.length&&e.currentRuleQuestion&&e.currentRuleQuestion.correct,e.showPreviousQuestion=r>0},!0),e.finish=function(){console.log(r),console.log("Thanks for playing"),e.showNextQuestion=!1,e.showPreviousQuestion=!1}})}]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.module.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.index",[e("./../../directives/grammarElements/ruleQuestion/").name]).config(e("./index.config.js")).controller("index",e("./index.controller.js"))},{"./../../directives/grammarElements/ruleQuestion/":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/index.js","./index.config.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.config.js","./index.controller.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/index/index.controller.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/app/layout/layout.config.js":[function(e,t){"use strict";t.exports=["$stateProvider",function(e){e.state("app",{url:"","abstract":!0,templateUrl:"layout.html"})}]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/layout/layout.module.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.layout",[]).config(e("./layout.config.js"))},{"./layout.config.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/layout/layout.config.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.config.js":[function(e,t){"use strict";t.exports=["$stateProvider",function(e){e.state("teacher",{parent:"app",url:"/teacher",templateUrl:"teacher.html",controller:"teacher as teach"})}]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.controller.js":[function(e,t){"use strict";t.exports=function(){}},{}],"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.module.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.teacher",[e("./../../directives/grammarCMS").name]).config(e("./teacher.config.js")).controller("teacher",e("./teacher.controller.js"))},{"./../../directives/grammarCMS":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/index.js","./teacher.config.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.config.js","./teacher.controller.js":"/home/will/Clients/Quill-Grammar/src/scripts/app/teacher/teacher.controller.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/categories.list.js":[function(e,t){"use strict";function r(){return{restrict:"E",templateUrl:"categories.list.html",controller:"GrammarCmsCtrl"}}t.exports=r},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/categories.new.js":[function(e,t){"use strict";function r(){return{restrict:"E",templateUrl:"categories.new.html",controller:"GrammarCmsCtrl"}}t.exports=r},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/category.edit.js":[function(e,t){function r(){return{restrict:"E",scope:{category:"="},templateUrl:"category.edit.html",controller:"CategoryCtrl"}}function i(e,t,r,i){e.deleteCategory=function(e){return t.deleteCategory(e).then(function(){console.log("deleting category ",e)})},e.editCategory=function(e){console.log(e)},e.newRule=function(){e.showNewRuleModal=!0},e.showDeleteCategory=function(){e.showDeleteCategoryModal=!0},e.saveRule=function(n,s){var l=i.defer();return r.saveRule(s).then(function(r){n.rules||(n.rules={}),n.rules[r]=!0,t.updateCategory(n).then(function(){n.resolvedRules||(n.resolvedRules=[]),n.resolvedRules.push(s),e.category=n,l.resolve()},l.reject)},l.reject),l.promise}}t.exports.panel=r,t.exports.controller=["$scope","CategoryService","RuleService","$q",i]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/category.show.js":[function(e,t){"use strict";function r(){return{restrict:"E",templateUrl:"category.show.html",controller:"GrammarCmsCtrl",scope:{category:"="}}}t.exports=r},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/cms.controller.js":[function(e,t){"use-strict";function r(e,t,r){t.getCategories().then(function(t){e.categories=t}),e.showRules=function(e){r.getRules(e.rules).then(function(t){e.resolvedRules=t},function(t){e.error=t})},e.hideRules=function(e){e.resolvedRules=null},e.saveCategory=function(e){return t.saveCategory(e).then(function(){console.log("Saved",e),e.title=""})},e.toggleCategoryModal=function(){e.showNewCategoryModal=!0}}t.exports=["$scope","CategoryService","RuleService",r]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/index.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.directives.grammarCMS",[e("./../../services/category.js").name,e("./../../services/rule.js").name]).directive("grammarCmsCategoriesNew",e("./categories.new.js")).directive("grammarCmsCategoriesList",e("./categories.list.js")).directive("grammarCmsCategory",e("./category.show.js")).directive("grammarCmsRule",e("./rule.show.js")).directive("grammarCmsCategoryPanel",e("./category.edit.js").panel).directive("grammarCmsRulePanel",e("./rule.edit.js").panel).directive("grammarCmsRuleQuestion",e("./question.js").show).directive("grammarCmsRuleQuestionPanel",e("./question.js").panel).directive("grammarCmsModalDialog",e("./modal.js").modal).directive("grammarCmsDeleteModalDialog",e("./modal.js").deleteModal).controller("ModalDialogCtrl",e("./modal.js").controller).controller("RuleCtrl",e("./rule.edit.js").controller).controller("CategoryCtrl",e("./category.edit.js").controller).controller("QuestionCtrl",e("./question.js").controller).controller("GrammarCmsCtrl",e("./cms.controller.js"))},{"./../../services/category.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/category.js","./../../services/rule.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/rule.js","./categories.list.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/categories.list.js","./categories.new.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/categories.new.js","./category.edit.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/category.edit.js","./category.show.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/category.show.js","./cms.controller.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/cms.controller.js","./modal.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/modal.js","./question.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/question.js","./rule.edit.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/rule.edit.js","./rule.show.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/rule.show.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/modal.js":[function(e,t){function r(){return{restrict:"E",scope:{show:"=",action:"="},replace:!0,transclude:!0,templateUrl:"modal.html",controller:"ModalDialogCtrl",link:function(e){e.hideModal=function(){e.show=!1},e.doAction=function(){e.action.apply(this,arguments).then(function(){e.hideModal()})}}}}function i(){return{restrict:"E",scope:{show:"=",onDelete:"=",item:"="},replace:!0,transclude:!0,templateUrl:"deleteModal.html",link:function(e){e.hideModal=function(){e.show=!1},e._onDelete=function(){e.onDelete(e.item).then(function(){e.hideModal()},function(t){e.error=t})}}}}function n(){}t.exports.modal=r,t.exports.deleteModal=i,t.exports.controller=["$scope",n]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/question.js":[function(e,t){"use strict";function r(){return{restrict:"E",templateUrl:"question.show.html"}}function i(){return{restrict:"E",controller:"QuestionCtrl",templateUrl:"question.edit.html"}}function n(e,t,r){e.showDeleteRuleQuestion=function(){e.showDeleteRuleQuestionModal=!0},e.deleteRuleQuestion=function(i){var n=e.rule;return t.deleteRuleQuestion(i).then(function(){return r.removeRuleQuestionFromRule(n,i)})}}t.exports.show=r,t.exports.panel=i,t.exports.controller=["$scope","RuleQuestionService","RuleService",n]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/rule.edit.js":[function(e,t){"use strict";function r(e,t,r){e.deleteRule=function(){var r=e.category,i=e.rule;return t.deleteRule(r,i).then(function(){e.rule=null},function(t){e.rule.error=t})},e.showDeleteRule=function(){e.showDeleteRuleModal=!0},e.editRule=function(e){console.log("editing rule "+e)},e.showRuleQuestionModal=function(){e.showNewRuleQuestionModal=!0},e.saveRuleQuestion=function(e,i){return r.saveRuleQuestion(i).then(function(r){return e.ruleQuestions||(e.ruleQuestions={}),console.log(r),e.ruleQuestions[r]=!0,t.updateRule(e)})},e.addAnswerToBody=function(e){e&&e.body&&e.body.push&&e.tempB&&(e.body.push(e.tempB),e.tempB=null)},e.question={body:[]}}function i(){return{restrict:"E",controller:"RuleCtrl",templateUrl:"rule.edit.html"}}t.exports.controller=["$scope","RuleService","RuleQuestionService",r],t.exports.panel=i},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarCMS/rule.show.js":[function(e,t){"use strict";function r(){return{restrict:"E",templateUrl:"rule.show.html",controller:"GrammarCmsCtrl"}}t.exports=r},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/controller.js":[function(e,t){"use strict";t.exports=function(e,t){function r(e){if("string"!=typeof e)throw new Error("Input must be type string removeDelimeters");return e.replace(o.open,"").replace(o.close,"")}function i(e){return function(t){var i=r(t);return e===i}}function n(e){return function(r){if(!e)return!1;var i=new RegExp(o.open+"(.*)"+o.close,"g"),n=i.exec(r),s=t.rest(n);return t.every(s,function(t){return-1!==e.indexOf(t)})}}function s(t){e.ruleQuestion.message=t}var l=!1,o={open:"{",close:"}"};e.checkAnswer=function(){var r=e.ruleQuestion,o=r.response,a=t.any(r.body,i(o));if(a)return s("Correct!"),void(e.ruleQuestion.correct=!0);var u=t.any(r.body,n(o));return u&&!l?(s("You are correct, but you have some typing errors. You may correct them or continue"),void(e.ruleQuestion.correct=!0)):(u&&s("You are correct, but have some typing errors. Please fix them."),void s("Try again!"))}},t.exports.$inject=["$scope","_"]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/directive.js":[function(e,t){t.exports=function(){return{restrict:"E",scope:{ruleQuestion:"="},templateUrl:"ruleQuestion.html",controller:"GrammarRuleQuestionCtrl"}}},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/filters.js":[function(e,t){"use strict";t.exports.formatPrompt=function(){return function(e){return e}},t.exports.trustedHtml=function(e){return function(t){return e.trustAsHtml(t)}},t.exports.trustedHtml.$inject=["$sce"]},{}],"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/index.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.directives.ruleQuestion",[]).directive("grammarRuleQuestion",e("./directive.js")).filter("formatPrompt",e("./filters.js").formatPrompt).filter("trustedHtml",e("./filters.js").trustedHtml).controller("GrammarRuleQuestionCtrl",e("./controller.js"))},{"./controller.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/controller.js","./directive.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/directive.js","./filters.js":"/home/will/Clients/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/filters.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/services/category.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.category",[e("./crud.js").name]).factory("CategoryService",["CrudService","_",function(e,t){var r=new e("categories",["title","rules"]);return this.saveCategory=function(e){return r.save(e)},this.deleteCategory=function(e){return r.del(e)},this.getCategories=function(){return r.all()},this.updateCategory=function(e){return r.update(e)},this.removeRuleFromCategory=function(e,i){if(!e||!e.rules)throw new Error("Category does not have any rules to remove");return t.each(e.rules,function(t,r){r===i.$id&&(e.rules[r]=null)}),r.update(e)},this}])},{"./crud.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/services/classification.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.classification",[e("./crud.js").name]).factory("ClassificationService",["CrudService","$q",function(e,t){var r=new e("classifications"),i=this;return i.saveClassification=function(e){return r.save(e)},i.deleteClassification=function(e){return r.del(e)},i.getClassification=function(e){return r.get(e)},i.getClassificationIdByString=function(e){var n=t.defer();return r.all().then(function(t){angular.forEach(t,function(t){var r=t.$value;r.toLowerCase()===e.toLowerCase()&&n.resolve(t.$id)}),i.saveClassification(e).then(function(e){console.log(e),n.resolve(e)},n.reject)},n.reject),n.promise},i}])},{"./crud.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.crud",["firebase","underscore"]).factory("CrudService",["firebaseUrl","$firebase","$q","_",function(e,t,r,i){function n(n,s){function l(){return g}function o(e){return s&&i.isObject(e)?i.pick(e,function(e,t){return"$"===t[0]||i.contains(s,t)}):e}function a(e){var t=r.defer(),i=o(e);return g.$push(i).then(function(e){t.resolve(e.key())},function(e){t.reject(e)}),t.promise}function u(e){var t=r.defer();if(!e||!e.$id)throw new Error("Item doesn't have an $id property");return g.$remove(e.$id).then(function(e){t.resolve(e.key())},function(e){t.reject(e)}),t.promise}function c(){var e=r.defer(),t=g.$asArray();return t.$loaded().then(function(){e.resolve(t)},function(t){e.reject(t)}),e.promise}function m(e){var i=r.defer(),n=new Firebase(p+"/"+e),s=t(n).$asObject();return s.$loaded().then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}function d(e){var t=r.defer();return h.$loaded().then(function(){var r=e.$id;h[r]=o(e),h.$save(r).then(function(e){console.log(e.key()),t.resolve(e.key())},function(e){console.log(e),t.reject(e)})}),t.promise}if(s||(s=[]),"/"!==e[e.length-1]&&(e+="/"),!n||""===n)throw new Error("Firebase Entity MUST be defined");var p=e+n,g=t(new Firebase(p)),h=g.$asObject();return{save:a,del:u,all:c,get:m,update:d,getRef:l}}return n}])},{}],"/home/will/Clients/Quill-Grammar/src/scripts/services/instruction.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.instruction",[e("./crud.js").name]).factory("InstructionService",["CrudService",function(e){var t=new e("instructions");return this.saveInstruction=function(e){return t.save(e)},this.deleteInstruction=function(e){return t.del(e)},this.getInstruction=function(e){return t.get(e)},this}])},{"./crud.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/services/rule.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.rule",[e("./crud.js").name,e("./ruleQuestion.js").name,e("./classification.js").name]).factory("RuleService",["CrudService","CategoryService","RuleQuestionService","$q","ClassificationService","_",function(e,t,r,i,n,s){var l=new e("rules",["title","description","ruleNumber","classification","ruleQuestions"]);return this.updateRule=function(e){return l.update(e)},this.saveRule=function(t){function r(e){return n.getClassificationIdByString(e.classification).then(function(t){return e.classification=t,e},function(e){return e})}function s(t){var r=new e("ruleNumberCounter").getRef();r.$transaction(function(e){if(!e)return 1;if(!(0>e))return e+1}).then(function(e){null===e?n.reject(new Error("current rule number error: snapshot null")):(t.ruleNumber=e.val(),n.resolve(t))},function(e){n.reject(e)});var n=i.defer();return n.promise}return r(t).then(s).then(l.save)},this.deleteRule=function(e,r){return l.del(r).then(function(){return t.removeRuleFromCategory(e,r)})},this.removeRuleQuestionFromRule=function(e,t){if(!e||!e.ruleQuestions)throw new Error("rule does not have any ruleQuestions to remove");return s.each(e.ruleQuestions,function(r,i){i===t.$id&&(e.ruleQuestions[i]=null)}),l.update(e)},this.getRules=function(e){function t(e){var t=i.defer(),n=[];return angular.forEach(e,function(e){n.push(r.getRuleQuestions(e.ruleQuestions))}),i.all(n).then(function(r){angular.forEach(e,function(e,t){e.resolvedRuleQuestions=r[t]}),t.resolve(e)},function(e){t.reject(e)}),t.promise}function s(e){var t=i.defer(),r=[];return angular.forEach(e,function(e){r.push(n.getClassification(e.classification))}),i.all(r).then(function(r){angular.forEach(e,function(e,t){e&&r[t]&&(e.resolvedClassification=r[t])}),t.resolve(e)},function(r){console.log(r),t.resolve(e)}),t.promise}var o=i.defer(),a=[];return angular.forEach(e,function(e,t){a.push(l.get(t))}),i.all(a).then(t).then(s).then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},this}])},{"./classification.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/classification.js","./crud.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js","./ruleQuestion.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/ruleQuestion.js"}],"/home/will/Clients/Quill-Grammar/src/scripts/services/ruleQuestion.js":[function(e,t){"use strict";t.exports=angular.module("quill-grammar.services.ruleQuestion",[e("./crud.js").name,e("./instruction.js").name]).factory("RuleQuestionService",["CrudService","InstructionService","$q",function(e,t,r){function i(e){var i=r.defer(),n=[];return angular.forEach(e,function(e){n.push(t.getInstruction(e.instructions))}),r.all(n).then(function(t){angular.forEach(e,function(e,r){e.resolvedInstructions=t[r].$value}),i.resolve(e)},function(e){i.reject(e)}),i.promise}var n=new e("ruleQuestions",["body","hint","instructions","prompt"]);return this.saveRuleQuestion=function(e){return n.save(e)},this.deleteRuleQuestion=function(e){return n.del(e)},this._getAllRuleQuestionsWithInstructions=function(){return n.all().then(i)},this.getRuleQuestions=function(e){var t=r.defer(),s=[];return angular.forEach(e,function(e,t){s.push(n.get(t))}),r.all(s).then(i).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},this}])},{"./crud.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/crud.js","./instruction.js":"/home/will/Clients/Quill-Grammar/src/scripts/services/instruction.js"}]},{},["./src/scripts/app/app.module.js"]);