!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({"./src/scripts/app/app.module.js":[function(require,module,exports){"use strict";angular.module("quill-grammar",[require("empirical-angular").name,require("./core/core.module.js").name,require("./index/index.module.js").name,require("./cms/cms.module.js").name,require("./play/sentences/module.js").name,require("./play/proofreadings/module.js").name,require("./layout/layout.module.js").name]).config(require("./app.config.js"))},{"./app.config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/app.config.js","./cms/cms.module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.module.js","./core/core.module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/core/core.module.js","./index/index.module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.module.js","./layout/layout.module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/layout/layout.module.js","./play/proofreadings/module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/module.js","./play/sentences/module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/module.js","empirical-angular":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/index.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js":[function(require,module,exports){module.exports=angular.module("quill-grammar.config",[]).constant("environment","production").constant("firebaseUrl","https://quillgrammar.firebaseio.com/v2").constant("empiricalBaseURL","https://www.quill.org/api/v1").constant("portholeProxy","https://www.quill.org/porthole_proxy").constant("grammarActivityClassificationUid","s2u3tVuguhfUjOQxDP-7RA").constant("proofreaderActivityClassificationUid","IACa8Egt7CvVYgtHPtEn2w").constant("firebaseApp","quillgrammar").constant("oauthClientId","2e8c49f66d9ea0ccbd71ea568c75eef96782e6a7510ebab7c537f3c6d563f6f2")},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/templates.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("index.html",'<!DOCTYPE html><html ng-app="quill-grammar" ng-strict-di><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title></title><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";\nanalytics.load("rHtA54bmWlbBCC2Yx4Gq7Xjgny1ENyDr")\nanalytics.page()\n}}()\n</script><script>window.onload = function() { Porthole.WindowProxyDispatcher.start(); };</script><script src="//use.typekit.net/plr0bzn.js"></script>\n<script>try{Typekit.load();}catch(e){}</script>\n<!-- start Mixpanel --><script type="text/javascript">(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");\nfor(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);\nmixpanel.init("e73f42bb313901840b5871ddc775a72b");</script><!-- end Mixpanel -->\n<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({QJf3ax:[function(t,e){function n(t){function e(e,n,a){t&&t(e,n,a),a||(a={});for(var c=s(e),f=c.length,u=i(a,o,r),d=0;f>d;d++)c[d].apply(u,n);return u}function a(t,e){f[t]=s(t).concat(e)}function s(t){return f[t]||[]}function c(){return n(e)}var f={};return{on:a,emit:e,create:c,listeners:s,_events:f}}function r(){return{}}var o="nr@context",i=t("gos");e.exports=n()},{gos:"7eSDFh"}],ee:[function(t,e){e.exports=t("QJf3ax")},{}],3:[function(t){function e(t){try{i.console&&console.log(t)}catch(e){}}var n,r=t("ee"),o=t(1),i={};try{n=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(i.console=!0,-1!==n.indexOf("dev")&&(i.dev=!0),-1!==n.indexOf("nr_dev")&&(i.nrDev=!0))}catch(a){}i.nrDev&&r.on("internal-error",function(t){e(t.stack)}),i.dev&&r.on("fn-err",function(t,n,r){e(r.stack)}),i.dev&&(e("NR AGENT IN DEVELOPMENT MODE"),e("flags: "+o(i,function(t){return t}).join(", ")))},{1:22,ee:"QJf3ax"}],4:[function(t){function e(t,e,n,i,s){try{c?c-=1:r("err",[s||new UncaughtException(t,e,n)])}catch(f){try{r("ierr",[f,(new Date).getTime(),!0])}catch(u){}}return"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t("ee"),a=window.onerror,s=!1,c=0;t("loader").features.err=!0,t(5),window.onerror=e;try{throw new Error}catch(f){"stack"in f&&(t(1),t(2),"addEventListener"in window&&t(3),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&t(4),s=!0)}i.on("fn-start",function(){s&&(c+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&c>0&&(c-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:9,2:8,3:6,4:10,5:3,6:23,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],5:[function(t){function e(){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var n=t("ee"),r=t("handle"),o=t(1),i=t(2);t("loader").features.stn=!0,t(3),n.on("fn-start",function(t){var e=t[0];e instanceof Event&&(this.bstStart=Date.now())}),n.on("fn-end",function(t,e){var n=t[0];n instanceof Event&&r("bst",[n,e,this.bstStart,Date.now()])}),o.on("fn-start",function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),o.on("fn-end",function(t,e){r("bstTimer",[e,this.bstStart,Date.now(),this.bstType])}),i.on("fn-start",function(){this.bstStart=Date.now()}),i.on("fn-end",function(t,e){r("bstTimer",[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),n.on("pushState-start",function(){this.time=Date.now(),this.startPath=location.pathname+location.hash}),n.on("pushState-end",function(){r("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),"addEventListener"in window.performance&&(window.performance.addEventListener("webkitresourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.webkitClearResourceTimings()},!1),window.performance.addEventListener("resourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.clearResourceTimings()},!1)),document.addEventListener("scroll",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("click",e,!1)}},{1:9,2:8,3:7,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],6:[function(t,e){function n(t){i.inPlace(t,["addEventListener","removeEventListener"],"-",r)}function r(t){return t[1]}var o=(t(1),t("ee").create()),i=t(2)(o),a=t("gos");if(e.exports=o,n(window),"getPrototypeOf"in Object){for(var s=document;s&&!s.hasOwnProperty("addEventListener");)s=Object.getPrototypeOf(s);s&&n(s);for(var c=XMLHttpRequest.prototype;c&&!c.hasOwnProperty("addEventListener");)c=Object.getPrototypeOf(c);c&&n(c)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&n(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e=t[1];"function"==typeof e?this.wrapped=t[1]=a(e,"nr@wrapped",function(){return i(e,"fn-",null,e.name||"anonymous")}):"function"==typeof e.handleEvent&&i.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:23,2:24,ee:"QJf3ax",gos:"7eSDFh"}],7:[function(t,e){var n=(t(2),t("ee").create()),r=t(1)(n);e.exports=n,r.inPlace(window.history,["pushState"],"-")},{1:24,2:23,ee:"QJf3ax"}],8:[function(t,e){var n=(t(2),t("ee").create()),r=t(1)(n);e.exports=n,r.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=r(t[0],"fn-")})},{1:24,2:23,ee:"QJf3ax"}],9:[function(t,e){function n(t,e,n){t[0]=o(t[0],"fn-",null,n)}var r=(t(2),t("ee").create()),o=t(1)(r);e.exports=r,o.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",n)},{1:24,2:23,ee:"QJf3ax"}],10:[function(t,e){function n(){f.inPlace(this,p,"fn-")}function r(t,e){f.inPlace(e,["onreadystatechange"],"fn-")}function o(t,e){return e}function i(t,e){for(var n in t)e[n]=t[n];return e}var a=t("ee").create(),s=t(1),c=t(2),f=c(a),u=c(s),d=window.XMLHttpRequest,p=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];e.exports=a,window.XMLHttpRequest=function(t){var e=new d(t);try{a.emit("new-xhr",[],e),u.inPlace(e,["addEventListener","removeEventListener"],"-",o),e.addEventListener("readystatechange",n,!1)}catch(r){try{a.emit("internal-error",[r])}catch(i){}}return e},i(d,XMLHttpRequest),XMLHttpRequest.prototype=d.prototype,f.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",o),a.on("send-xhr-start",r),a.on("open-xhr-start",r)},{1:6,2:24,ee:"QJf3ax"}],11:[function(t){function e(t){var e=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;c>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!e.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var a=t.responseType,f="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,u=n(f);if(u&&(r.rxSize=u),this.sameOrigin){var d=t.getResponseHeader("X-NewRelic-App-Data");d&&(e.cat=d.split(", ").pop())}}else e.status=0;r.cbTime=this.cbTime,o("xhr",[e,r,this.startTime])}}}function n(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}if(window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)){t("loader").features.xhr=!0;var o=t("handle"),i=t(2),a=t("ee"),s=["load","error","abort","timeout"],c=s.length,f=t(1);t(4),t(3),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=e,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,e){var r=this.metrics,o=t[0],i=this;if(r&&o){var f=n(o);f&&(r.txSize=f)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof e.onload))&&i.end(e)}catch(n){try{a.emit("internal-error",[n])}catch(r){}}};for(var u=0;c>u;u++)e.addEventListener(s[u],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+f(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+f(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{1:"XL7HBI",2:12,3:10,4:6,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],12:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],13:[function(t,e){function n(t){return function(){r(t,[(new Date).getTime()].concat(i(arguments)))}}var r=t("handle"),o=t(1),i=t(2);"undefined"==typeof window.newrelic&&(newrelic=window.NREUM);var a=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit","noticeError"];o(a,function(t,e){window.NREUM[e]=n("api-"+e)}),e.exports=window.NREUM},{1:22,2:23,handle:"D5DuLP"}],"7eSDFh":[function(t,e){function n(t,e,n){if(r.call(t,e))return t[e];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return t[e]=o,o}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],gos:[function(t,e){e.exports=t("7eSDFh")},{}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e,n){return r.listeners(t).length?r.emit(t,e,n):(o[t]||(o[t]=[]),void o[t].push(e))}var r=t("ee").create(),o={};e.exports=n,n.ee=r,r.q=o},{ee:"QJf3ax"}],id:[function(t,e){e.exports=t("XL7HBI")},{}],XL7HBI:[function(t,e){function n(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:i(t,o,function(){return r++})}var r=1,o="nr@id",i=t("gos");e.exports=n},{gos:"7eSDFh"}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info,e=f.getElementsByTagName("script")[0];if(t&&t.licenseKey&&t.applicationID&&e){s(d,function(e,n){e in t||(t[e]=n)});var n="https"===u.split(":")[0]||t.sslForHttp;p.proto=n?"https://":"http://",a("mark",["onload",i()]);var r=f.createElement("script");r.src=p.proto+t.agent,e.parentNode.insertBefore(r,e)}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=t(1),c=(t(2),window),f=c.document,u=(""+location).split("?")[0],d={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-632.min.js"},p=e.exports={offset:i(),origin:u,features:{}};f.addEventListener?(f.addEventListener("DOMContentLoaded",o,!1),c.addEventListener("load",n,!1)):(f.attachEvent("onreadystatechange",r),c.attachEvent("onload",n)),a("mark",["firstbyte",i()])},{1:22,2:13,handle:"D5DuLP"}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],22:[function(t,e){function n(t,e){var n=[],o="",i=0;for(o in t)r.call(t,o)&&(n[i]=e(o,t[o]),i+=1);return n}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],23:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],24:[function(t,e){function n(t){return!(t&&"function"==typeof t&&t.apply&&!t[i])}var r=t("ee"),o=t(1),i="nr@wrapper",a=Object.prototype.hasOwnProperty;e.exports=function(t){function e(t,e,r,a){function nrWrapper(){var n,i,s,f;try{i=this,n=o(arguments),s=r&&r(n,i)||{}}catch(d){u([d,"",[n,i,a],s])}c(e+"start",[n,i,a],s);try{return f=t.apply(i,n)}catch(p){throw c(e+"err",[n,i,p],s),p}finally{c(e+"end",[n,i,f],s)}}return n(t)?t:(e||(e=""),nrWrapper[i]=!0,f(t,nrWrapper),nrWrapper)}function s(t,r,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<r.length;c++)s=r[c],a=t[s],n(a)||(t[s]=e(a,f?s+o:o,i,s))}function c(e,n,r){try{t.emit(e,n,r)}catch(o){u([o,e,n,r])}}function f(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){u([r])}for(var o in t)a.call(t,o)&&(e[o]=t[o]);return e}function u(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=r),e.inPlace=s,e.flag=i,e}},{1:23,ee:"QJf3ax"}]},{},["G9z0Bl",4,11,5]);\n;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"f56b3f88be",applicationID:"6139670",sa:1,agent:"js-agent.newrelic.com/nr-632.min.js"}\n</script><base href="/"></head><body><div class="loading-spinner"><svg class="nc-icon outline" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64"> <g transform="translate(0, 0)"> <circle opacity="0.4" fill="none" stroke="#00c2a2 " stroke-width="4" stroke-linecap="round" stroke-miterlimit="10" cx="32" cy="32" r="30" stroke-linejoin="round"></circle> <path class="nc-circle-03-linear" data-cap="butt" data-color="color-2" fill="none" stroke="#00c2a2 " stroke-width="4" stroke-miterlimit="10" d="M32,2c16.56854,0,30,13.43146,30,30 " stroke-linejoin="round" stroke-linecap="round" transform="rotate(157.6742857143732 32 32)"></path> </g> <script transform="translate(0, 0)">function stepCircleThreeLin(t){startxCircle8||(startxCircle8=t);var e=t-startxCircle8,n=Math.min(e/1.4,360);504&gt;e||(startxCircle8+=504),window.requestAnimationFrame(stepCircleThreeLin),pathxCircle8.setAttribute("transform","rotate("+n+" 32 32)")}!function(){var t=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=window.setTimeout(function(){e(n+r)},r);return t=n+r,i})}();var pathxCircle8=document.getElementsByClassName("nc-circle-03-linear")[0],startxCircle8=null;window.requestAnimationFrame(stepCircleThreeLin);</script> </svg></div><ui-view></ui-view><script type="text/javascript">\nsetTimeout(function(){var a=document.createElement("script");\nvar b=document.getElementsByTagName("script")[0];\na.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0031/6377.js?"+Math.floor(new Date().getTime()/3600000);\na.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);\n</script></body></html>'),$templateCache.put("layout.html","<ui-view></ui-view>"),$templateCache.put("progress-bar.html",'<div class="activity-progress-bar">\n  <p>{{title}} {{progressString}}</p>\n  <div class="progress-bar-indication">\n    <span class="meter" ng-style="progressBarPercentage"></span>\n  </div>\n</div>\n'),$templateCache.put("activities.cms.base.html","<div ui-view></div>\n"),$templateCache.put("cms.base.html",'<div class="cms">\n  <h1><a ui-sref="cms-list()">Admin CMS</a></h1>\n  <div ui-view></div>\n</div>\n\n'),$templateCache.put("cms.html",'<div class="cms">\n  <h1>Create Grammar Materials</h1>\n  <ul>\n    <li><a ui-sref="cms-grammar-activities()">Create Grammar Activities (Sentence Writing)</a></li>\n    <li><a ui-sref="cms-proofreader-activities()">Create Proofreader Activities (Passages)</a></li>\n    <li><a ui-sref="cms-concepts()">Create Grammar Concepts (Rules)</a></li>\n  </ul>\n</div>\n\n'),$templateCache.put("index.html",'<grammar-rule-question question="currentQuestion" next="nextQuestion()">\n</grammar-rule-question>\n'),$templateCache.put("concepts.cms.base.html",'<h3><a ui-sref="cms-concepts()">Concepts</a></h3>\n<div ui-view></div>\n'),$templateCache.put("concepts.cms.html",'<div class="concept-search">\n  <input type="text" placeholder="Enter Search" ng-model="searchConcept"></input>\n</div>\n<b>Total Concepts {{getTotalConcepts(concepts)}}</b>\n<p></p>\n<b>Total Questions {{getTotalQuestions()}}</b>\n<div class="concept-list">\n  <table>\n    <thead>\n      <tr>\n        <th>\n          <a href="#" ng-click="sortType = \'concept_level_2.name\'; sortReverse = !sortReverse">\n              Concept Level 2\n              <span ng-show="sortType == \'concept_level_2.name\'">{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a>\n        </th>\n        <th>\n          <a href="#" ng-click="sortType = \'concept_level_1.name\'; sortReverse = !sortReverse">\n              Concept Level 1\n              <span ng-show="sortType == \'concept_level_1.name\'" >{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a>\n        </th>\n        <th>\n          <a href="#" ng-click="sortType = \'concept_level_0.name\'; sortReverse = !sortReverse">\n              Concept Level 0\n              <span ng-show="sortType == \'concept_level_0.name\'" >{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a>\n        </th>\n        <th>\n          FireBase Key\n        </th>\n        <th width=100>\n          <a href="#" ng-click="sortType = \'questionCount\'; sortReverse = !sortReverse">\n              Questions\n              <span ng-show="sortType == \'questionCount\'" >{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a>\n        </th>\n        <th width=100>\n          <a href="#" ng-click="sortType = \'ruleNumber\'; sortReverse = !sortReverse">\n              Rule Number\n              <span ng-show="sortType == \'ruleNumber\'" >{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a></th>\n        <th width=150>\n          <a href="#" ng-click="sortType = \'ruleDescription\'; sortReverse = !sortReverse">\n              Rule Description\n              <span ng-show="sortType == \'ruleDescription\'" >{{ sortReverse ? "&#x25B2;" : "&#x25BC;" }}</span>\n          </a></th>\n        <th width=40>View</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="c in concepts | orderBy:sortType:sortReverse | filter:searchConcept">\n        <td>{{c.concept_level_2.name}}</td>\n        <td>{{c.concept_level_1.name}}</td>\n        <td>{{c.concept_level_0.name}}</td>\n        <td>{{c.$id}}</td>\n        <td>{{c.questionCount}}</td>\n        <td>{{c.ruleNumber}}</td>\n        <td>{{c.ruleDescription.length > 0}}</td>\n        <td><a ui-sref="cms-concepts-view({id: c.$id})">View</a></td>\n      </tr>\n    </tbody>\n  </table>\n<div class="concept-create">\n  <a ui-sref="cms-concepts-create()"><button>Create Concepts</button></a>\n</div>\n'),$templateCache.put("concepts.create.cms.html","<concept-form></concept-form>\n"),$templateCache.put("concepts.edit.cms.html",'<concept-form></concept-form>\n<a ui-sref="cms-concepts-view({id: concept.$id})"><button>Cancel</button></a>\n'),$templateCache.put("concepts.questions.create.cms.html","<concept-question-form></concept-question-form>\n"),$templateCache.put("concepts.questions.edit.cms.html","<concept-question-form></concept-question-form>\n"),$templateCache.put("concepts.view.cms.html",'<h3>Concept View</h3>\n<a ui-sref="cms-concepts-edit({id: concept.$id})"><button>Edit Concept</button></a>\n<button ng-click="confirmDelete(concept.$id)">Delete Concept</button>\n<h3>{{concept.name}} ({{concept.ruleNumber}})</h3>\n\n<p>{{concept.ruleDescription}}</p>\n\n<h4>Concepts</h4>\n<ul>\n  <li>{{concept.concept_level_1.name}}</li>\n  <li>{{concept.concept_level_2.name}}</li>\n</ul>\n\n<h4>CCSS Standard</h4>\n<ul>\n  <li>{{concept.standard.name}}</li>\n  <li>{{concept.standard_level.name}}</li>\n</ul>\n\n<h4>Questions</h4>\n<ul ng-repeat="(id, q) in concept.questions">\n  <li>\n    <p>{{q.prompt}}</p>\n    <a ui-sref="cms-concepts-questions-edit({conceptId: concept.$id, conceptQuestionId: id})">edit</a>\n  </li>\n</ul>\n\n<a ui-sref="cms-concepts-questions-create({conceptId: concept.$id})"><button>Create Question</button</a>\n\n\n'),$templateCache.put("grammar.activities.base.cms.html",'<h3><a ui-sref="cms-grammar-activities()">Grammar Activities</a></h3>\n<div ui-view></div>\n'),$templateCache.put("grammar.activities.cms.html",'<div class="activity-search">\n  <input type="text" placeholder="Enter Search"></input>\n  <button>Search</button>\n</div>\n<div class="activity-create">\n  <a ui-sref="cms-grammar-activities-create()"><button>Create Activity</button></a>\n</div>\n\n<div class="grammar-activities-list">\n  <table>\n    <tr>\n      <th>Standard</th>\n      <th>Title</th>\n      <th>Theme</th>\n      <th>Questions</th>\n      <th>Edit</th>\n    </tr>\n    <tr ng-repeat="g in grammarActivities">\n      <td>{{g.standard.name}}</td>\n      <td>{{g.title}}</td>\n      <td>{{g.topicCategory.name}}</td>\n      <td>{{calculateNumberOfQuestions(g)}}</td>\n      <td><a ui-sref="cms-grammar-activities-edit({id: g.$id})">Edit</a></td>\n    </tr>\n  </table>\n</div>\n'),$templateCache.put("grammar.activities.create.cms.html","<grammar-activity-form></grammar-activity-form>\n"),$templateCache.put("grammar.activities.edit.cms.html",'<grammar-activity-form></grammar-activity-form>\n<a ui-sref="play-sw({uid: grammarActivity.$id, anonymous: true})"><button>Play Grammar Activity</button></a>\n<button ng-click="confirmDelete(grammarActivity.$id)">Remove Grammar Activity</button>\n'),$templateCache.put("proofreader.activities.base.cms.html",'<h3><a ui-sref="cms-proofreader-activities()">Proofreader Activities</a></h3>\n<div ui-view></div>\n'),$templateCache.put("proofreader.activities.cms.html",'<div class="activity-search">\n  <input type="text" placeholder="Enter Search"></input>\n  <button>Search</button>\n</div>\n<div class="activity-create">\n  <a ui-sref="cms-proofreader-activities-create()"><button>Create Activity</button></a>\n</div>\n\n<div class="proofreader-activities-list">\n  <table>\n    <tr>\n      <th>Standard</th>\n      <th>Title</th>\n      <th>Theme</th>\n      <th>Edit</th>\n    </tr>\n    <tr ng-repeat="p in proofreaderActivities">\n      <td>{{p.standard.name}}</td>\n      <td>{{p.title}}</td>\n      <td>{{p.topicCategory.name}}</td>\n      <td><a ui-sref="cms-proofreader-activities-edit({id: p.$id})">Edit</a></td>\n    </tr>\n  </table>\n</div>\n'),$templateCache.put("proofreader.activities.create.cms.html","<proofreader-activity-form></proofreader-activity-form>\n"),$templateCache.put("proofreader.activities.edit.cms.html",'<proofreader-activity-form></proofreader-activity-form>\n<a ui-sref="play-pf({uid: proofreaderActivity.$id, anonymous: true})"><button>Play Proofreader Activity</button></a>\n<button ng-click="confirmDelete(proofreaderActivity.$id)">Remove Proofreader Activity</button>\n'),$templateCache.put("passage.html",'<div class="inner-container">\n  <div class="passage">\n    <div ng-class="{\'word\':true, \'error-tooltip-item\': !word.isBr()}" ng-repeat="(index, word) in words track by index" id="error-tooltip-scroll-{{index}}">\n      <p ng-bind-html="space" ng-show="word.isBr()" id="break-binding-point-{{index}}"></p>\n      <passage-word-input></passage-word-input>\n      <proofreading-error-tooltip ></proofreading-error-tooltip>\n    </div>\n  </div>\n</div>'),$templateCache.put("pf-heading.html",'<div class="quill-grammar-pf-heading">\n  <div class="inner-container">\n    <h1 ng-show="!proofreadingActivity.image">{{proofreadingActivity.title}}</h1>\n    <div class="header-image" ng-show="proofreadingActivity.image">\n      <img ng-src="/assets/images/{{proofreadingActivity.image}}" alt="proofreadingActivity.title"></img>\n      <p>{{proofreadingActivity.title}}</p>\n    </div>\n    <div class="instructions">\n      <img src="/assets/images/information_icon.png" alt="information"></img>\n      <p ng-bind-html="proofreadingActivity.description | trustedHtml"></p>\n    </div>\n    <activity-progress-bar max="proofreadingPassage.getNumErrors()" current="proofreadingPassage.numChanges" title="\'Edits Made:\'"></activity-progress-bar>\n  </div>\n</div>\n'),$templateCache.put("pf-submit-panel.html",'<div ng-class="{\'passage-submit-panel\': true, \'passage-submitted\': proofreadingPassage.submitted}" id="last-chance-tooltip-breakpoint-at-panel">\n\n  <div class="inner-container">\n    <div class="passage-message">\n    {{pf.message}}\n    </div>\n    <button ng-show="!proofreadingPassage.submitted" ng-class="{\'no-message\': !pf.message}" ng-click="submitPassage()">Check Work</button>\n  </div>\n\n</div>\n'),$templateCache.put("proofreadings.play.html",'<div ng-class="{proofreading:true}" ng-show="proofreadingActivity">\n  <quill-grammar-pf-heading ></quill-grammar-pf-heading>\n  <quill-grammar-passage></quill-grammar-passage>\n  <quill-grammar-passage-submit-panel></quill-grammar-passage-submit-panel>\n\n  <div class="proofreading-modal" ng-show="modal.show">\n    <input class="modal-state" type="checkbox" ng-checked="modal.show"/>\n    <div class="modal-window">\n      <div class="modal-inner">\n        <h2>{{modal.title}}</h2>\n        <p>{{modal.message}}</p>\n        <button ng-click="modal.buttonClick()">{{modal.buttonMessage}}</button>\n      </div>\n    </div>\n  </div>\n\n</div>\n'),$templateCache.put("sentences.concept-overview.html",'<div class="concept-overview-container">\n  <button class="show-hint" ng-click="showConceptOverview = !showConceptOverview"><span ng-hide="showConceptOverview">Show example</span><span ng-show="showConceptOverview">Hide example</span></button>\n\n  <div class="" ng-class="{hiddenExample: !showConceptOverview}" id="myModal" tabindex="-1">\n    <p ng-bind-html="formatDescription(currentConcept.ruleDescription) | trustedHtml"></p>\n  </div>\n  <!-- <div ng-show="showConceptOverview" class="sentence-tooltip-new">\n\n  </div> -->\n</div>\n'),$templateCache.put("sentences.play.html",'<div ng-class="{\'sentence-writing\': true}" ng-show="questions.length">\n  <div class="passage-heading" ng-show="passageTitle && passageImageUrl">\n    <img ng-src="/assets/images/{{passageImageUrl}}" alt="passageTitle"></img>\n    <p>{{passageTitle}}</p>\n  </div>\n  <div class="sentence-writing-heading">\n    <div class="inner-container">\n      <div class="left">\n        <h2>{{currentConcept.concept_level_1.name}}</h2>\n        <sentence-writing-concept-overview></sentence-writing-concept-overview>\n      </div>\n      <div class="right">\n        <activity-progress-bar title="\'Sentence Completed:\'" max="questions.length" current="number"></activity-progress-bar>\n      </div>\n    </div>\n  </div>\n  <grammar-rule-question question="currentQuestion" next="nextQuestion(currentQuestion)" submit="grammarActivity.submitAnswer(currentQuestion, sessionId)">\n  </grammar-rule-question>\n</div>\n'),
$templateCache.put("sentences.results.html",'<div class="loading-spinner">\n  <svg class="nc-icon outline" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64"> <g transform="translate(0, 0)"> <circle opacity="0.4" fill="none" stroke="#00c2a2 " stroke-width="4" stroke-linecap="round" stroke-miterlimit="10" cx="32" cy="32" r="30" stroke-linejoin="round"></circle> <path class="nc-circle-03-linear" data-cap="butt" data-color="color-2" fill="none" stroke="#00c2a2 " stroke-width="4" stroke-miterlimit="10" d="M32,2c16.56854,0,30,13.43146,30,30 " stroke-linejoin="round" stroke-linecap="round" transform="rotate(157.6742857143732 32 32)"></path> </g> <script transform="translate(0, 0)">function stepCircleThreeLin(t){startxCircle8||(startxCircle8=t);var e=t-startxCircle8,n=Math.min(e/1.4,360);504&gt;e||(startxCircle8+=504),window.requestAnimationFrame(stepCircleThreeLin),pathxCircle8.setAttribute("transform","rotate("+n+" 32 32)")}!function(){var t=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=window.setTimeout(function(){e(n+r)},r);return t=n+r,i})}();var pathxCircle8=document.getElementsByClassName("nc-circle-03-linear")[0],startxCircle8=null;window.requestAnimationFrame(stepCircleThreeLin);</script> </svg>\n</div>\n\n<div class="results-center">\n  <h1>Loading...</h1>\n</div>\n'),$templateCache.put("ruleQuestion.html",'<div class="question">\n  <div class="information">\n    <div class="inner-container">\n      <img src="/assets/images/information_icon.png" alt="information_icon"/>\n      <p ng-bind-html="question.instructions | trustedHtml"></p>\n    </div>\n  </div>\n  <div class="inner-container">\n    <p class="prompt" ng-bind-html="question.prompt | formatPrompt | trustedHtml"></p>\n  </div>\n  <div class="inner-container">\n    <textarea class="student-input" type="text" ng-model="question.response" ng-paste="capturePasteEvent($event)" ng-enter="capturePressEnterEvent()" ng-timer="resetWPM()" typing-speed autocapitalize="off" autocorrect="off" spellcheck="false"></textarea>\n  </div>\n  <div class="rule-question-sentence-bar" ng-class="questionClass">\n    <div class="inner-container">\n      <div class="message-panel">\n        <img ng-src="/assets/images/{{questionClass}}_icon.png" alt="responseMessage" ng-show="questionClass && questionClass != \'default\'"></img>\n        <p ng-show="responseMessage" ng-bind-html="responseMessage | trustedHtml"></p>\n      </div>\n      <div ng-class="{\'no-message\': !responseMessage, message: responseMessage}">\n        <button ng-show="showCheckAnswerButton" ng-click="checkAnswer()">{{checkAnswerText}}</button>\n        <button ng-show="showNextQuestion" ng-click="nextProblem()">Next Problem</button>\n      </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("baseConcepts.html",'<select\n  ng-show="hasLevel(2)"\n  ng-options="c.name for c in (concepts.concept_level_2 | orderBy:\'name\') track by c.uid"\n  ng-model="model.concept_level_2"\n  ng-required="true"\n><option value="">Choose Concept Level 2</option></select>\n<select\n  ng-show="model.concept_level_2 && hasLevel(1)"\n  ng-options="c.name for c in (concepts.concept_level_1 | filterConcepts:model.concept_level_2.id | orderBy:\'name\') track by c.uid"\n  ng-model="model.concept_level_1"\n  ng-required="true"\n><option value="">Choose Concept Level 1</option></select>\n<select\n  ng-show="model.concept_level_1 && hasLevel(0)"\n  ng-options="c.name for c in (concepts.concept_level_0 | filterFBConcepts:model.concept_level_1.id | orderBy:\'name\') track by c.uid"\n  ng-model="model.concept_level_0"\n  ng-required="true"\n  ><option value="">Choose Concept Level 0</option></select>\n'),$templateCache.put("baseStandards.html",'<select\n  ng-options="s.name for s in (standards | orderBy:\'name\') track by s.uid"\n  ng-model="model.standard"\n  >\n  <option value="">Select Standard</option>\n</select>\n<select\n  ng-options="s.name for s in (standardLevels | orderBy:\'name\') track by s.uid"\n  ng-model="model.standard_level"\n  >\n  <option value="">Select Standard Level</option>\n</select>\n'),$templateCache.put("baseTopicCategories.html",'<select\n  ng-options="tc.name for tc in (topicCategories | orderBy:\'name\') track by tc.uid"\n  ng-model="model.topicCategory"\n  >\n  <option value="">Select Topic Category</option>\n</select>\n'),$templateCache.put("conceptForm.html",'<dynamic-form template="conceptTemplate"\n  ng-model="concept">\n</dynamic-form>\n<standards-selector model="concept"></standards-selector>\n<concepts-selector model="concept" levels="[1,2]"></concepts-selector>\n<button ng-click="processConceptForm()">Update Concept</button>\n'),$templateCache.put("conceptQuestionForm.html",'<dynamic-form template="conceptQuestionTemplate"\n  ng-model="conceptQuestion"\n  ng-submit="processConceptQuestionForm()">\n</dynamic-form>\n<ul>\n  <li ng-repeat="cqa in conceptQuestion.answers">\n    <dynamic-form template="conceptQuestionAnswerTemplate"\n                  ng-model="cqa">\n    </dynamic-form>\n    <button ng-click="removeAnswerFromConceptQuestion(cqa)">X</button>\n  </li>\n</ul>\n<button ng-click="addAnotherAnswerToConceptQuestion()">Add Another Answer</button>\n\n<a ui-sref="cms-concepts-view({id: concept.$id})"><button>Cancel</button></a>\n'),$templateCache.put("grammarActivityForm.html",'<label for="title">Title</label>\n<input label="title" ng-model="grammarActivity.title" type="text" ng-required="true"></input>\n<label for="description">Description</label>\n<textarea label="description" ng-model="grammarActivity.description" ng-required="true"></textarea>\n<topic-category-selector model="grammarActivity"></topic-category-selector>\n<standards-selector model="grammarActivity"></standards-selector>\n<h3>Concept Question Set</h3>\n<ul>\n  <li ng-repeat="qs in grammarActivity.concepts">\n    <concepts-selector model="qs" levels="[0,1,2]"></concepts-selector>\n    <input type="text" ng-model="qs.quantity" placeholder="Quantity"></input>\n    <button ng-click="removeQuestionFromSet(qs)">X</button>\n  </li>\n</ul>\n<button ng-click="addAnotherQuestionToSet()">Add Another Question</button>\n<button type="submit" ng-click="processGrammarActivityForm()">Submit Grammar Activity</button>\n\n'),$templateCache.put("proofreaderActivityForm.html",'<label for="title">Title</label>\n<input label="title" ng-model="proofreaderActivity.title" type="text" ng-required="true"></input>\n<label for="description">Description</label>\n<textarea label="description" ng-model="proofreaderActivity.description" ng-required="true"></textarea>\n<topic-category-selector model="proofreaderActivity"></topic-category-selector>\n<standards-selector model="proofreaderActivity"></standards-selector>\n<label for="passage">Passage</label>\n<textarea label="passage" rows="10" ng-model="proofreaderActivity.passage" ng-required="true"></textarea>\n<input label="ue" type="checkbox" ng-model="proofreaderActivity.underlineErrorsInProofreader">Underline errors in passage</input>\n<br/>\n<button type="submit" ng-click="processProofreaderActivityForm()">Submit Proofreader Activity</button>\n\n'),$templateCache.put("error-tooltip.html",'<div ng-class="getErrorTooltipClass(index)" ng-if="!word.isBr() && word.hasErrorToShow()"\n  ng-style="word.tooltip.style">\n  <div ng-class="{incorrectError: word.hasIncorrectError(), notNecessaryError: word.hasNotNecessaryError(), correct: word.hasCorrect()}">\n    <div ng-class="getErrorTooltipTopClass(answerImageName(word.type))">\n      <div class="img-div">\n        <img ng-src="/assets/images/{{answerImageName(word.type)}}_icon.png" alt="{{word.type}}"></img>\n      </div>\n      <h4>{{word.type}}</h4>\n      <p class="counter">{{word.errorCounter()}}</p>\n    </div>\n    <div class="bottom-panel">\n      <h4>Correct Edit:</h4>\n      <p>{{word.plus ? word.plus : word.text}}</p>\n      <span ng-if="!word.hasNotNecessaryError()">\n        <h4>Grammatical Concept:</h4>\n        <p>{{proofreadingPassage.getGrammaticalConcept(word)}}</p>\n      </span>\n      <button ng-click="word.nextAction.fn()">{{word.nextAction.title}} ➞</button>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("passage-word-input.html",'<input\n  type="text"\n  ng-class="{incorrectError: word.hasIncorrectError(), notNecessaryError: word.hasNotNecessaryError(), changed: word.text !== word.responseText, correct: word.hasCorrect(), underlined: needsUnderlining(word), tooltipped: word.tooltip.style}"\n  ng-readonly="proofreadingPassage.submitted"\n  ng-size="{{word.responseText.length}}"\n  ng-trim="false"\n  autocapitalize="off"\n  autocorrect="off">\n</input>\n')}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/directives/typing_speed.js":[function(require,module,exports){module.exports=["TypingSpeed","_",function(TypingSpeed,_){return{restrict:"A",require:"^ngModel",link:function(scope,element,attrs,model){function getWordCount(){var text=model.$viewValue;return text?text.trim().length?text.split(" ").length:void 0:0}TypingSpeed.waitTime=500,element.on("keydown",function(){TypingSpeed.startTracking()}),element.on("keyup blur",_.debounce(function(){TypingSpeed.wordCount=getWordCount(),TypingSpeed.stopTracking()},TypingSpeed.waitTime))}}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/index.js":[function(require,module,exports){module.exports=angular.module("empirical-angular",["firebase"]).service("ActivitySession",require("./services/activity_session.js")).service("ConceptTagResult",require("./services/concept_tag_result.js")).service("TypingSpeed",require("./services/typing_speed.js")).directive("typingSpeed",require("./directives/typing_speed.js"))},{"./directives/typing_speed.js":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/directives/typing_speed.js","./services/activity_session.js":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/activity_session.js","./services/concept_tag_result.js":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/concept_tag_result.js","./services/typing_speed.js":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/typing_speed.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/activity_session.js":[function(require,module,exports){module.exports=["$http","empiricalBaseURL",function($http,empiricalBaseURL){function activitySessionUrl(id){return empiricalBaseURL+"/activity_sessions/"+id}function update(id,putData,cb){return $http.put(activitySessionUrl(id),putData)}var activitySession=this;activitySession.finish=function(sessionId,putData,cb){return putData.state="finished",update(sessionId,putData).then(function(response){return response.data.activity_session})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/concept_tag_result.js":[function(require,module,exports){module.exports=["$firebase","firebaseUrl",function($firebase,firebaseUrl){function getResultList(activitySessionId){var resultList=$firebase(resultsRef.child(activitySessionId)).$asArray();return resultList.$loaded()}var conceptTagResult=this,resultsRef=new Firebase(firebaseUrl+"/concept_tag_results");conceptTagResult.save=function(activitySessionId,data,cb){return getResultList(activitySessionId).then(function(list){return list.$add(data)})},conceptTagResult.findAsJsonByActivitySessionId=function(activitySessionId){return getResultList(activitySessionId).then(function(list){return list.map(function(fbResultObject){var clean=JSON.parse(JSON.stringify(fbResultObject));return delete clean.$id,delete clean.$priority,clean})})},conceptTagResult.removeBySessionId=function(activitySessionId){return $firebase(resultsRef).$remove(activitySessionId)}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/empirical-angular/services/typing_speed.js":[function(require,module,exports){function TypingSpeed(){}module.exports=TypingSpeed,TypingSpeed.prototype={reset:function(){this._tracking=!1,this._startTime=null,this.wordCount=null,this.waitTime=null},startTracking:function(){this._tracking||(this._startTime||(this._startTime=new Date),this._tracking=!0)},stopTracking:function(){if(this._tracking){this._tracking=!1;var endTime=new Date,totalSeconds=this._getElapsedSeconds(this._startTime,endTime,this.waitTime);this.wordsPerMinute=Math.floor(this._getWordsPerMinute(totalSeconds,this.wordCount))}},_getElapsedSeconds:function(startTime,endTime,waitTime){var diff=endTime-startTime;return waitTime&&(diff-=waitTime),diff/1e3},_getWordsPerMinute:function(seconds,wordCount){return wordCount/(seconds/60)}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/ng-autofocus/autofocus.js":[function(require,module,exports){!function(){"use strict";function Autofocus($timeout){function link($scope,$element,$attrs){function focusIf(condition){delay=delay||0,condition&&$timeout(function(){dom.focus()},delay)}var dom=$element[0],delay=$attrs.autofocusDelay;$attrs.autofocus?(focusIf($scope[$attrs.autofocus]),$scope.$watch($attrs.autofocus,focusIf)):focusIf(!0)}return{restrict:"A",link:link}}angular.module("autofocus",[]).directive("autofocus",Autofocus),Autofocus.$inject=["$timeout"]}()},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/ramda/dist/ramda.js":[function(require,module,exports){(function(){"use strict";var __={"@@functional/placeholder":!0},_add=function(a,b){return a+b},_all=function(fn,list){for(var idx=0;idx<list.length;){if(!fn(list[idx]))return!1;idx+=1}return!0},_any=function(fn,list){for(var idx=0;idx<list.length;){if(fn(list[idx]))return!0;idx+=1}return!1},_assoc=function(prop,val,obj){var result={};for(var p in obj)result[p]=obj[p];return result[prop]=val,result},_cloneRegExp=function(pattern){return new RegExp(pattern.source,(pattern.global?"g":"")+(pattern.ignoreCase?"i":"")+(pattern.multiline?"m":"")+(pattern.sticky?"y":"")+(pattern.unicode?"u":""))},_complement=function(f){return function(){return!f.apply(this,arguments)}},_compose=function(f,g){return function(){return f.call(this,g.apply(this,arguments))}},_concat=function(set1,set2){set1=set1||[],set2=set2||[];var idx,len1=set1.length,len2=set2.length,result=[];for(idx=0;len1>idx;)result[result.length]=set1[idx],idx+=1;for(idx=0;len2>idx;)result[result.length]=set2[idx],idx+=1;return result},_containsWith=function(pred,x,list){for(var idx=0,len=list.length;len>idx;){if(pred(x,list[idx]))return!0;idx+=1}return!1},_createMapEntry=function(key,val){var obj={};return obj[key]=val,obj},_createMaxMinBy=function(comparator){return function(valueComputer,list){if(list&&list.length>0){for(var computedCurrent,idx=1,winner=list[idx],computedWinner=valueComputer(winner);idx<list.length;)computedCurrent=valueComputer(list[idx]),comparator(computedCurrent,computedWinner)&&(computedWinner=computedCurrent,winner=list[idx]),idx+=1;return winner}}},_curry1=function(fn){return function f1(a){return 0===arguments.length?f1:null!=a&&a["@@functional/placeholder"]===!0?f1:fn(a)}},_curry2=function(fn){return function f2(a,b){var n=arguments.length;return 0===n?f2:1===n&&null!=a&&a["@@functional/placeholder"]===!0?f2:1===n?_curry1(function(b){return fn(a,b)}):2===n&&null!=a&&a["@@functional/placeholder"]===!0&&null!=b&&b["@@functional/placeholder"]===!0?f2:2===n&&null!=a&&a["@@functional/placeholder"]===!0?_curry1(function(a){return fn(a,b)}):2===n&&null!=b&&b["@@functional/placeholder"]===!0?_curry1(function(b){return fn(a,b)}):fn(a,b)}},_curry3=function(fn){return function f3(a,b,c){var n=arguments.length;return 0===n?f3:1===n&&null!=a&&a["@@functional/placeholder"]===!0?f3:1===n?_curry2(function(b,c){return fn(a,b,c)}):2===n&&null!=a&&a["@@functional/placeholder"]===!0&&null!=b&&b["@@functional/placeholder"]===!0?f3:2===n&&null!=a&&a["@@functional/placeholder"]===!0?_curry2(function(a,c){return fn(a,b,c)}):2===n&&null!=b&&b["@@functional/placeholder"]===!0?_curry2(function(b,c){return fn(a,b,c)}):2===n?_curry1(function(c){return fn(a,b,c)}):3===n&&null!=a&&a["@@functional/placeholder"]===!0&&null!=b&&b["@@functional/placeholder"]===!0&&null!=c&&c["@@functional/placeholder"]===!0?f3:3===n&&null!=a&&a["@@functional/placeholder"]===!0&&null!=b&&b["@@functional/placeholder"]===!0?_curry2(function(a,b){return fn(a,b,c)}):3===n&&null!=a&&a["@@functional/placeholder"]===!0&&null!=c&&c["@@functional/placeholder"]===!0?_curry2(function(a,c){return fn(a,b,c)}):3===n&&null!=b&&b["@@functional/placeholder"]===!0&&null!=c&&c["@@functional/placeholder"]===!0?_curry2(function(b,c){return fn(a,b,c)}):3===n&&null!=a&&a["@@functional/placeholder"]===!0?_curry1(function(a){return fn(a,b,c)}):3===n&&null!=b&&b["@@functional/placeholder"]===!0?_curry1(function(b){return fn(a,b,c)}):3===n&&null!=c&&c["@@functional/placeholder"]===!0?_curry1(function(c){return fn(a,b,c)}):fn(a,b,c)}},_dissoc=function(prop,obj){var result={};for(var p in obj)p!==prop&&(result[p]=obj[p]);return result},_eq=function(x,y){return x===y?0!==x||1/x===1/y:x!==x&&y!==y},_filter=function(fn,list){for(var idx=0,len=list.length,result=[];len>idx;)fn(list[idx])&&(result[result.length]=list[idx]),idx+=1;return result},_filterIndexed=function(fn,list){for(var idx=0,len=list.length,result=[];len>idx;)fn(list[idx],idx,list)&&(result[result.length]=list[idx]),idx+=1;return result},_forEach=function(fn,list){for(var idx=0,len=list.length;len>idx;)fn(list[idx]),idx+=1;return list},_forceReduced=function(x){return{"@@transducer/value":x,"@@transducer/reduced":!0}},_functionsWith=function(fn){return function(obj){return _filter(function(key){return"function"==typeof obj[key]},fn(obj))}},_gt=function(a,b){return a>b},_has=function(prop,obj){return Object.prototype.hasOwnProperty.call(obj,prop)},_identity=function(x){return x},_isArray=Array.isArray||function(val){return null!=val&&val.length>=0&&"[object Array]"===Object.prototype.toString.call(val)},_isInteger=Number.isInteger||function(n){return n<<0===n},_isThenable=function(value){return null!=value&&value===Object(value)&&"function"==typeof value.then},_isTransformer=function(obj){return"function"==typeof obj["@@transducer/step"]},_lt=function(a,b){return b>a},_map=function(fn,list){for(var idx=0,len=list.length,result=[];len>idx;)result[idx]=fn(list[idx]),idx+=1;return result},_multiply=function(a,b){return a*b},_nth=function(n,list){return 0>n?list[list.length+n]:list[n]},_path=function(paths,obj){if(null!=obj){for(var val=obj,idx=0,len=paths.length;len>idx&&null!=val;idx+=1)val=val[paths[idx]];return val}},_prepend=function(el,list){return _concat([el],list)},_quote=function(s){return'"'+s.replace(/"/g,'\\"')+'"'},_reduced=function(x){return x&&x["@@transducer/reduced"]?x:{"@@transducer/value":x,"@@transducer/reduced":!0}},_slice=function _slice(args,from,to){switch(arguments.length){case 1:return _slice(args,0,args.length);case 2:return _slice(args,from,args.length);default:for(var list=[],idx=0,len=Math.max(0,Math.min(args.length,to)-from);len>idx;)list[idx]=args[from+idx],idx+=1;return list}},_toISOString=function(){var pad=function(n){return(10>n?"0":"")+n};return"function"==typeof Date.prototype.toISOString?function(d){return d.toISOString()}:function(d){return d.getUTCFullYear()+"-"+pad(d.getUTCMonth()+1)+"-"+pad(d.getUTCDate())+"T"+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes())+":"+pad(d.getUTCSeconds())+"."+(d.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),_xdropRepeatsWith=function(){function XDropRepeatsWith(pred,xf){this.xf=xf,this.pred=pred,this.lastValue=void 0,this.seenFirstValue=!1}return XDropRepeatsWith.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},XDropRepeatsWith.prototype["@@transducer/result"]=function(result){return this.xf["@@transducer/result"](result)},XDropRepeatsWith.prototype["@@transducer/step"]=function(result,input){var sameAsLast=!1;return this.seenFirstValue?this.pred(this.lastValue,input)&&(sameAsLast=!0):this.seenFirstValue=!0,this.lastValue=input,sameAsLast?result:this.xf["@@transducer/step"](result,input)},_curry2(function(pred,xf){return new XDropRepeatsWith(pred,xf)})}(),_xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(result){return this.xf["@@transducer/result"](result)}},_xfilter=function(){function XFilter(f,xf){this.xf=xf,this.f=f}return XFilter.prototype["@@transducer/init"]=_xfBase.init,XFilter.prototype["@@transducer/result"]=_xfBase.result,XFilter.prototype["@@transducer/step"]=function(result,input){return this.f(input)?this.xf["@@transducer/step"](result,input):result},_curry2(function(f,xf){return new XFilter(f,xf)})}(),_xfind=function(){function XFind(f,xf){this.xf=xf,this.f=f,this.found=!1}return XFind.prototype["@@transducer/init"]=_xfBase.init,XFind.prototype["@@transducer/result"]=function(result){return this.found||(result=this.xf["@@transducer/step"](result,void 0)),this.xf["@@transducer/result"](result)},XFind.prototype["@@transducer/step"]=function(result,input){return this.f(input)&&(this.found=!0,result=_reduced(this.xf["@@transducer/step"](result,input))),result},_curry2(function(f,xf){return new XFind(f,xf)})}(),_xfindIndex=function(){function XFindIndex(f,xf){this.xf=xf,this.f=f,this.idx=-1,this.found=!1}return XFindIndex.prototype["@@transducer/init"]=_xfBase.init,XFindIndex.prototype["@@transducer/result"]=function(result){return this.found||(result=this.xf["@@transducer/step"](result,-1)),this.xf["@@transducer/result"](result)},XFindIndex.prototype["@@transducer/step"]=function(result,input){return this.idx+=1,this.f(input)&&(this.found=!0,result=_reduced(this.xf["@@transducer/step"](result,this.idx))),result},_curry2(function(f,xf){return new XFindIndex(f,xf)})}(),_xfindLast=function(){function XFindLast(f,xf){this.xf=xf,this.f=f}return XFindLast.prototype["@@transducer/init"]=_xfBase.init,XFindLast.prototype["@@transducer/result"]=function(result){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](result,this.last))},XFindLast.prototype["@@transducer/step"]=function(result,input){return this.f(input)&&(this.last=input),result},_curry2(function(f,xf){return new XFindLast(f,xf)})}(),_xfindLastIndex=function(){function XFindLastIndex(f,xf){this.xf=xf,this.f=f,this.idx=-1,this.lastIdx=-1}return XFindLastIndex.prototype["@@transducer/init"]=_xfBase.init,XFindLastIndex.prototype["@@transducer/result"]=function(result){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](result,this.lastIdx))},XFindLastIndex.prototype["@@transducer/step"]=function(result,input){return this.idx+=1,this.f(input)&&(this.lastIdx=this.idx),result},_curry2(function(f,xf){return new XFindLastIndex(f,xf)})}(),_xmap=function(){function XMap(f,xf){this.xf=xf,this.f=f}return XMap.prototype["@@transducer/init"]=_xfBase.init,XMap.prototype["@@transducer/result"]=_xfBase.result,XMap.prototype["@@transducer/step"]=function(result,input){return this.xf["@@transducer/step"](result,this.f(input))},_curry2(function(f,xf){return new XMap(f,xf)})}(),_xtake=function(){function XTake(n,xf){this.xf=xf,this.n=n}return XTake.prototype["@@transducer/init"]=_xfBase.init,XTake.prototype["@@transducer/result"]=_xfBase.result,XTake.prototype["@@transducer/step"]=function(result,input){return this.n-=1,0===this.n?_reduced(this.xf["@@transducer/step"](result,input)):this.xf["@@transducer/step"](result,input)},_curry2(function(n,xf){return new XTake(n,xf)})}(),_xtakeWhile=function(){function XTakeWhile(f,xf){this.xf=xf,this.f=f}return XTakeWhile.prototype["@@transducer/init"]=_xfBase.init,XTakeWhile.prototype["@@transducer/result"]=_xfBase.result,XTakeWhile.prototype["@@transducer/step"]=function(result,input){return this.f(input)?this.xf["@@transducer/step"](result,input):_reduced(result)},_curry2(function(f,xf){return new XTakeWhile(f,xf)})}(),_xwrap=function(){function XWrap(fn){this.f=fn}return XWrap.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},XWrap.prototype["@@transducer/result"]=function(acc){return acc},XWrap.prototype["@@transducer/step"]=function(acc,x){return this.f(acc,x)},function(fn){return new XWrap(fn)}}(),add=_curry2(_add),adjust=_curry3(function(fn,idx,list){if(idx>=list.length||idx<-list.length)return list;var start=0>idx?list.length:0,_idx=start+idx,_list=_concat(list);return _list[_idx]=fn(list[_idx]),_list}),always=_curry1(function(val){return function(){return val}}),aperture=_curry2(function(n,list){for(var idx=0,limit=list.length-(n-1),acc=new Array(limit>=0?limit:0);limit>idx;)acc[idx]=_slice(list,idx,idx+n),idx+=1;return acc}),apply=_curry2(function(fn,args){return fn.apply(this,args)}),arity=_curry2(function(n,fn){switch(n){case 0:return function(){return fn.apply(this,arguments)};case 1:return function(a0){return fn.apply(this,arguments)};case 2:return function(a0,a1){return fn.apply(this,arguments)};case 3:return function(a0,a1,a2){return fn.apply(this,arguments)};case 4:return function(a0,a1,a2,a3){return fn.apply(this,arguments)};case 5:return function(a0,a1,a2,a3,a4){return fn.apply(this,arguments)};case 6:return function(a0,a1,a2,a3,a4,a5){return fn.apply(this,arguments)};case 7:return function(a0,a1,a2,a3,a4,a5,a6){return fn.apply(this,arguments)};case 8:return function(a0,a1,a2,a3,a4,a5,a6,a7){return fn.apply(this,arguments)};case 9:return function(a0,a1,a2,a3,a4,a5,a6,a7,a8){return fn.apply(this,arguments)};case 10:return function(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9){return fn.apply(this,arguments)};default:throw new Error("First argument to arity must be a non-negative integer no greater than ten")}}),assoc=_curry3(_assoc),bind=_curry2(function(fn,thisObj){return arity(fn.length,function(){return fn.apply(thisObj,arguments)})}),both=_curry2(function(f,g){return function(){return f.apply(this,arguments)&&g.apply(this,arguments)}}),comparator=_curry1(function(pred){return function(a,b){return pred(a,b)?-1:pred(b,a)?1:0}}),complement=_curry1(_complement),cond=function(){var pairs=arguments;return function(){for(var idx=0;idx<pairs.length;){if(pairs[idx][0].apply(this,arguments))return pairs[idx][1].apply(this,arguments);idx+=1}}},containsWith=_curry3(_containsWith),countBy=_curry2(function(fn,list){for(var counts={},len=list.length,idx=0;len>idx;){var key=fn(list[idx]);counts[key]=(_has(key,counts)?counts[key]:0)+1,idx+=1}return counts}),createMapEntry=_curry2(_createMapEntry),dec=add(-1),defaultTo=_curry2(function(d,v){return null==v?d:v}),differenceWith=_curry3(function(pred,first,second){for(var out=[],idx=0,firstLen=first.length,containsPred=containsWith(pred);firstLen>idx;)containsPred(first[idx],second)||containsPred(first[idx],out)||(out[out.length]=first[idx]),idx+=1;return out}),dissoc=_curry2(_dissoc),divide=_curry2(function(a,b){return a/b}),either=_curry2(function(f,g){return function(){return f.apply(this,arguments)||g.apply(this,arguments)}}),eq=_curry2(_eq),evolve=_curry2(function evolve(transformations,object){var transformation,key,type,result={};for(key in object)transformation=transformations[key],type=typeof transformation,result[key]="function"===type?transformation(object[key]):"object"===type?evolve(transformations[key],object[key]):object[key];return result}),filterIndexed=_curry2(_filterIndexed),forEachIndexed=_curry2(function(fn,list){for(var idx=0,len=list.length;len>idx;)fn(list[idx],idx,list),idx+=1;return list}),fromPairs=_curry1(function(pairs){for(var idx=0,len=pairs.length,out={};len>idx;)_isArray(pairs[idx])&&pairs[idx].length&&(out[pairs[idx][0]]=pairs[idx][1]),idx+=1;return out}),gt=_curry2(_gt),gte=_curry2(function(a,b){return a>=b}),has=_curry2(_has),hasIn=_curry2(function(prop,obj){return prop in obj}),identical=_curry2(function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}),identity=_curry1(_identity),inc=add(1),insertAll=_curry3(function(idx,elts,list){return idx=idx<list.length&&idx>=0?idx:list.length,_concat(_concat(_slice(list,0,idx),elts),_slice(list,idx))}),is=_curry2(function(Ctor,val){return null!=val&&val.constructor===Ctor||val instanceof Ctor}),isArrayLike=_curry1(function(x){return _isArray(x)?!0:x?"object"!=typeof x?!1:x instanceof String?!1:1===x.nodeType?!!x.length:0===x.length?!0:x.length>0?x.hasOwnProperty(0)&&x.hasOwnProperty(x.length-1):!1:!1}),isEmpty=_curry1(function(list){return 0===Object(list).length}),isNil=_curry1(function(x){return null==x}),keys=function(){var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],contains=function(list,item){for(var idx=0;idx<list.length;){if(list[idx]===item)return!0;idx+=1}return!1};return _curry1("function"==typeof Object.keys?function(obj){return Object(obj)!==obj?[]:Object.keys(obj)}:function(obj){if(Object(obj)!==obj)return[];var prop,nIdx,ks=[];for(prop in obj)_has(prop,obj)&&(ks[ks.length]=prop);if(hasEnumBug)for(nIdx=nonEnumerableProps.length-1;nIdx>=0;)prop=nonEnumerableProps[nIdx],_has(prop,obj)&&!contains(ks,prop)&&(ks[ks.length]=prop),nIdx-=1;return ks})}(),keysIn=_curry1(function(obj){var prop,ks=[];for(prop in obj)ks[ks.length]=prop;return ks}),length=_curry1(function(list){return null!=list&&is(Number,list.length)?list.length:NaN}),lens=_curry2(function(get,set){var lns=function(a){return get(a)};return lns.set=_curry2(set),lns.map=_curry2(function(fn,a){return set(fn(get(a)),a)}),lns}),lensOn=_curry3(function(get,set,obj){var lns=function(){return get(obj)};return lns.set=set,lns.map=function(fn){return set(fn(get(obj)))},lns}),lt=_curry2(_lt),lte=_curry2(function(a,b){return b>=a}),mapAccum=_curry3(function(fn,acc,list){for(var idx=0,len=list.length,result=[],tuple=[acc];len>idx;)tuple=fn(tuple[0],list[idx]),result[idx]=tuple[1],idx+=1;return[tuple[0],result]}),mapAccumRight=_curry3(function(fn,acc,list){for(var idx=list.length-1,result=[],tuple=[acc];idx>=0;)tuple=fn(tuple[0],list[idx]),result[idx]=tuple[1],idx-=1;return[tuple[0],result]}),mapIndexed=_curry2(function(fn,list){for(var idx=0,len=list.length,result=[];len>idx;)result[idx]=fn(list[idx],idx,list),idx+=1;return result}),mathMod=_curry2(function(m,p){return _isInteger(m)?!_isInteger(p)||1>p?NaN:(m%p+p)%p:NaN}),maxBy=_curry2(_createMaxMinBy(_gt)),minBy=_curry2(_createMaxMinBy(_lt)),modulo=_curry2(function(a,b){return a%b}),multiply=_curry2(_multiply),nAry=_curry2(function(n,fn){switch(n){case 0:return function(){return fn.call(this)};case 1:return function(a0){return fn.call(this,a0)};case 2:return function(a0,a1){return fn.call(this,a0,a1)};case 3:return function(a0,a1,a2){return fn.call(this,a0,a1,a2)};case 4:return function(a0,a1,a2,a3){return fn.call(this,a0,a1,a2,a3)};case 5:return function(a0,a1,a2,a3,a4){return fn.call(this,a0,a1,a2,a3,a4)};case 6:return function(a0,a1,a2,a3,a4,a5){return fn.call(this,a0,a1,a2,a3,a4,a5)};case 7:return function(a0,a1,a2,a3,a4,a5,a6){return fn.call(this,a0,a1,a2,a3,a4,a5,a6)};case 8:return function(a0,a1,a2,a3,a4,a5,a6,a7){return fn.call(this,a0,a1,a2,a3,a4,a5,a6,a7)};case 9:return function(a0,a1,a2,a3,a4,a5,a6,a7,a8){return fn.call(this,a0,a1,a2,a3,a4,a5,a6,a7,a8)};case 10:return function(a0,a1,a2,a3,a4,a5,a6,a7,a8,a9){return fn.call(this,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),negate=_curry1(function(n){return-n}),not=_curry1(function(a){return!a}),nth=_curry2(_nth),nthArg=_curry1(function(n){return function(){return _nth(n,arguments)}}),nthChar=_curry2(function(n,str){return str.charAt(0>n?str.length+n:n)}),nthCharCode=_curry2(function(n,str){return str.charCodeAt(0>n?str.length+n:n)}),of=_curry1(function(x){return[x]}),once=_curry1(function(fn){var result,called=!1;return function(){return called?result:(called=!0,
result=fn.apply(this,arguments))}}),path=_curry2(_path),pick=_curry2(function(names,obj){for(var result={},idx=0;idx<names.length;)names[idx]in obj&&(result[names[idx]]=obj[names[idx]]),idx+=1;return result}),pickAll=_curry2(function(names,obj){for(var result={},idx=0,len=names.length;len>idx;){var name=names[idx];result[name]=obj[name],idx+=1}return result}),pickBy=_curry2(function(test,obj){var result={};for(var prop in obj)test(obj[prop],prop,obj)&&(result[prop]=obj[prop]);return result}),prepend=_curry2(_prepend),prop=_curry2(function(p,obj){return obj[p]}),propOr=_curry3(function(val,p,obj){return null!=obj&&_has(p,obj)?obj[p]:val}),props=_curry2(function(ps,obj){for(var len=ps.length,out=[],idx=0;len>idx;)out[idx]=obj[ps[idx]],idx+=1;return out}),range=_curry2(function(from,to){for(var result=[],n=from;to>n;)result[result.length]=n,n+=1;return result}),reduceIndexed=_curry3(function(fn,acc,list){for(var idx=0,len=list.length;len>idx;)acc=fn(acc,list[idx],idx,list),idx+=1;return acc}),reduceRight=_curry3(function(fn,acc,list){for(var idx=list.length-1;idx>=0;)acc=fn(acc,list[idx]),idx-=1;return acc}),reduceRightIndexed=_curry3(function(fn,acc,list){for(var idx=list.length-1;idx>=0;)acc=fn(acc,list[idx],idx,list),idx-=1;return acc}),reduced=_curry1(_reduced),rejectIndexed=_curry2(function(fn,list){return _filterIndexed(_complement(fn),list)}),remove=_curry3(function(start,count,list){return _concat(_slice(list,0,Math.min(start,list.length)),_slice(list,Math.min(list.length,start+count)))}),replace=_curry3(function(regex,replacement,str){return str.replace(regex,replacement)}),reverse=_curry1(function(list){return _slice(list).reverse()}),scan=_curry3(function(fn,acc,list){for(var idx=0,len=list.length,result=[acc];len>idx;)acc=fn(acc,list[idx]),result[idx+1]=acc,idx+=1;return result}),sort=_curry2(function(comparator,list){return _slice(list).sort(comparator)}),sortBy=_curry2(function(fn,list){return _slice(list).sort(function(a,b){var aa=fn(a),bb=fn(b);return bb>aa?-1:aa>bb?1:0})}),strIndexOf=_curry2(function(c,str){return str.indexOf(c)}),strLastIndexOf=_curry2(function(c,str){return str.lastIndexOf(c)}),subtract=_curry2(function(a,b){return a-b}),tap=_curry2(function(fn,x){return fn(x),x}),test=_curry2(function(pattern,str){return _cloneRegExp(pattern).test(str)}),times=_curry2(function(fn,n){for(var len=Number(n),list=new Array(len),idx=0;len>idx;)list[idx]=fn(idx),idx+=1;return list}),toPairs=_curry1(function(obj){var pairs=[];for(var prop in obj)_has(prop,obj)&&(pairs[pairs.length]=[prop,obj[prop]]);return pairs}),toPairsIn=_curry1(function(obj){var pairs=[];for(var prop in obj)pairs[pairs.length]=[prop,obj[prop]];return pairs}),trim=function(){var ws="	\n\f\r   ᠎             　\u2028\u2029\ufeff",zeroWidth="​",hasProtoTrim="function"==typeof String.prototype.trim;return _curry1(hasProtoTrim&&!ws.trim()&&zeroWidth.trim()?function(str){return str.trim()}:function(str){var beginRx=new RegExp("^["+ws+"]["+ws+"]*"),endRx=new RegExp("["+ws+"]["+ws+"]*$");return str.replace(beginRx,"").replace(endRx,"")})}(),type=_curry1(function(val){return null===val?"Null":void 0===val?"Undefined":Object.prototype.toString.call(val).slice(8,-1)}),unapply=_curry1(function(fn){return function(){return fn(_slice(arguments))}}),unary=_curry1(function(fn){return nAry(1,fn)}),unfold=_curry2(function(fn,seed){for(var pair=fn(seed),result=[];pair&&pair.length;)result[result.length]=pair[0],pair=fn(pair[1]);return result}),uniqWith=_curry2(function(pred,list){for(var item,idx=0,len=list.length,result=[];len>idx;)item=list[idx],_containsWith(pred,item,result)||(result[result.length]=item),idx+=1;return result}),update=_curry3(function(idx,x,list){return adjust(always(x),idx,list)}),values=_curry1(function(obj){for(var props=keys(obj),len=props.length,vals=[],idx=0;len>idx;)vals[idx]=obj[props[idx]],idx+=1;return vals}),valuesIn=_curry1(function(obj){var prop,vs=[];for(prop in obj)vs[vs.length]=obj[prop];return vs}),where=_curry2(function(spec,testObj){for(var prop in spec)if(_has(prop,spec)&&!spec[prop](testObj[prop]))return!1;return!0}),xprod=_curry2(function(a,b){for(var j,idx=0,ilen=a.length,jlen=b.length,result=[];ilen>idx;){for(j=0;jlen>j;)result[result.length]=[a[idx],b[j]],j+=1;idx+=1}return result}),zip=_curry2(function(a,b){for(var rv=[],idx=0,len=Math.min(a.length,b.length);len>idx;)rv[idx]=[a[idx],b[idx]],idx+=1;return rv}),zipObj=_curry2(function(keys,values){for(var idx=0,len=keys.length,out={};len>idx;)out[keys[idx]]=values[idx],idx+=1;return out}),zipWith=_curry3(function(fn,a,b){for(var rv=[],idx=0,len=Math.min(a.length,b.length);len>idx;)rv[idx]=fn(a[idx],b[idx]),idx+=1;return rv}),F=always(!1),T=always(!0),_append=function(el,list){return _concat(list,[el])},_assocPath=function _assocPath(path,val,obj){switch(path.length){case 0:return obj;case 1:return _assoc(path[0],val,obj);default:return _assoc(path[0],_assocPath(_slice(path,1),val,Object(obj[path[0]])),obj)}},_baseCopy=function _baseCopy(value,refFrom,refTo){var copy=function(copiedValue){for(var len=refFrom.length,idx=0;len>idx;){if(value===refFrom[idx])return refTo[idx];idx+=1}refFrom[idx+1]=value,refTo[idx+1]=copiedValue;for(var key in value)copiedValue[key]=_baseCopy(value[key],refFrom,refTo);return copiedValue};switch(type(value)){case"Object":return copy({});case"Array":return copy([]);case"Date":return new Date(value);case"RegExp":return _cloneRegExp(value);default:return value}},_checkForMethod=function(methodname,fn){return function(){var length=arguments.length;if(0===length)return fn();var obj=arguments[length-1];return _isArray(obj)||"function"!=typeof obj[methodname]?fn.apply(this,arguments):obj[methodname].apply(obj,_slice(arguments,0,length-1))}},_composeL=function(innerLens,outerLens){return lens(_compose(innerLens,outerLens),function(x,source){var newInnerValue=innerLens.set(x,outerLens(source));return outerLens.set(newInnerValue,source)})},_composeP=function(f,g){return function(){var context=this,value=g.apply(this,arguments);return _isThenable(value)?value.then(function(result){return f.call(context,result)}):f.call(this,value)}},_createComposer=function(composeFunction){return function(){for(var fn=arguments[arguments.length-1],length=fn.length,idx=arguments.length-2;idx>=0;)fn=composeFunction(arguments[idx],fn),idx-=1;return arity(length,fn)}},_createMaxMin=function(comparator,initialVal){return _curry1(function(list){for(var computed,idx=0,winner=initialVal;idx<list.length;)computed=+list[idx],comparator(computed,winner)&&(winner=computed),idx+=1;return winner})},_createPartialApplicator=function(concat){return function(fn){var args=_slice(arguments,1);return arity(Math.max(0,fn.length-args.length),function(){return fn.apply(this,concat(args,arguments))})}},_curryN=function _curryN(length,received,fn){return function(){for(var combined=[],argsIdx=0,left=length,combinedIdx=0;combinedIdx<received.length||argsIdx<arguments.length;){var result;combinedIdx<received.length&&(null==received[combinedIdx]||received[combinedIdx]["@@functional/placeholder"]!==!0||argsIdx>=arguments.length)?result=received[combinedIdx]:(result=arguments[argsIdx],argsIdx+=1),combined[combinedIdx]=result,(null==result||result["@@functional/placeholder"]!==!0)&&(left-=1),combinedIdx+=1}return 0>=left?fn.apply(this,combined):arity(left,_curryN(length,combined,fn))}},_dispatchable=function(methodname,xf,fn){return function(){var length=arguments.length;if(0===length)return fn();var obj=arguments[length-1];if(!_isArray(obj)){var args=_slice(arguments,0,length-1);if("function"==typeof obj[methodname])return obj[methodname].apply(obj,args);if(_isTransformer(obj)){var transducer=xf.apply(null,args);return transducer(obj)}}return fn.apply(this,arguments)}},_dissocPath=function _dissocPath(path,obj){switch(path.length){case 0:return obj;case 1:return _dissoc(path[0],obj);default:var head=path[0],tail=_slice(path,1);return null==obj[head]?obj:_assoc(head,_dissocPath(tail,obj[head]),obj)}},_equals=function _eqDeep(a,b,stackA,stackB){var typeA=type(a);if(typeA!==type(b))return!1;if("Boolean"===typeA||"Number"===typeA||"String"===typeA)return"object"==typeof a?"object"==typeof b&&identical(a.valueOf(),b.valueOf()):identical(a,b);if(identical(a,b))return!0;if("RegExp"===typeA)return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline&&a.sticky===b.sticky&&a.unicode===b.unicode;if(Object(a)===a){if("Date"===typeA&&a.getTime()!==b.getTime())return!1;var keysA=keys(a);if(keysA.length!==keys(b).length)return!1;for(var idx=stackA.length-1;idx>=0;){if(stackA[idx]===a)return stackB[idx]===b;idx-=1}for(stackA[stackA.length]=a,stackB[stackB.length]=b,idx=keysA.length-1;idx>=0;){var key=keysA[idx];if(!_has(key,b)||!_eqDeep(b[key],a[key],stackA,stackB))return!1;idx-=1}return stackA.pop(),stackB.pop(),!0}return!1},_extend=function(destination,other){for(var props=keys(other),idx=0,length=props.length;length>idx;)destination[props[idx]]=other[props[idx]],idx+=1;return destination},_hasMethod=function(methodName,obj){return null!=obj&&!_isArray(obj)&&"function"==typeof obj[methodName]},_makeFlat=function(recursive){return function flatt(list){for(var value,j,jlen,result=[],idx=0,ilen=list.length;ilen>idx;){if(isArrayLike(list[idx]))for(value=recursive?flatt(list[idx]):list[idx],j=0,jlen=value.length;jlen>j;)result[result.length]=value[j],j+=1;else result[result.length]=list[idx];idx+=1}return result}},_reduce=function(){function _arrayReduce(xf,acc,list){for(var idx=0,len=list.length;len>idx;){if(acc=xf["@@transducer/step"](acc,list[idx]),acc&&acc["@@transducer/reduced"]){acc=acc["@@transducer/value"];break}idx+=1}return xf["@@transducer/result"](acc)}function _iterableReduce(xf,acc,iter){for(var step=iter.next();!step.done;){if(acc=xf["@@transducer/step"](acc,step.value),acc&&acc["@@transducer/reduced"]){acc=acc["@@transducer/value"];break}step=iter.next()}return xf["@@transducer/result"](acc)}function _methodReduce(xf,acc,obj){return xf["@@transducer/result"](obj.reduce(bind(xf["@@transducer/step"],xf),acc))}var symIterator="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(fn,acc,list){if("function"==typeof fn&&(fn=_xwrap(fn)),isArrayLike(list))return _arrayReduce(fn,acc,list);if("function"==typeof list.reduce)return _methodReduce(fn,acc,list);if(null!=list[symIterator])return _iterableReduce(fn,acc,list[symIterator]());if("function"==typeof list.next)return _iterableReduce(fn,acc,list);throw new TypeError("reduce: list must be array or iterable")}}(),_xall=function(){function XAll(f,xf){this.xf=xf,this.f=f,this.all=!0}return XAll.prototype["@@transducer/init"]=_xfBase.init,XAll.prototype["@@transducer/result"]=function(result){return this.all&&(result=this.xf["@@transducer/step"](result,!0)),this.xf["@@transducer/result"](result)},XAll.prototype["@@transducer/step"]=function(result,input){return this.f(input)||(this.all=!1,result=_reduced(this.xf["@@transducer/step"](result,!1))),result},_curry2(function(f,xf){return new XAll(f,xf)})}(),_xany=function(){function XAny(f,xf){this.xf=xf,this.f=f,this.any=!1}return XAny.prototype["@@transducer/init"]=_xfBase.init,XAny.prototype["@@transducer/result"]=function(result){return this.any||(result=this.xf["@@transducer/step"](result,!1)),this.xf["@@transducer/result"](result)},XAny.prototype["@@transducer/step"]=function(result,input){return this.f(input)&&(this.any=!0,result=_reduced(this.xf["@@transducer/step"](result,!0))),result},_curry2(function(f,xf){return new XAny(f,xf)})}(),_xdrop=function(){function XDrop(n,xf){this.xf=xf,this.n=n}return XDrop.prototype["@@transducer/init"]=_xfBase.init,XDrop.prototype["@@transducer/result"]=_xfBase.result,XDrop.prototype.step=function(result,input){return this.n>0?(this.n-=1,result):this.xf["@@transducer/step"](result,input)},_curry2(function(n,xf){return new XDrop(n,xf)})}(),_xdropWhile=function(){function XDropWhile(f,xf){this.xf=xf,this.f=f}return XDropWhile.prototype["@@transducer/init"]=_xfBase.init,XDropWhile.prototype["@@transducer/result"]=_xfBase.result,XDropWhile.prototype["@@transducer/step"]=function(result,input){if(this.f){if(this.f(input))return result;this.f=null}return this.xf["@@transducer/step"](result,input)},_curry2(function(f,xf){return new XDropWhile(f,xf)})}(),_xgroupBy=function(){function XGroupBy(f,xf){this.xf=xf,this.f=f,this.inputs={}}return XGroupBy.prototype["@@transducer/init"]=_xfBase.init,XGroupBy.prototype["@@transducer/result"]=function(result){var key;for(key in this.inputs)if(_has(key,this.inputs)&&(result=this.xf["@@transducer/step"](result,this.inputs[key]),result["@@transducer/reduced"])){result=result["@@transducer/value"];break}return this.xf["@@transducer/result"](result)},XGroupBy.prototype["@@transducer/step"]=function(result,input){var key=this.f(input);return this.inputs[key]=this.inputs[key]||[key,[]],this.inputs[key][1]=_append(input,this.inputs[key][1]),result},_curry2(function(f,xf){return new XGroupBy(f,xf)})}(),all=_curry2(_dispatchable("all",_xall,_all)),and=_curry2(function(a,b){return _hasMethod("and",a)?a.and(b):a&&b}),any=_curry2(_dispatchable("any",_xany,_any)),append=_curry2(_append),assocPath=_curry3(_assocPath),binary=_curry1(function(fn){return nAry(2,fn)}),clone=_curry1(function(value){return _baseCopy(value,[],[])}),compose=_createComposer(_compose),composeL=function(){for(var fn=arguments[arguments.length-1],idx=arguments.length-2;idx>=0;)fn=_composeL(arguments[idx],fn),idx-=1;return fn},composeP=_createComposer(_composeP),concat=_curry2(function(set1,set2){if(_isArray(set2))return _concat(set1,set2);if(_hasMethod("concat",set1))return set1.concat(set2);throw new TypeError("can't concat "+typeof set1)}),curryN=_curry2(function(length,fn){return arity(length,_curryN(length,[],fn))}),dissocPath=_curry2(_dissocPath),dropWhile=_curry2(_dispatchable("dropWhile",_xdropWhile,function(pred,list){for(var idx=0,len=list.length;len>idx&&pred(list[idx]);)idx+=1;return _slice(list,idx)})),empty=_curry1(function(x){return _hasMethod("empty",x)?x.empty():[]}),equals=_curry2(function(a,b){return _hasMethod("equals",a)?a.equals(b):_hasMethod("equals",b)?b.equals(a):_equals(a,b,[],[])}),filter=_curry2(_dispatchable("filter",_xfilter,_filter)),find=_curry2(_dispatchable("find",_xfind,function(fn,list){for(var idx=0,len=list.length;len>idx;){if(fn(list[idx]))return list[idx];idx+=1}})),findIndex=_curry2(_dispatchable("findIndex",_xfindIndex,function(fn,list){for(var idx=0,len=list.length;len>idx;){if(fn(list[idx]))return idx;idx+=1}return-1})),findLast=_curry2(_dispatchable("findLast",_xfindLast,function(fn,list){for(var idx=list.length-1;idx>=0;){if(fn(list[idx]))return list[idx];idx-=1}})),findLastIndex=_curry2(_dispatchable("findLastIndex",_xfindLastIndex,function(fn,list){for(var idx=list.length-1;idx>=0;){if(fn(list[idx]))return idx;idx-=1}return-1})),flatten=_curry1(_makeFlat(!0)),forEach=_curry2(function(fn,list){return _hasMethod("forEach",list)?list.forEach(fn):_forEach(fn,list)}),functions=_curry1(_functionsWith(keys)),functionsIn=_curry1(_functionsWith(keysIn)),groupBy=_curry2(_dispatchable("groupBy",_xgroupBy,function(fn,list){return _reduce(function(acc,elt){var key=fn(elt);return acc[key]=_append(elt,acc[key]||(acc[key]=[])),acc},{},list)})),head=nth(0),ifElse=_curry3(function(condition,onTrue,onFalse){return curryN(Math.max(condition.length,onTrue.length,onFalse.length),function(){return condition.apply(this,arguments)?onTrue.apply(this,arguments):onFalse.apply(this,arguments)})}),insert=_curry3(function(idx,elt,list){return idx=idx<list.length&&idx>=0?idx:list.length,_concat(_append(elt,_slice(list,0,idx)),_slice(list,idx))}),intersectionWith=_curry3(function(pred,list1,list2){for(var results=[],idx=0;idx<list1.length;)_containsWith(pred,list1[idx],list2)&&(results[results.length]=list1[idx]),idx+=1;return uniqWith(pred,results)}),intersperse=_curry2(_checkForMethod("intersperse",function(separator,list){for(var out=[],idx=0,length=list.length;length>idx;)idx===length-1?out.push(list[idx]):out.push(list[idx],separator),idx+=1;return out})),invert=_curry1(function(obj){for(var props=keys(obj),len=props.length,idx=0,out={};len>idx;){var key=props[idx],val=obj[key],list=_has(val,out)?out[val]:out[val]=[];list[list.length]=key,idx+=1}return out}),invertObj=_curry1(function(obj){for(var props=keys(obj),len=props.length,idx=0,out={};len>idx;){var key=props[idx];out[obj[key]]=key,idx+=1}return out}),invoker=_curry2(function(arity,method){return curryN(arity+1,function(){var target=arguments[arity];return target[method].apply(target,_slice(arguments,0,arity))})}),join=invoker(1,"join"),last=nth(-1),lensIndex=_curry1(function(n){return lens(nth(n),update(n))}),lensProp=_curry1(function(k){return lens(prop(k),assoc(k))}),map=_curry2(_dispatchable("map",_xmap,_map)),mapObj=_curry2(function(fn,obj){return _reduce(function(acc,key){return acc[key]=fn(obj[key]),acc},{},keys(obj))}),mapObjIndexed=_curry2(function(fn,obj){return _reduce(function(acc,key){return acc[key]=fn(obj[key],key,obj),acc},{},keys(obj))}),match=invoker(1,"match"),max=_createMaxMin(_gt,-(1/0)),merge=_curry2(function(a,b){return _extend(_extend({},a),b)}),min=_createMaxMin(_lt,1/0),none=_curry2(_complement(_dispatchable("any",_xany,_any))),or=_curry2(function(a,b){return _hasMethod("or",a)?a.or(b):a||b}),partition=_curry2(function(pred,list){return _reduce(function(acc,elt){var xs=acc[pred(elt)?0:1];return xs[xs.length]=elt,acc},[[],[]],list)}),pathEq=_curry3(function(path,val,obj){return equals(_path(path,obj),val)}),pipe=function(){return compose.apply(this,reverse(arguments))},pipeL=compose(apply(composeL),unapply(reverse)),pipeP=function(){return composeP.apply(this,reverse(arguments))},propEq=_curry3(function(name,val,obj){return equals(obj[name],val)}),reduce=_curry3(_reduce),reject=_curry2(function(fn,list){return filter(_complement(fn),list)}),repeat=_curry2(function(value,n){return times(always(value),n)}),slice=_curry3(_checkForMethod("slice",function(fromIndex,toIndex,xs){return Array.prototype.slice.call(xs,fromIndex,toIndex)})),split=invoker(1,"split"),substring=slice,substringFrom=substring(__,1/0),substringTo=substring(0),sum=reduce(_add,0),tail=_checkForMethod("tail",function(list){return _slice(list,1)}),take=_curry2(_dispatchable("take",_xtake,function(n,xs){return slice(0,0>n?1/0:n,xs)})),takeWhile=_curry2(_dispatchable("takeWhile",_xtakeWhile,function(fn,list){for(var idx=0,len=list.length;len>idx&&fn(list[idx]);)idx+=1;return _slice(list,0,idx)})),toLower=invoker(0,"toLowerCase"),toUpper=invoker(0,"toUpperCase"),transduce=curryN(4,function(xf,fn,acc,list){return _reduce(xf("function"==typeof fn?_xwrap(fn):fn),acc,list)}),uncurryN=_curry2(function(depth,fn){return curryN(depth,function(){for(var endIdx,currentDepth=1,value=fn,idx=0;depth>=currentDepth&&"function"==typeof value;)endIdx=currentDepth===depth?arguments.length:idx+value.length,value=value.apply(this,_slice(arguments,idx,endIdx)),currentDepth+=1,idx=endIdx;return value})}),unionWith=_curry3(function(pred,list1,list2){return uniqWith(pred,_concat(list1,list2))}),uniq=uniqWith(equals),unnest=_curry1(_makeFlat(!1)),whereEq=_curry2(function(spec,testObj){return where(mapObj(equals,spec),testObj)}),wrap=_curry2(function(fn,wrapper){return curryN(fn.length,function(){return wrapper.apply(this,_concat([fn],arguments))})}),_chain=_curry2(function(f,list){return unnest(map(f,list))}),_flatCat=function(){var preservingReduced=function(xf){return{"@@transducer/init":_xfBase.init,"@@transducer/result":function(result){return xf["@@transducer/result"](result)},"@@transducer/step":function(result,input){var ret=xf["@@transducer/step"](result,input);return ret["@@transducer/reduced"]?_forceReduced(ret):ret}}};return function(xf){var rxf=preservingReduced(xf);return{"@@transducer/init":_xfBase.init,"@@transducer/result":function(result){return rxf["@@transducer/result"](result)},"@@transducer/step":function(result,input){return isArrayLike(input)?_reduce(rxf,result,input):_reduce(rxf,result,[input])}}}}(),_indexOf=function(list,item,from){var idx=0,len=list.length;for("number"==typeof from&&(idx=0>from?Math.max(0,len+from):from);len>idx;){if(equals(list[idx],item))return idx;idx+=1}return-1},_lastIndexOf=function(list,item,from){var idx;for(idx="number"==typeof from?0>from?list.length+from:Math.min(list.length-1,from):list.length-1;idx>=0;){if(equals(list[idx],item))return idx;idx-=1}return-1},_pluck=function(p,list){return map(prop(p),list)},_predicateWrap=function(predPicker){return function(preds){var predIterator=function(){var args=arguments;return predPicker(function(predicate){return predicate.apply(null,args)},preds)};return arguments.length>1?predIterator.apply(null,_slice(arguments,1)):arity(max(_pluck("length",preds)),predIterator)}},_stepCat=function(){var _stepCatArray={"@@transducer/init":Array,"@@transducer/step":function(xs,x){return _concat(xs,[x])},"@@transducer/result":_identity},_stepCatString={"@@transducer/init":String,"@@transducer/step":_add,"@@transducer/result":_identity},_stepCatObject={"@@transducer/init":Object,"@@transducer/step":function(result,input){return merge(result,isArrayLike(input)?_createMapEntry(input[0],input[1]):input)},"@@transducer/result":_identity};return function(obj){if(_isTransformer(obj))return obj;if(isArrayLike(obj))return _stepCatArray;if("string"==typeof obj)return _stepCatString;if("object"==typeof obj)return _stepCatObject;throw new Error("Cannot create transformer for "+obj)}}(),_toString=function _toString(x,seen){var recur=function(y){var xs=seen.concat([x]);return _indexOf(xs,y)>=0?"<Circular>":_toString(y,xs)};switch(Object.prototype.toString.call(x)){case"[object Arguments]":return"(function() { return arguments; }("+_map(recur,x).join(", ")+"))";case"[object Array]":return"["+_map(recur,x).join(", ")+"]";case"[object Boolean]":return"object"==typeof x?"new Boolean("+recur(x.valueOf())+")":x.toString();case"[object Date]":return"new Date("+_quote(_toISOString(x))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof x?"new Number("+recur(x.valueOf())+")":1/x===-(1/0)?"-0":x.toString(10);case"[object String]":return"object"==typeof x?"new String("+recur(x.valueOf())+")":_quote(x);case"[object Undefined]":return"undefined";default:return"function"==typeof x.constructor&&"Object"!==x.constructor.name&&"function"==typeof x.toString&&"[object Object]"!==x.toString()?x.toString():"{"+_map(function(k){return _quote(k)+": "+recur(x[k])},keys(x).sort()).join(", ")+"}"}},_xchain=_curry2(function(f,xf){return map(f,_flatCat(xf))}),addIndex=_curry1(function(fn){return curryN(fn.length,function(){var idx=0,origFn=arguments[0],list=arguments[arguments.length-1],indexedFn=function(){var result=origFn.apply(this,_concat(arguments,[idx,list]));return idx+=1,result};return fn.apply(this,_prepend(indexedFn,_slice(arguments,1)))})}),ap=_curry2(function(fns,vs){return _hasMethod("ap",fns)?fns.ap(vs):_reduce(function(acc,fn){return _concat(acc,map(fn,vs))},[],fns)}),chain=_curry2(_dispatchable("chain",_xchain,_chain)),commuteMap=_curry3(function(fn,of,list){function consF(acc,ftor){return ap(map(append,fn(ftor)),acc)}return _reduce(consF,of([]),list)}),curry=_curry1(function(fn){return curryN(fn.length,fn)}),drop=_curry2(_dispatchable("drop",_xdrop,function(n,xs){return slice(Math.max(0,n),1/0,xs)})),dropRepeatsWith=_curry2(_dispatchable("dropRepeatsWith",_xdropRepeatsWith,function(pred,list){var result=[],idx=1,len=list.length;if(0!==len)for(result[0]=list[0];len>idx;)pred(last(result),list[idx])||(result[result.length]=list[idx]),idx+=1;return result})),eqDeep=equals,eqProps=_curry3(function(prop,obj1,obj2){return equals(obj1[prop],obj2[prop])}),flip=_curry1(function(fn){return curry(function(a,b){var args=_slice(arguments);return args[0]=b,args[1]=a,fn.apply(this,args)})}),indexOf=_curry2(function(target,xs){return _hasMethod("indexOf",xs)?xs.indexOf(target):_indexOf(xs,target)}),init=slice(0,-1),into=_curry3(function(acc,xf,list){return _isTransformer(acc)?_reduce(xf(acc),acc["@@transducer/init"](),list):_reduce(xf(_stepCat(acc)),acc,list)}),invoke=curry(function(methodName,args,obj){return obj[methodName].apply(obj,args)}),isSet=_curry1(function(list){for(var len=list.length,idx=0;len>idx;){if(_indexOf(list,list[idx],idx+1)>=0)return!1;idx+=1}return!0}),lastIndexOf=_curry2(function(target,xs){return _hasMethod("lastIndexOf",xs)?xs.lastIndexOf(target):_lastIndexOf(xs,target)}),liftN=_curry2(function(arity,fn){var lifted=curryN(arity,fn);return curryN(arity,function(){return _reduce(ap,map(lifted,arguments[0]),_slice(arguments,1))})}),mean=_curry1(function(list){return sum(list)/list.length}),median=_curry1(function(list){var len=list.length;if(0===len)return NaN;var width=2-len%2,idx=(len-width)/2;return mean(_slice(list).sort(function(a,b){return b>a?-1:a>b?1:0}).slice(idx,idx+width))}),mergeAll=_curry1(function(list){return reduce(merge,{},list)}),omit=_curry2(function(names,obj){var result={};for(var prop in obj)_indexOf(names,prop)<0&&(result[prop]=obj[prop]);return result}),partial=curry(_createPartialApplicator(_concat)),partialRight=curry(_createPartialApplicator(flip(_concat))),pluck=_curry2(_pluck),product=reduce(_multiply,1),toString=_curry1(function(val){return _toString(val,[])}),union=_curry2(compose(uniq,_concat)),useWith=curry(function(fn){var transformers=_slice(arguments,1),tlen=transformers.length;return curry(arity(tlen,function(){for(var args=[],idx=0;tlen>idx;)args[idx]=transformers[idx](arguments[idx]),idx+=1;return fn.apply(this,args.concat(_slice(arguments,tlen)))}))}),_contains=function(a,list){return _indexOf(list,a)>=0},allPass=curry(_predicateWrap(_all)),anyPass=curry(_predicateWrap(_any)),call=curry(function(fn){return fn.apply(this,_slice(arguments,1))}),commute=commuteMap(map(identity)),constructN=_curry2(function(n,Fn){if(n>10)throw new Error("Constructor with greater than ten arguments");return 0===n?function(){return new Fn}:curry(nAry(n,function($0,$1,$2,$3,$4,$5,$6,$7,$8,$9){switch(arguments.length){case 1:return new Fn($0);case 2:return new Fn($0,$1);case 3:return new Fn($0,$1,$2);case 4:return new Fn($0,$1,$2,$3);case 5:return new Fn($0,$1,$2,$3,$4);case 6:return new Fn($0,$1,$2,$3,$4,$5);case 7:return new Fn($0,$1,$2,$3,$4,$5,$6);case 8:return new Fn($0,$1,$2,$3,$4,$5,$6,$7);case 9:return new Fn($0,$1,$2,$3,$4,$5,$6,$7,$8);case 10:return new Fn($0,$1,$2,$3,$4,$5,$6,$7,$8,$9)}}))}),contains=_curry2(_contains),converge=curryN(3,function(after){var fns=_slice(arguments,1);return curryN(max(pluck("length",fns)),function(){var args=arguments,context=this;return after.apply(context,_map(function(fn){return fn.apply(context,args)},fns))})}),difference=_curry2(function(first,second){for(var out=[],idx=0,firstLen=first.length;firstLen>idx;)_contains(first[idx],second)||_contains(first[idx],out)||(out[out.length]=first[idx]),idx+=1;return out}),dropRepeats=_curry1(_dispatchable("dropRepeats",_xdropRepeatsWith(equals),dropRepeatsWith(equals))),intersection=_curry2(function(list1,list2){return uniq(_filter(flip(_contains)(list1),list2))}),lift=_curry1(function(fn){return liftN(fn.length,fn)}),memoize=_curry1(function(fn){var cache={};return function(){var key=toString(arguments);return _has(key,cache)||(cache[key]=fn.apply(this,arguments)),cache[key]}}),project=useWith(_map,pickAll,identity),construct=_curry1(function(Fn){return constructN(Fn.length,Fn)}),R={F:F,T:T,__:__,add:add,addIndex:addIndex,adjust:adjust,all:all,allPass:allPass,always:always,and:and,any:any,anyPass:anyPass,ap:ap,aperture:aperture,append:append,apply:apply,arity:arity,assoc:assoc,assocPath:assocPath,binary:binary,bind:bind,both:both,call:call,chain:chain,clone:clone,commute:commute,commuteMap:commuteMap,comparator:comparator,complement:complement,compose:compose,composeL:composeL,composeP:composeP,concat:concat,cond:cond,construct:construct,constructN:constructN,contains:contains,containsWith:containsWith,converge:converge,countBy:countBy,createMapEntry:createMapEntry,curry:curry,curryN:curryN,dec:dec,defaultTo:defaultTo,difference:difference,differenceWith:differenceWith,dissoc:dissoc,dissocPath:dissocPath,divide:divide,drop:drop,dropRepeats:dropRepeats,dropRepeatsWith:dropRepeatsWith,dropWhile:dropWhile,either:either,empty:empty,eq:eq,eqDeep:eqDeep,eqProps:eqProps,equals:equals,evolve:evolve,filter:filter,filterIndexed:filterIndexed,find:find,findIndex:findIndex,findLast:findLast,findLastIndex:findLastIndex,flatten:flatten,flip:flip,forEach:forEach,forEachIndexed:forEachIndexed,fromPairs:fromPairs,functions:functions,functionsIn:functionsIn,groupBy:groupBy,gt:gt,gte:gte,has:has,hasIn:hasIn,head:head,identical:identical,identity:identity,ifElse:ifElse,inc:inc,indexOf:indexOf,init:init,insert:insert,insertAll:insertAll,intersection:intersection,intersectionWith:intersectionWith,intersperse:intersperse,into:into,invert:invert,invertObj:invertObj,invoke:invoke,invoker:invoker,is:is,isArrayLike:isArrayLike,isEmpty:isEmpty,isNil:isNil,isSet:isSet,join:join,keys:keys,keysIn:keysIn,last:last,lastIndexOf:lastIndexOf,length:length,lens:lens,lensIndex:lensIndex,lensOn:lensOn,lensProp:lensProp,lift:lift,liftN:liftN,lt:lt,lte:lte,map:map,mapAccum:mapAccum,mapAccumRight:mapAccumRight,mapIndexed:mapIndexed,mapObj:mapObj,mapObjIndexed:mapObjIndexed,match:match,mathMod:mathMod,max:max,maxBy:maxBy,mean:mean,median:median,memoize:memoize,merge:merge,mergeAll:mergeAll,min:min,minBy:minBy,modulo:modulo,multiply:multiply,nAry:nAry,negate:negate,none:none,not:not,nth:nth,nthArg:nthArg,nthChar:nthChar,nthCharCode:nthCharCode,of:of,omit:omit,once:once,or:or,partial:partial,partialRight:partialRight,partition:partition,path:path,pathEq:pathEq,pick:pick,pickAll:pickAll,pickBy:pickBy,pipe:pipe,pipeL:pipeL,pipeP:pipeP,pluck:pluck,prepend:prepend,product:product,project:project,prop:prop,propEq:propEq,propOr:propOr,props:props,range:range,reduce:reduce,reduceIndexed:reduceIndexed,reduceRight:reduceRight,reduceRightIndexed:reduceRightIndexed,reduced:reduced,reject:reject,rejectIndexed:rejectIndexed,remove:remove,repeat:repeat,replace:replace,reverse:reverse,scan:scan,slice:slice,sort:sort,sortBy:sortBy,split:split,strIndexOf:strIndexOf,strLastIndexOf:strLastIndexOf,substring:substring,substringFrom:substringFrom,substringTo:substringTo,subtract:subtract,sum:sum,tail:tail,take:take,takeWhile:takeWhile,tap:tap,test:test,times:times,toLower:toLower,toPairs:toPairs,toPairsIn:toPairsIn,toString:toString,toUpper:toUpper,transduce:transduce,trim:trim,type:type,unapply:unapply,unary:unary,uncurryN:uncurryN,unfold:unfold,union:union,unionWith:unionWith,uniq:uniq,uniqWith:uniqWith,unnest:unnest,update:update,useWith:useWith,values:values,valuesIn:valuesIn,where:where,whereEq:whereEq,wrap:wrap,xprod:xprod,zip:zip,zipObj:zipObj,zipWith:zipWith};"object"==typeof exports?module.exports=R:"function"==typeof define&&define.amd?define(function(){return R}):this.R=R}).call(this)},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/app.config.js":[function(require,module,exports){"use strict";module.exports=["$urlRouterProvider","$locationProvider",function($urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode({enabled:!0})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/concepts.ctrl.js":[function(require,module,exports){"use strict";module.exports=function(ConceptService,ConceptsFBService,$scope,_){$scope.concepts={},ConceptService.get().then(function(concepts){$scope.concepts.concept_level_2=concepts.concept_level_2,$scope.concepts.concept_level_1=concepts.concept_level_1}),ConceptsFBService.get().then(function(level0Concepts){$scope.concepts.concept_level_0=_.map(level0Concepts,function(c){var lmsDetails=c.concept_level_0;return c.id=lmsDetails.id,c.uid=lmsDetails.uid,c.parent_id=lmsDetails.parent_id,c.level=lmsDetails.level,c})}),$scope.hasLevel=function(level){return $scope.levels&&_.isArray($scope.levels)?_.contains($scope.levels,level):!0;
}},module.exports.$inject=["ConceptService","ConceptsFBService","$scope","_"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.baseDirectives.Concept",["underscore",require("./../../../../services/v2/concepts.js").name,require("./../../../../services/lms/concept.js").name]).controller("ConceptsDirectiveController",require("./concepts.ctrl.js")).directive("conceptsSelector",function(){return{restrict:"E",templateUrl:"baseConcepts.html",controller:"ConceptsDirectiveController",scope:{model:"=",levels:"="}}}).filter("filterConcepts",["_",function(_){return function(concepts,parentId){return _.where(concepts,{parent_id:parentId})}}]).filter("filterFBConcepts",["_",function(_){return function(concepts,parentId){return _.reject(concepts,function(c){return c.concept_level_0?c.concept_level_0.parent_id!==parentId:!1})}}])},{"./../../../../services/lms/concept.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/concept.js","./../../../../services/v2/concepts.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/concepts.js","./concepts.ctrl.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/concepts.ctrl.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.baseDirectives.Standards",["underscore",require("./../../../../services/lms/standard_level.js").name,require("./../../../../services/lms/standard.js").name]).controller("StandardsDirectiveController",require("./standards.ctrl.js")).directive("standardsSelector",function(){return{restrict:"E",templateUrl:"baseStandards.html",controller:"StandardsDirectiveController",scope:{model:"="}}})},{"./../../../../services/lms/standard.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/standard.js","./../../../../services/lms/standard_level.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/standard_level.js","./standards.ctrl.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/standards.ctrl.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/standards.ctrl.js":[function(require,module,exports){"use strict";module.exports=function($scope,StandardService,StandardLevelService){StandardService.get().then(function(standards){$scope.standards=standards}),StandardLevelService.get().then(function(standardLevels){$scope.standardLevels=standardLevels})},module.exports.$inject=["$scope","StandardService","StandardLevelService"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/topicCategories/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.baseDirectives.TopicCategories",["underscore",require("./../../../../services/lms/topicCategory.js").name]).controller("TopicCategoriesDirectiveController",require("./topicCategories.ctrl.js")).directive("topicCategorySelector",function(){return{restrict:"E",templateUrl:"baseTopicCategories.html",controller:"TopicCategoriesDirectiveController",scope:{model:"="}}})},{"./../../../../services/lms/topicCategory.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/topicCategory.js","./topicCategories.ctrl.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/topicCategories/topicCategories.ctrl.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/topicCategories/topicCategories.ctrl.js":[function(require,module,exports){"use strict";module.exports=function($scope,TopicCategoryService){TopicCategoryService.get().then(function(tc){$scope.topicCategories=tc})},module.exports.$inject=["$scope","TopicCategoryService"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("cms",{parent:"app",url:"/cms",templateUrl:"cms.base.html",controller:"cms","abstract":!0,data:{authenticateUser:!0}}).state("cms-list",{parent:"cms",url:"",templateUrl:"cms.html",controller:"cms"}).state("cms-activities-base",{parent:"cms",url:"","abstract":!0,templateUrl:"activities.cms.base.html"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.controller.js":[function(require,module,exports){"use strict";module.exports=function(){}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms",[require("./concepts/module.js").name,require("./grammarActivities/module.js").name,require("./proofreaderActivities/module.js").name]).config(require("./cms.config.js")).controller("cms",require("./cms.controller.js"))},{"./cms.config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.config.js","./cms.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/cms.controller.js","./concepts/module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/module.js","./grammarActivities/module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/module.js","./proofreaderActivities/module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/module.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("cms-concepts",{parent:"cms-concepts-base",templateUrl:"concepts.cms.html",controller:"ConceptsCmsCtrl",url:"?/"}).state("cms-concepts-base",{parent:"cms",templateUrl:"concepts.cms.base.html",contoller:"ConceptsCmsCtrl",url:"/concepts","abstract":!0}).state("cms-concepts-create",{parent:"cms-concepts-base",templateUrl:"concepts.create.cms.html",controller:"ConceptsCreateCmsCtrl",url:"/create"}).state("cms-concepts-view",{parent:"cms-concepts-base",templateUrl:"concepts.view.cms.html",controller:"ConceptsViewCmsCtrl",url:"/:id"}).state("cms-concepts-edit",{parent:"cms-concepts-base",templateUrl:"concepts.edit.cms.html",controller:"ConceptsEditCmsCtrl",url:"/:id/edit"}).state("cms-concepts-questions-create",{parent:"cms-concepts-base",templateUrl:"concepts.questions.create.cms.html",controller:"ConceptsQuestionsCreateCmsCtrl",url:"/:conceptId/questions/create"}).state("cms-concepts-questions-edit",{parent:"cms-concepts-base",templateUrl:"concepts.questions.edit.cms.html",controller:"ConceptsQuestionsEditCmsCtrl",url:"/:conceptId/questions/:conceptQuestionId"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","ConceptsFBService","_",function($scope,ConceptsFBService,_){function addQuestionCountToConcepts(concepts){return _.map(concepts,function(c){return c.questionCount=_.keys(c.questions).length,c})}$scope.sortType="concept_level_2.name",$scope.sortReverse=!1,$scope.searchConcept="",ConceptsFBService.get().then(function(c){$scope.concepts=addQuestionCountToConcepts(c)}),$scope.getQuestionLength=function(questions){return _.keys(questions).length},$scope.getTotalConcepts=function(concepts){return _.keys(concepts).length},$scope.getTotalQuestions=function(){return $scope.concepts?_.reduce($scope.concepts,function(sum,c){return _.isNaN(sum)&&(sum=0),Number(sum)+Number(_.keys(c.questions).length)}):void 0}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/create.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","ConceptsFBService","ConceptService","$state",function($scope,ConceptsFBService,ConceptService,$state){$scope.concept={},$scope.processConceptForm=function(){ConceptService.post({concept:{name:$scope.concept.name,parent_uid:$scope.concept.concept_level_1.uid}}).then(function(res){$scope.concept.concept_level_0={name:res.data.concept.name,id:res.data.concept.id,uid:res.data.concept.uid,parent_id:res.data.concept.parent_id,level:0},ConceptsFBService.add($scope.concept).then(function(){$state.go("cms-concepts")},function(error){console.error(error)})})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptForm.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_",function($scope,_){if(_.isUndefined($scope.concept)||!_.isObject($scope.concept))throw new Error("Please define concept object in controller scope");if(_.isUndefined($scope.processConceptForm)||!_.isFunction($scope.processConceptForm))throw new Error("Please define processConceptForm function in controller scope");$scope.conceptTemplate=require("../models/concept.js")}]},{"../models/concept.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/concept.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptForm.directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",templateUrl:"conceptForm.html",controller:"ConceptFormCtrl"}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptQuestionForm.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_",function($scope,_){if(_.isUndefined($scope.conceptQuestion)||!_.isObject($scope.conceptQuestion))throw new Error("Please define conceptQuestion object in controller scope");if(_.isUndefined($scope.conceptQuestion.answers)||!_.isArray($scope.conceptQuestion.answers))throw new Error("Please define conceptQuestion.answers array in controller scope");if(_.isUndefined($scope.processConceptQuestionForm)||!_.isFunction($scope.processConceptQuestionForm))throw new Error("Please define processConceptQuestionForm function in controller scope");$scope.conceptQuestionTemplate=require("../models/conceptQuestion.js"),$scope.conceptQuestionAnswerTemplate=require("../models/conceptQuestionAnswer.js"),$scope.removeAnswerFromConceptQuestion=function(a){$scope.conceptQuestion.answers&&($scope.conceptQuestion.answers=_.without($scope.conceptQuestion.answers,a))},$scope.addAnotherAnswerToConceptQuestion=function(){$scope.conceptQuestion.answers.push({})}}]},{"../models/conceptQuestion.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/conceptQuestion.js","../models/conceptQuestionAnswer.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/conceptQuestionAnswer.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptQuestionForm.directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",templateUrl:"conceptQuestionForm.html",controller:"ConceptQuestionFormCtrl"}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.concepts.directives",["dynform",require("./../../base_directives/concepts/index.js").name,require("./../../base_directives/standards/index.js").name]).controller("ConceptFormCtrl",require("./conceptForm.controller.js")).directive("conceptForm",require("./conceptForm.directive.js")).controller("ConceptQuestionFormCtrl",require("./conceptQuestionForm.controller.js")).directive("conceptQuestionForm",require("./conceptQuestionForm.directive.js"))},{"./../../base_directives/concepts/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/index.js","./../../base_directives/standards/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/index.js","./conceptForm.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptForm.controller.js","./conceptForm.directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptForm.directive.js","./conceptQuestionForm.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptQuestionForm.controller.js","./conceptQuestionForm.directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/conceptQuestionForm.directive.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/edit.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$state","ConceptsFBService",function($scope,$state,ConceptsFBService){return null===$state.params.id||""===$state.params.id?void $state.go("cms-concepts"):($scope.concept={},ConceptsFBService.getById($state.params.id).then(function(c){$scope.concept=c}),void($scope.processConceptForm=function(){ConceptsFBService.update($scope.concept).then(function(){$state.go("cms-concepts-view",{id:$state.params.id})},function(error){console.error(error)})}))}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/concept.js":[function(require,module,exports){"use strict";module.exports=[{type:"text",label:"Name",model:"name",required:!0},{type:"textarea",label:"Rule Description",model:"ruleDescription",required:!0},{type:"text",label:"Rule Number",model:"ruleNumber",required:!0}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/conceptQuestion.js":[function(require,module,exports){"use strict";module.exports=[{type:"text",label:"Prompt",model:"prompt",required:!0},{type:"text",label:"Instructions",model:"instructions",required:!0},{type:"submit",label:"Submit Concept Question",model:"submit"}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/models/conceptQuestionAnswer.js":[function(require,module,exports){"use strict";module.exports=[{type:"text",label:"Answer",model:"text",required:!0}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.concepts",[require("./directives/index.js").name,require("./../../../services/v2/concepts.js").name]).config(require("./config.js")).controller("ConceptsCmsCtrl",require("./controller.js")).controller("ConceptsCreateCmsCtrl",require("./create.controller.js")).controller("ConceptsViewCmsCtrl",require("./view.controller.js")).controller("ConceptsEditCmsCtrl",require("./edit.controller.js")).controller("ConceptsQuestionsCreateCmsCtrl",require("./questions.create.controller.js")).controller("ConceptsQuestionsEditCmsCtrl",require("./questions.edit.controller.js"))},{"./../../../services/v2/concepts.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/concepts.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/config.js","./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/controller.js","./create.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/create.controller.js","./directives/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/directives/index.js","./edit.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/edit.controller.js","./questions.create.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/questions.create.controller.js","./questions.edit.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/questions.edit.controller.js","./view.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/view.controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/questions.create.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$state","ConceptsFBService",function($scope,$state,ConceptsFBService){return null===$state.params.conceptId||""===$state.params.conceptId?void $state.go("cms-concepts"):(ConceptsFBService.getById($state.params.conceptId).then(function(c){$scope.concept=c},function(error){console.error(error)}),$scope.conceptQuestion={},$scope.conceptQuestion.answers=[{}],void($scope.processConceptQuestionForm=function(){ConceptsFBService.addQuestionToConcept($scope.concept,$scope.conceptQuestion).then(function(){$state.go("cms-concepts-view",{id:$scope.concept.$id})},function(error){console.error(error)})}))}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/questions.edit.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$state","ConceptsFBService",function($scope,$state,ConceptsFBService){return null===$state.params.conceptId||""===$state.params.conceptId?void $state.go("cms-concepts"):($scope.conceptQuestion={},$scope.conceptQuestion.answers=[{}],ConceptsFBService.getById($state.params.conceptId).then(function(c){$scope.concept=c,ConceptsFBService.getQuestionForConcept($scope.concept,$state.params.conceptQuestionId).then(function(cq){$scope.conceptQuestion=cq,$scope.conceptQuestion.answers||($scope.conceptQuestion.answers=[{}])})},function(error){console.error(error)}),void($scope.processConceptQuestionForm=function(){ConceptsFBService.modifyQuestionForConcept($scope.concept,$scope.conceptQuestion).then(function(){$state.go("cms-concepts-view",{id:$scope.concept.$id})},function(error){console.error(error)})}))}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/concepts/view.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$state","ConceptsFBService",function($scope,$state,ConceptsFBService){return null===$state.params.id||""===$state.params.id?void $state.go("cms-concepts"):(ConceptsFBService.getById($state.params.id).then(function(c){$scope.concept=c}),void($scope.confirmDelete=function(id){var d=confirm("Are you absolutely sure you want to delete concept: "+id+"?");d&&ConceptsFBService.deleteById(id).then(function(){$state.go("cms-concepts")},function(err){throw err})}))}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("cms-grammar-activities-base",{parent:"cms-activities-base",templateUrl:"grammar.activities.base.cms.html",controller:"GrammarActivitiesCmsCtrl","abstract":!0,url:"/grammarActivities"}).state("cms-grammar-activities",{parent:"cms-grammar-activities-base",templateUrl:"grammar.activities.cms.html",controller:"GrammarActivitiesCmsCtrl",url:""}).state("cms-grammar-activities-create",{parent:"cms-grammar-activities-base",templateUrl:"grammar.activities.create.cms.html",controller:"GrammarActivitiesCreateCmsCtrl",url:"/create"}).state("cms-grammar-activities-edit",{parent:"cms-grammar-activities-base",templateUrl:"grammar.activities.edit.cms.html",controller:"GrammarActivitiesEditCmsCtrl",url:"/:id"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","GrammarActivity","_",function($scope,GrammarActivity,_){GrammarActivity.getAllFromFB().then(function(grammarActivities){$scope.grammarActivities=grammarActivities}),$scope.calculateNumberOfQuestions=function(ga){return _.map(ga.concepts,function(c){return String(c.quantity)+"("+String(c.ruleNumber)+")"}).join(", ")}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/create.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_","GrammarActivity","$state","Activity","grammarActivityClassificationUid",function($scope,_,GrammarActivity,$state,Activity,grammarActivityClassificationUid){function buildConcepts(set){return _.chain(set).map(function(s){return[s.concept_level_0.$id,{quantity:Number(s.quantity),ruleNumber:s.concept_level_0.ruleNumber}]}).object().value()}$scope.grammarActivity={},$scope.grammarActivity.concepts=[{}],$scope.processGrammarActivityForm=function(){var ga=$scope.grammarActivity,newGrammarActivity={title:ga.title,description:ga.description,concepts:buildConcepts(ga.concepts),standard:ga.standard,standard_level:ga.standard_level,topicCategory:ga.topicCategory};GrammarActivity.addToFB(newGrammarActivity).then(function(ref){var grammarActivityUid=ref.key(),lmsActivity=new Activity({uid:grammarActivityUid,name:newGrammarActivity.title,description:newGrammarActivity.description,topic_uid:newGrammarActivity.standard.uid,activity_classification_uid:grammarActivityClassificationUid});if(!lmsActivity.isValid())throw new Error(lmsActivity.errorMessages);return lmsActivity.create()}).then(function(){$state.go("cms-grammar-activities")})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/grammarActivityForm.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_","TopicCategoryService",function($scope,_,TopicCategoryService){$scope.concepts={},TopicCategoryService.get().then(function(topicCategories){$scope.topicCategories=topicCategories}),$scope.removeQuestionFromSet=function(qs){$scope.grammarActivity.concepts&&($scope.grammarActivity.concepts=_.without($scope.grammarActivity.concepts,qs))},$scope.addAnotherQuestionToSet=function(){$scope.grammarActivity.concepts.push({})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/grammarActivityForm.directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",templateUrl:"grammarActivityForm.html",controller:"GrammarActivityFormCtrl"}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.grammarActivities.directives",[require("../../../../services/lms/topicCategory.js").name,require("../../base_directives/concepts/index.js").name,require("../../base_directives/standards/index.js").name,require("../../base_directives/topicCategories/index.js").name]).controller("GrammarActivityFormCtrl",require("./grammarActivityForm.controller.js")).directive("grammarActivityForm",require("./grammarActivityForm.directive.js"))},{"../../../../services/lms/topicCategory.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/topicCategory.js","../../base_directives/concepts/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/index.js","../../base_directives/standards/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/index.js","../../base_directives/topicCategories/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/topicCategories/index.js","./grammarActivityForm.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/grammarActivityForm.controller.js","./grammarActivityForm.directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/grammarActivityForm.directive.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/edit.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","GrammarActivity","$state","_","ConceptsFBService","Activity","grammarActivityClassificationUid",function($scope,GrammarActivity,$state,_,ConceptsFBService,Activity,grammarActivityClassificationUid){function buildConcepts(set){return _.chain(set).map(function(s){return s.concept_level_0&&s.concept_level_0.$id?[s.concept_level_0.$id,{quantity:Number(s.quantity),ruleNumber:Number(s.concept_level_0.ruleNumber)}]:s.$id&&_.isNumber(s.quantity)&&_.isNumber(s.ruleNumber)?[s.$id,{quantity:Number(s.quantity),ruleNumber:Number(s.ruleNumber)}]:[s.$id,{}]}).object().value()}$scope.grammarActivity={},$scope.grammarActivity.concepts=[],GrammarActivity.getOneByIdFromFB($state.params.id).then(function(ga){$scope.grammarActivity=ga,$scope.grammarActivity.concepts=_.map($scope.grammarActivity.concepts,function(c,k){return c.$id=k,ConceptsFBService.getById(k).then(function(cfb){if(cfb){c.concept_level_2=cfb.concept_level_2,c.concept_level_1=cfb.concept_level_1;var cfb0=cfb.concept_level_0;cfb.uid=cfb0.uid,cfb.id=cfb0.id,cfb.parent_id=cfb0.parent_id,cfb.level=cfb0.level,c.concept_level_0=cfb}}),c})}),$scope.processGrammarActivityForm=function(){var ga=$scope.grammarActivity,id=$state.params.id,updatedGrammarActivity={title:ga.title,description:ga.description,concepts:buildConcepts(ga.concepts),standard:ga.standard,standard_level:ga.standard_level,topicCategory:ga.topicCategory};GrammarActivity.updateToFB(id,updatedGrammarActivity).then(function(){var grammarActivityUid=id,lmsActivity=new Activity({uid:grammarActivityUid,name:updatedGrammarActivity.title,description:updatedGrammarActivity.description,topic_uid:updatedGrammarActivity.standard.uid,activity_classification_uid:grammarActivityClassificationUid});if(!lmsActivity.isValid())throw new Error(lmsActivity.errorMessages);return lmsActivity.update()}).then(function(){$state.go("cms-grammar-activities")})["catch"](function(err){alert(err.toString())})},$scope.confirmDelete=function(id){var d=confirm("Are you absolutely sure you want to delete activity: "+id+"?");d&&GrammarActivity.deleteByIdFromFB(id).then(function(){$state.go("cms-grammar-activities")},function(err){throw err})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.grammarActivities",[require("./directives/index.js").name,require("./../../../services/lms/activity.js").name]).config(require("./config.js")).controller("GrammarActivitiesCmsCtrl",require("./controller.js")).controller("GrammarActivitiesCreateCmsCtrl",require("./create.controller.js")).controller("GrammarActivitiesEditCmsCtrl",require("./edit.controller.js"))},{"./../../../services/lms/activity.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/activity.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/config.js","./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/controller.js","./create.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/create.controller.js","./directives/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/directives/index.js","./edit.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/grammarActivities/edit.controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("cms-proofreader-activities-base",{parent:"cms-activities-base",templateUrl:"proofreader.activities.base.cms.html",controller:"ProofreaderActivitiesCmsCtrl","abstract":!0,url:"/proofreaderActivities"}).state("cms-proofreader-activities",{parent:"cms-proofreader-activities-base",templateUrl:"proofreader.activities.cms.html",controller:"ProofreaderActivitiesCmsCtrl",url:""}).state("cms-proofreader-activities-create",{parent:"cms-proofreader-activities-base",templateUrl:"proofreader.activities.create.cms.html",controller:"ProofreaderActivitiesCreateCmsCtrl",url:"/create"}).state("cms-proofreader-activities-edit",{parent:"cms-proofreader-activities-base",templateUrl:"proofreader.activities.edit.cms.html",controller:"ProofreaderActivitiesEditCmsCtrl",url:"/:id"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","ProofreaderActivity",function($scope,ProofreaderActivity){ProofreaderActivity.getAllFromFB().then(function(proofreaderActivities){$scope.proofreaderActivities=proofreaderActivities})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/create.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_","ProofreaderActivity","$state","Activity","proofreaderActivityClassificationUid",function($scope,_,ProofreaderActivity,$state,Activity,proofreaderActivityClassificationUid){$scope.proofreaderActivity={},$scope.processProofreaderActivityForm=function(){var newProofreaderActivity=$scope.proofreaderActivity;ProofreaderActivity.addToFB(newProofreaderActivity).then(function(ref){var proofreaderActivityUid=ref.key(),lmsActivity=new Activity({uid:proofreaderActivityUid,name:newProofreaderActivity.title,description:newProofreaderActivity.description,topic_uid:newProofreaderActivity.standard.uid,activity_classification_uid:proofreaderActivityClassificationUid});if(!lmsActivity.isValid())throw new Error(lmsActivity.errorMessages);return lmsActivity.create()}).then(function(){$state.go("cms-proofreader-activities")})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.proofreaderActivities.directives",[require("../../../../services/lms/topicCategory.js").name,require("../../base_directives/concepts/index.js").name,require("../../base_directives/standards/index.js").name,require("../../base_directives/topicCategories/index.js").name]).controller("ProofreaderActivityFormCtrl",require("./proofreaderActivityForm.controller.js")).directive("proofreaderActivityForm",require("./proofreaderActivityForm.directive.js"))},{"../../../../services/lms/topicCategory.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/topicCategory.js","../../base_directives/concepts/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/concepts/index.js","../../base_directives/standards/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/standards/index.js","../../base_directives/topicCategories/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/base_directives/topicCategories/index.js","./proofreaderActivityForm.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/proofreaderActivityForm.controller.js","./proofreaderActivityForm.directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/proofreaderActivityForm.directive.js"}],
"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/proofreaderActivityForm.controller.js":[function(require,module,exports){"use strict";module.exports=function(){}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/proofreaderActivityForm.directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",templateUrl:"proofreaderActivityForm.html",controller:"ProofreaderActivityFormCtrl"}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/edit.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","ProofreaderActivity","$state","Activity","proofreaderActivityClassificationUid","_",function($scope,ProofreaderActivity,$state,Activity,proofreaderActivityClassificationUid,_){$scope.proofreaderActivity={},ProofreaderActivity.getById($state.params.id).then(function(pa){$scope.proofreaderActivity=pa}),$scope.processProofreaderActivityForm=function(){var pa=$scope.proofreaderActivity;_.isUndefined(pa.underlineErrorsInProofreader)&&(pa.underlineErrorsInProofreader=!1);var updatedProofreaderActivity={title:pa.title,description:pa.description,standard:pa.standard,standard_level:pa.standard_level,topicCategory:pa.topicCategory,passage:pa.passage,underlineErrorsInProofreader:pa.underlineErrorsInProofreader},id=$state.params.id;ProofreaderActivity.updateToFB(id,updatedProofreaderActivity).then(function(){var proofreaderActivityUid=id,lmsActivity=new Activity({uid:proofreaderActivityUid,name:updatedProofreaderActivity.title,description:updatedProofreaderActivity.description,topic_uid:updatedProofreaderActivity.standard.uid,activity_classification_uid:proofreaderActivityClassificationUid});if(!lmsActivity.isValid())throw new Error(lmsActivity.errorMessages);return lmsActivity.update()}).then(function(){$state.go("cms-proofreader-activities")})["catch"](function(err){alert(err)})},$scope.confirmDelete=function(id){var d=confirm("Are you absolutely sure you want to delete activity: "+id+"?");d&&ProofreaderActivity.deleteByIdFromFB(id).then(function(){$state.go("cms-proofreader-activities")},function(err){throw err})}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.cms.proofreaderActivities",[require("./directives/index.js").name,require("./../../../services/lms/activity.js").name]).config(require("./config.js")).controller("ProofreaderActivitiesCmsCtrl",require("./controller.js")).controller("ProofreaderActivitiesCreateCmsCtrl",require("./create.controller.js")).controller("ProofreaderActivitiesEditCmsCtrl",require("./edit.controller.js"))},{"./../../../services/lms/activity.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/activity.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/config.js","./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/controller.js","./create.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/create.controller.js","./directives/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/directives/index.js","./edit.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/cms/proofreaderActivities/edit.controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/core/core.module.js":[function(require,module,exports){"use strict";require("ng-autofocus/autofocus"),module.exports=angular.module("quill-grammar.core",["ui.router","LocalStorageModule","autofocus","duScroll","angulartics","angulartics.mixpanel",require("./../../filters/index.js").name,require("../../../../.tmp/config").name,require("../../../../.tmp/templates").name,require("../../directives/index.js").name,require("../../services/auth").name]).config(["$analyticsProvider",function($analyticsProvider){$analyticsProvider.virtualPageviews(!1)}]).run(require("./core.run.js"))},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js","../../../../.tmp/templates":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/templates.js","../../directives/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/index.js","../../services/auth":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/index.js","./../../filters/index.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/filters/index.js","./core.run.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/core/core.run.js","ng-autofocus/autofocus":"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/ng-autofocus/autofocus.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/core/core.run.js":[function(require,module,exports){"use strict";module.exports=["QuillFirebaseAuthService","QuillOAuthService","$rootScope",function(QuillFirebaseAuthService,QuillOAuthService,$rootScope){angular.element(document.getElementsByClassName("loading-spinner")).css("display","none"),QuillFirebaseAuthService.authenticate(),$rootScope.$on("$stateChangeStart",function(event,state,params){if(state.data&&state.data.authenticateUser){var isAnonymous="anonymous"in params&&"true"===params.anonymous;isAnonymous||(QuillOAuthService.watchForExpiration(state,params),QuillOAuthService.isAuthenticated()||QuillOAuthService.authenticate(state,params))}})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("index",{parent:"app",url:"/",templateUrl:"index.html",controller:"index as ind"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","ConceptsFBService","_","Question",function($scope,ConceptsFBService,_,Question){ConceptsFBService.get().then(function(concepts){function questionFromConcept(concept){var randomQuestionData=_.sample(concept.questions);return new Question(randomQuestionData)}var i=0,currentConcept=concepts[i];$scope.showNextQuestion=!1,$scope.showPreviousQuestion=!1,$scope.currentQuestion=questionFromConcept(currentConcept),$scope.nextQuestion=function(){currentConcept=concepts[++i],$scope.currentQuestion=questionFromConcept(currentConcept)},$scope.previousQuestion=function(){currentConcept=concepts[--i],$scope.currentQuestion=questionFromConcept(currentConcept)},$scope.$watch("currentQuestion",function(){$scope.currentQuestion||$scope.finish(),$scope.showNextQuestion=i<concepts.length&&$scope.currentQuestion&&$scope.currentQuestion.correct,$scope.showPreviousQuestion=i>0},!0),$scope.finish=function(){console.log(i),console.log("Thanks for playing"),$scope.showNextQuestion=!1,$scope.showPreviousQuestion=!1}})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.index",[require("./../../directives/grammarElements/ruleQuestion/").name,"ui.router"]).config(require("./index.config.js")).controller("index",require("./index.controller.js"))},{"./../../directives/grammarElements/ruleQuestion/":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/index.js","./index.config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.config.js","./index.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/index/index.controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/layout/layout.config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("app",{url:"","abstract":!0,templateUrl:"layout.html"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/layout/layout.module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.layout",["ui.router"]).config(require("./layout.config.js"))},{"./layout.config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/layout/layout.config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("play-pf",{parent:"app",templateUrl:"proofreadings.play.html",controller:"ProofreadingPlayCtrl",url:"/play/pf?uid&student&anonymous",data:{authenticateUser:!0}})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$rootScope","$state","_","$location","$document","$timeout","$window","portholeProxy","ProofreaderActivity","PassageWord","ProofreadingPassage","ConceptResult",function($scope,$rootScope,$state,_,$location,$document,$timeout,$window,portholeProxy,ProofreaderActivity,PassageWord,ProofreadingPassage,ConceptResult){function showModalNotEnoughFound(){var needed=$scope.proofreadingPassage.getNumErrorsToSolve();$scope.modal={title:"Keep Trying!",message:"You must make at least "+needed+" edits.",buttonMessage:"Find Edits",buttonClick:function(){$scope.modal.show=!1},show:!0}}function generateLesson(ruleNumbers){$scope.goToLesson=function(){$state.go("play-sw-gen",{ids:ruleNumbers,passageId:$scope.id,student:$state.params.student})},$scope.hasLesson=!0}function showResults(){var proofreadingPassage=$scope.proofreadingPassage,results=$scope.proofreadingPassage.results;_.each(results,function(passageResult,i){var word=proofreadingPassage.words[passageResult.index];word.type=passageResult.type,word.resultIndex=i,word.passageIndex=passageResult.index,word.ruleNumber=passageResult.passageEntry.ruleNumber,word.totalResults=results.length,word.nextAction=$scope.nextAction(word,passageResult.index),submitWord(word)}),generateLesson(proofreadingPassage.getResultRuleNumbers()),$scope.focusResult(0,results[0].index),proofreadingPassage.sendResultsAnalytics(),proofreadingPassage.saveLocalResults($scope.id),proofreadingPassage.submitted=!0}function showResultsModal(){function createTitle(){return numErrorsFound===numErrorsToSolve?"Congratulations!":numErrorsFound>=numErrorsToSolve/2?"Good Work!":""}var numErrorsFound=$scope.proofreadingPassage.getNumCorrect(),numErrorsToSolve=$scope.proofreadingPassage.getNumErrors(),nf=numErrorsFound===numErrorsToSolve?"all "+String(numErrorsFound):String(numErrorsFound)+" of "+String(numErrorsToSolve),title=createTitle();$scope.modal={title:title,message:"You found "+nf+" errors.",buttonMessage:"Review Your Work",buttonClick:function(){$scope.modal.show=!1,showResults()},show:!0}}function submitWord(word){if("Not Necessary"!==word.type){var meta={answer:word.responseText,prompt:word.text,unchanged:word.text===word.responseText,index:word.passageIndex};"Correct"===word.type?meta.correct=1:meta.correct=0,submitConceptResult($scope.sessionId,word,meta)}}function submitConceptResult(sessionId,word,meta){var conceptUid=$scope.proofreadingPassage.getGrammaticalConceptData(word).concept_level_0.uid;sessionId&&ConceptResult.saveToFirebase(sessionId,conceptUid,meta)}function getNumResults(){return _.keys($scope.results).length}$scope.id=$state.params.uid,$state.params.student&&($scope.sessionId=$state.params.student),$rootScope.words=[],$scope.$watch(function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},function(hght){var windowProxy=new Porthole.WindowProxy(portholeProxy),postObj={action:"size_changed",height:hght};windowProxy.post(postObj)}),$scope.obscure=function(key){return btoa(key)},$scope.ubObscure=function(o){return atob(o)},ProofreaderActivity.getById($scope.id).then(function(activity){return $scope.proofreadingActivity=activity,ProofreadingPassage.fromPassageString(activity.passage)},function(err){$window.alert(err)}).then(function(proofreadingPassage){if($scope.proofreadingPassage=proofreadingPassage,$scope.proofreadingPassage){var i=0,l=$scope.proofreadingPassage.words.length;!function iterator(){for(var newWords=$scope.proofreadingPassage.words.slice(i,i+20),n=0;n<newWords.length;n++)$rootScope.words.push(newWords[n]);i+=20,l>i&&$timeout(iterator,150)}()}}),$scope.submitPassage=function(){var isFinished=$scope.proofreadingPassage.submit();$scope.results=$scope.proofreadingPassage.results,isFinished?showResultsModal():showModalNotEnoughFound(),$document.scrollTo(0,0)},$scope.nextAction=function(word,index){if(!$scope.results)return{};var allCorrect=$scope.proofreadingPassage.getNumCorrect()===$scope.proofreadingPassage.getNumErrors(),na={fn:null,title:""};return word.resultIndex+1>=getNumResults()?allCorrect?(na.fn=function(){$state.go("play-sw-gen",{ids:[],passageId:$scope.id,pfAllCorrect:!0,student:$state.params.student})},na.title="View Results"):(na.fn=function(){$scope.goToLesson()},na.title="Start My Activity"):(na.fn=function(){$scope.focusResult(word.resultIndex+1,index)},na.title="Next Edit"),na},$scope.focusResult=function(resultIndex,scrollIndex){var p=$scope.results[resultIndex-1],r=$scope.results[resultIndex];p&&($scope.proofreadingPassage.words[p.index].tooltip={});var scrollTo=r.index;if(scrollTo||(scrollTo=scrollIndex),r&&($scope.proofreadingPassage.words[r.index].tooltip={style:{visibility:"visible",opacity:1}}),String(scrollTo)){var scrollId="error-tooltip-scroll-"+String(scrollTo),elem=angular.element(document.getElementById(scrollId));if($(window).width()-$(elem[0]).offset().left<341){var margin="-"+(351-($(window).width()-$(elem[0]).offset().left))+"px";$scope.proofreadingPassage.words[r.index].tooltip={style:{visibility:"visible",opacity:1,"margin-left":margin}}}$document.scrollToElement(elem,50)}},$scope.needsUnderlining=function(p){return $scope.proofreadingActivity&&$scope.proofreadingActivity.underlineErrorsInProofreader?p.needsUnderlining():void 0}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/errorTooltip/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","_",function($scope,_){$scope.getErrorTooltipClass=function(index){var d=($scope.$parent.results,{"error-tooltip-reverse":!0});return d},$scope.getErrorTooltipTopClass=function(type){var obj={"top-panel":!0};return obj[type]=!0,obj},$scope.answerImageName=function(t){return t?_.map(t.split(" "),function(s){return s.toLowerCase()}).join("_"):void 0}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/errorTooltip/directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",templateUrl:"error-tooltip.html",controller:require("./controller.js")}}},{"./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/errorTooltip/controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.play.proofreadings",[require("./../../layout/layout.module.js").name,require("./../../../services/v2/proofreaderActivity.js").name,require("./../../../services/v2/passageWord.js").name,require("./../../../services/v2/proofreadingPassage.js").name,require("./../../../services/finalize.js").name,"LocalStorageModule","angulartics","angular.filter","ui.router","uuid4"]).config(require("./config.js")).directive("quillGrammarPassage",function(){return{restrict:"E",templateUrl:"passage.html"}}).directive("quillGrammarPfHeading",function(){return{restrict:"E",templateUrl:"pf-heading.html"}}).directive("quillGrammarPassageSubmitPanel",function(){return{restrict:"E",templateUrl:"pf-submit-panel.html"}}).directive("ngSize",require("./ngSize.js")).directive("proofreadingErrorTooltip",require("./errorTooltip/directive.js")).directive("passageWordInput",require("./passageWordInput/directive.js")).controller("ProofreadingPlayCtrl",require("./controller.js"))},{"./../../../services/finalize.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/finalize.js","./../../../services/v2/passageWord.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/passageWord.js","./../../../services/v2/proofreaderActivity.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/proofreaderActivity.js","./../../../services/v2/proofreadingPassage.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/proofreadingPassage.js","./../../layout/layout.module.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/layout/layout.module.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/config.js","./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/controller.js","./errorTooltip/directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/errorTooltip/directive.js","./ngSize.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/ngSize.js","./passageWordInput/directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/passageWordInput/directive.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/ngSize.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"A",link:function(scope,element,attrs){attrs.$observe("ngSize",function(){var size=0===Number(attrs.ngSize)?1:Number(attrs.ngSize);attrs.$set("size",size)})}}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/proofreadings/passageWordInput/directive.js":[function(require,module,exports){"use strict";module.exports=["$rootScope",function($rootScope){return{restrict:"E",templateUrl:"passage-word-input.html",link:function(scope,element){function hideBreakTags(){word.isBr()?element.css("display","none"):element.css("display","inline")}var word=scope.word,$input=element.find("input");$input.val(word.responseText),hideBreakTags(),element.on("focus",function(){this.addClass("focus")}),element.on("blur",function(){this.removeClass("focus")}),element.on("input",function(){var newValue=$input.val();word.responseText=newValue,scope.proofreadingPassage.onInputChange(word),$rootScope.$apply(),hideBreakTags()})}}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/config.js":[function(require,module,exports){"use strict";module.exports=["$stateProvider",function($stateProvider){$stateProvider.state("play-sw",{parent:"app",templateUrl:"sentences.play.html",controller:"SentencePlayCtrl",url:"/play/sw?uid&student&anonymous",data:{authenticateUser:!0}}).state("play-sw.results",{parent:"app",templateUrl:"sentences.results.html",controller:"ResultsController",url:"/play/sw/results?uid&student"}).state("play-sw-gen.results",{parent:"app",templateUrl:"sentences.results.html",controller:"ResultsController",url:"/play/sw/gen-results?passageId&student"}).state("play-sw-gen",{parent:"app",templateUrl:"sentences.play.html",controller:"SentencePlayCtrl",url:"/play/sw/g/:ids?student&passageId&pfAllCorrect"})}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/controller.js":[function(require,module,exports){"use strict";module.exports=["$scope","$state","_","SentenceLocalStorage","AnalyticsService","finalizeService","GrammarActivity","TypingSpeed",function($scope,$state,_,SentenceLocalStorage,AnalyticsService,finalizeService,GrammarActivity,TypingSpeed){$scope.number=0,$scope.previousConcepts=[],$state.params.student&&($scope.sessionId=$state.params.student),$scope.showConceptOverview=!1,$scope.$on("showModal",function(){$scope.showConceptOverview=!0}),$scope.$on("hideModal",function(){$scope.showConceptOverview=!1}),$scope.finish=function(){var passageId=$state.params.passageId;if(passageId){var tempResults=SentenceLocalStorage.saveResults(passageId);AnalyticsService.trackSentenceWritingSubmission(tempResults,passageId)}else passageId=null;return finalizeService($scope.sessionId,passageId).then(function(){$state.go(".results",{student:$state.params.student})})},$scope.nextQuestion=function(){var nextQuestion=$scope.questions[_.indexOf($scope.questions,$scope.currentQuestion)+1];return nextQuestion?($scope.number=$scope.number+1,$scope.currentQuestion=nextQuestion,$scope.currentConcept=$scope.grammarActivity.getConceptForQuestion($scope.currentQuestion),$scope.showConceptOverview=-1===_.indexOf($scope.previousConcepts,$scope.currentConcept),void $scope.previousConcepts.push($scope.currentConcept)):($scope.currentQuestion=null,$scope.currentConcept=null,$scope.number=$scope.number+1,void $scope.finish())},$scope.checkIfAllPfCorrect=function(){return $state.params.pfAllCorrect?$scope.finish():void 0},$scope.checkIfAllPfCorrect();var loadPromise;if($state.params.uid)loadPromise=GrammarActivity.getById($state.params.uid);else if($state.params.ids){var ids=_.map(_.uniq($state.params.ids.split(",")),Number);loadPromise=GrammarActivity.fromPassageResults(ids,$state.params.passageId)}else if(!$state.params.pfAllCorrect)throw new Error("Unable to load sentence writing. Please provide an activity ID or a set of rule IDs.");loadPromise&&loadPromise.then(function(grammarActivity){$scope.grammarActivity=grammarActivity,$scope.questions=grammarActivity.questions,$scope.currentQuestion=grammarActivity.questions[0],$scope.currentConcept=$scope.grammarActivity.getConceptForQuestion($scope.currentQuestion),$scope.showConceptOverview=-1===_.indexOf($scope.previousConcepts,$scope.currentConcept),$scope.previousConcepts.push($scope.currentConcept),$scope.showNextQuestion=!1,TypingSpeed.reset()}),$scope.formatDescription=function(des){if(des){des=des.replace(/\.(?!")/gi,".<br>"),des=des.replace(/\."/gi,'."<br>'),des=des.replace(/\?(?!")/gi,"?<br>"),des=des.replace(/\?"/gi,'?"<br>'),des=des.replace(/\!(?!")/gi,"!<br>"),des=des.replace(/\!"/gi,'!"<br>');var entries=des.split("<br>"),sentences=[];_.each(entries,function(e){e.length>4&&(e="<li>"+e+"</li>"),sentences.push(e)});var html="<ul>"+sentences.join("")+"</ul><hr/>";return html}}}]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/module.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.play.sentences",[require("./../../../services/analytics.js").name,require("./../../../services/localStorage.js").name,require("./../../../services/lms/conceptResult.js").name,require("./../../../services/v2/grammarActivity.js").name,"ui.router"]).config(require("./config.js")).directive("sentenceWritingConceptOverview",function(){return{restrict:"E",templateUrl:"sentences.concept-overview.html"}}).controller("ResultsController",require("./results.controller.js")).controller("SentencePlayCtrl",require("./controller.js"))},{"./../../../services/analytics.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/analytics.js","./../../../services/lms/conceptResult.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/conceptResult.js","./../../../services/localStorage.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/localStorage.js","./../../../services/v2/grammarActivity.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/grammarActivity.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/config.js","./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/controller.js","./results.controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/results.controller.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/app/play/sentences/results.controller.js":[function(require,module,exports){"use strict";module.exports=function($scope,$state,portholeProxy){var windowProxy=new Porthole.WindowProxy(portholeProxy),postObj={action:"activity_complete"};$state.params.student&&(postObj.id=$state.params.student),windowProxy.post(postObj)},module.exports.$inject=["$scope","$state","portholeProxy"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/controller.js":[function(require,module,exports){"use strict";module.exports=function($scope,_,$timeout,Question,TypingSpeed){function setMessage(msg){$scope.responseMessage=msg}function resetSubmitPanel(){setMessage(""),$scope.checkAnswerText=CheckButtonText.DEFAULT,$scope.questionClass="default",$scope.showCheckAnswerButton=!0,$timeout.cancel($scope.shortAnswerPromise)}function submitAnswer(){$scope.showCheckAnswerButton=!1,$scope.showNextQuestion=!0,$scope.submit()}var CheckButtonText={DEFAULT:"Check Work",TRY_AGAIN:"Recheck Work"};resetSubmitPanel(),$scope.resetWPM=function(){TypingSpeed.reset()},$scope.checkAnswer=function(){var rq=$scope.question;if(rq)switch(rq.checkAnswer(),setMessage(rq.getResponseMessage()),$timeout.cancel($scope.shortAnswerPromise),rq.status){case Question.ResponseStatus.NO_ANSWER:$scope.questionClass="try_again",$scope.checkAnswerText=CheckButtonText.TRY_AGAIN,$scope.shortAnswerPromise=$timeout(function(){setMessage(""),$scope.questionClass="default"},3e3);break;case Question.ResponseStatus.CORRECT:$scope.checkAnswerText=CheckButtonText.DEFAULT,$scope.questionClass="correct",submitAnswer();break;case Question.ResponseStatus.TYPING_ERROR_NON_STRICT:$scope.checkAnswerText=CheckButtonText.DEFAULT,$scope.questionClass="correct",submitAnswer();break;case Question.ResponseStatus.TOO_MANY_ATTEMPTS:$scope.questionClass="incorrect",$scope.checkAnswerText=CheckButtonText.DEFAULT,$scope.$emit("showModal"),submitAnswer();break;default:$scope.questionClass="try_again",$scope.checkAnswerText=CheckButtonText.TRY_AGAIN}},$scope.nextProblem=function(){$scope.showNextQuestion=!1,resetSubmitPanel(),$scope.$emit("hideModal"),$scope.next()},$scope.capturePasteEvent=function(event){event.preventDefault()},$scope.capturePressEnterEvent=function(){$scope.showNextQuestion?$scope.nextProblem():$scope.checkAnswer()}},module.exports.$inject=["$scope","_","$timeout","Question","TypingSpeed"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/directive.js":[function(require,module,exports){"use strict";module.exports=function(){return{restrict:"E",scope:{question:"=",next:"&",submit:"&"},templateUrl:"ruleQuestion.html",controller:"GrammarRuleQuestionCtrl"}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/filters.js":[function(require,module,exports){"use strict";module.exports.formatPrompt=function(){return function(input){return input}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.directives.ruleQuestion",[]).directive("grammarRuleQuestion",require("./directive.js")).filter("formatPrompt",require("./filters.js").formatPrompt).controller("GrammarRuleQuestionCtrl",require("./controller.js")).directive("ngEnter",require("./ngEnter.js"))},{"./controller.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/controller.js","./directive.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/directive.js","./filters.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/filters.js","./ngEnter.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/ngEnter.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/grammarElements/ruleQuestion/ngEnter.js":[function(require,module,exports){"use strict";module.exports=function(){return function(scope,element,attrs){element.bind("keypress",function(event){0===element[0].textLength&&scope.$eval(attrs.ngTimer),13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.directives",[]).directive("activityProgressBar",require("./progressBar.js").directive).controller("ProgressBarCtrl",require("./progressBar.js").controller)},{"./progressBar.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/progressBar.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/directives/progressBar.js":[function(require,module,exports){"use strict";module.exports.directive=function(){return{restrict:"E",scope:{title:"=",max:"=",current:"="},controller:"ProgressBarCtrl",templateUrl:"progress-bar.html"}},module.exports.controller=function($scope){function calculate(){$scope.progressString=String($scope.current)+" of "+String($scope.max),$scope.progressBarPercentage={width:String($scope.current/$scope.max*100)+"%"}}$scope.$watch("max",calculate),$scope.$watch("current",calculate),calculate()},module.exports.controller.$inject=["$scope"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/filters/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.filters",[]).filter("trustedHtml",require("./trustedHtml.js"))},{"./trustedHtml.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/filters/trustedHtml.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/filters/trustedHtml.js":[function(require,module,exports){"use strict";module.exports=function($sce){return function(input){return $sce.trustAsHtml(input)}},module.exports.$inject=["$sce"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/analytics.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.analytics",["angulartics"]).factory("AnalyticsService",["$q","$analytics",function($q,$analytics){function trackSentenceWritingSubmission(results,passageId){null===results&&(results={});var event="Sentence Writing Submitted",c=_.pluck(results,"correct"),attrs={uid:passageId,answers:_.pluck(results,"answer"),correct:c,conceptCategory:_.pluck(results,"conceptClass"),total:results.length,numCorrect:c.length};$analytics.eventTrack(event,attrs)}return{trackSentenceWritingSubmission:trackSentenceWritingSubmission}}]).factory("errorHttpInterceptor",["$q","$window",function($q,$window){return{responseError:function(rejection){if($window.atatus){var message="AJAX Error: "+rejection.config.method+" "+rejection.status+" "+rejection.config.url;atatus.notify(new Error(message),{config:rejection.config,status:rejection.status})}return $q.reject(rejection)}}}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("errorHttpInterceptor")}]).factory("errors",["$window","$log",function($window,$log){function report(error){
if($window.NREUM&&$window.NREUM.noticeError)try{$window.NREUM.noticeError(error)}catch(newRelicError){$log.error(newRelicError)}else $log.info("New Relic not available to record error.");$window.atatus?$window.atatus.notify(error):$log.info("Atatus not available to record error."),$log.error(error)}return{report:report}}]).factory("$exceptionHandler",["$window","errors",function($window,errors){return function(exception,cause){exception.stack&&(exception.stack=exception.stack.replace("new <anonymous>","<anonymous>")),$window.NREUM&&$window.NREUM.noticeError(exception),errors.report(exception)}}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/config.js":[function(require,module,exports){"use strict";module.exports=["$httpProvider","$stateProvider",function($httpProvider,$stateProvider){$httpProvider.interceptors.push(require("./oauth_interceptor.js")),$stateProvider.state("access_token",{url:"/access_token={accessToken}&token_type={tokenType}&expires_in={expiresIn}",template:"",controller:["$stateParams","AccessToken","$location","$state","Storage",function($stateParams,AccessToken,$location,$state,Storage){var hashStr=["access_token="+$stateParams.accessToken,"token_type="+$stateParams.tokenType,"expires_in="+$stateParams.expiresIn].join("&");AccessToken.setTokenFromString(hashStr);var postAuthenticationRedirect=Storage["delete"]("postAuthenticationRedirect");void 0===postAuthenticationRedirect?(parent.postMessage({action:"message"},"https://www.quill.org"),parent.postMessage({action:"message"},"http://localhost:3000")):$state.go(postAuthenticationRedirect.stateName,postAuthenticationRedirect.stateParams)}]})}]},{"./oauth_interceptor.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/oauth_interceptor.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/firebase.js":[function(require,module,exports){"use strict";var R=require("ramda");module.exports=function($firebaseAuth,firebaseApp,firebaseUrl,empiricalBaseURL,$http,localStorageService){function fetchToken(){return $http.post(firebaseTokenUrl).then(function(response){return response.data.token},function(response){console.log("an error occurred while fetching the firebase token: ",response)})}function storeToken(token){localStorageService.set("token",token)}function resetToken(){console.log("resetting the token"),storeToken(null)}function getCached(prop){return localStorageService.get(prop)}function firebaseAuthWithToken(token){return authObj.$authWithCustomToken(token).then(R.identity,handleErrors)}function authenticate(){offAuth&&(console.log("disabling auth callback"),offAuth()),resetToken();var ref=new Firebase(firebaseUrl);return authObj=$firebaseAuth(ref),offAuth=authObj.$onAuth(reAuthIfLoggedOut),fetchAndAuthWithToken(getCached("token"))}var authObj,offAuth,handleErrors,firebaseTokenUrl=empiricalBaseURL.replace(/\/?$/,"/firebase_tokens")+"?app="+firebaseApp,maybeFetchToken=R.ifElse(R.not,R.pipeP(fetchToken,R.tap(storeToken)),R.identity),fetchAndAuthWithToken=R.pipeP(maybeFetchToken,firebaseAuthWithToken),resetAndFetch=R.pipeP(resetToken,fetchAndAuthWithToken);handleErrors=R.cond([R.propEq("code","EXPIRED_TOKEN"),resetAndFetch],[R.propEq("code","INVALID_TOKEN"),resetAndFetch],[R.T,R.identity]);var reAuthIfLoggedOut=R.ifElse(R.not,fetchAndAuthWithToken,R.identity);return{authenticate:authenticate}},module.exports.$inject=["$firebaseAuth","firebaseApp","firebaseUrl","empiricalBaseURL","$http","localStorageService"]},{ramda:"/Users/donald/Programming/Javascript/Quill-Grammar/node_modules/ramda/dist/ramda.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/index.js":[function(require,module,exports){"use strict";module.exports=angular.module("services.auth",["firebase","oauth","ui.router","LocalStorageModule",require("../../../../.tmp/config").name]).config(require("./config.js")).factory("QuillFirebaseAuthService",require("./firebase.js")).factory("QuillOAuthService",require("./oauth.js"))},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js","./config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/config.js","./firebase.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/firebase.js","./oauth.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/oauth.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/oauth.js":[function(require,module,exports){"use strict";module.exports=function(empiricalBaseURL,oauthClientId,AccessToken,Endpoint,$state,Storage,$rootScope){function isAuthenticated(){return AccessToken.set(),!!AccessToken.get()}function authenticate(currentState,currentStateParams){Storage.set("postAuthenticationRedirect",{stateName:currentState.name,stateParams:currentStateParams});var redirectUri=$state.href("index",{},{absolute:!0}),endpointParams={authorizePath:"oauth/authorize",site:empiricalBaseURL.replace(/api\/v1\/?/,""),clientId:oauthClientId,redirectUri:redirectUri,responseType:"token"};Endpoint.redirect(endpointParams)}function expireToken(){AccessToken.destroy()}function watchForExpiration(currentState,currentStateParams){$rootScope.$on("oauth:expired",function(){authenticate(currentState,currentStateParams)})}return{isAuthenticated:isAuthenticated,authenticate:authenticate,expire:expireToken,watchForExpiration:watchForExpiration}},module.exports.$inject=["empiricalBaseURL","oauthClientId","AccessToken","Endpoint","$state","Storage","$rootScope"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/oauth_interceptor.js":[function(require,module,exports){"use strict";module.exports=function($q,AccessToken){return{request:function(config){AccessToken.set();var token=AccessToken.get();return token?config.headers.Authorization="Bearer "+token.access_token:delete config.headers.Authorization,config}}},module.exports.$inject=["$q","AccessToken"]},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/calculatePercentage.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.calculatePercentage",[]).factory("calculatePercentageService",function(){var calculatePercentage=function(conceptTagResults){var numCorrect,numTotal;conceptTagResults.length?(numCorrect=_.reduce(conceptTagResults,function(memo,ctr){return memo+ctr.metadata.correct},0),numTotal=conceptTagResults.length):(numCorrect=0,numTotal=0);var percentage;return percentage=numTotal?numCorrect/numTotal:0};return calculatePercentage})},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/crud.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.crud",["firebase","underscore",require("../../../.tmp/config").name]).factory("CrudService",["firebaseUrl","$firebaseObject","$firebaseArray","$q","_",function(firebaseUrl,$firebaseObject,$firebaseArray,$q,_){function crud(entity,properties,prefix){function getRef(){return baseRef}function sanitize(item){return properties&&_.isObject(item)?_.pick(item,function(value,key){return"$"===key[0]||_.contains(properties,key)}):item}function isValid(item){return _.has(item,"$value")?!_.isUndefined(item.$value)&&null!==item.$value:!0}function save(item){var d=$q.defer(),entityItem=sanitize(item);return baseRef.$push(entityItem).then(function(ref){d.resolve(ref.key())},function(error){d.reject(error)}),d.promise}function del(item){var d=$q.defer();if(!item||!item.$id)throw new Error("Item doesn't have an $id property");return baseRef.$remove(item.$id).then(function(ref){d.resolve(ref.key())},function(error){d.reject(error)}),d.promise}function all(){var d=$q.defer(),a=$firebaseArray(baseRef);return a.$loaded().then(function(){d.resolve(a)},function(error){d.reject(error)}),d.promise}function get(entityId){var d=$q.defer(),refUrl=baseRoute+"/"+entityId,entityRef=new Firebase(refUrl),entity=$firebaseObject(entityRef);return entity.$loaded().then(function(entityData){isValid(entityData)?d.resolve(entityData):(console.error("There was an error loading the entity at: ",refUrl,entityData),d.reject(new Error("Entity did not meet the properties requirement")))},function(error){d.reject(error)}),d.promise}function update(item){var d=$q.defer();return baseCollection.$loaded().then(function(){var index=item.$id;baseCollection[index]=sanitize(item),baseCollection.$save(index).then(function(ref){console.log(ref.key()),d.resolve(ref.key())},function(error){console.log(error),d.reject(error)})}),d.promise}function saveWithCustomId(item){if(!item.$id)throw new Error("No id provided");var id=String(item.$id);delete item.$id,item=sanitize(item);var fb=new Firebase(baseRoute+"/"+id);return fb.set(item)}if(!entity||""===entity)throw new Error("Firebase Entity MUST be defined");if(!properties)throw new Error("Please define the properties for your entity "+entity);"/"!==firebaseUrl[firebaseUrl.length-1]&&(firebaseUrl+="/");var baseUrl=String(firebaseUrl);prefix&&(baseUrl=baseUrl+prefix+"/");var baseRoute=baseUrl+entity,baseRef=new Firebase(baseRoute),baseCollection=$firebaseObject(baseRef);return{save:save,saveWithCustomId:saveWithCustomId,del:del,all:all,get:get,update:update,getRef:getRef}}return crud}])},{"../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/finalize.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.finalize",[require("../../../.tmp/config").name,require("./calculatePercentage.js").name,require("./localStorage.js").name,require("./lms/conceptResult.js").name,require("./lms/activitySession.js").name,require("./auth").name]).factory("finalizeService",["$q","ConceptResult","ActivitySession","calculatePercentageService","localStorageService","QuillOAuthService",function($q,ConceptResult,ActivitySession,calculatePercentageService,localStorageService,QuillOAuthService){function finalize(sessionId,passageId){var pfResults;return pfResults=passageId?localStorageService.get("pf-"+passageId):[],sessionId?ConceptResult.findAsJsonByActivitySessionId(sessionId).then(function(list){return ActivitySession.finish(sessionId,{concept_results:list,percentage:calculatePercentageService(list)})}).then(function(){return ConceptResult.removeBySessionId(sessionId)}).then(function(){QuillOAuthService.expire()})["catch"](function(e){throw console.log("An error occurred while saving results to the LMS",e),e}):$q.when()}return finalize}])},{"../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js","./auth":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/auth/index.js","./calculatePercentage.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/calculatePercentage.js","./lms/activitySession.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/activitySession.js","./lms/conceptResult.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/conceptResult.js","./localStorage.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/localStorage.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/instruction.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.instruction",[require("./crud.js").name]).factory("InstructionService",["CrudService",function(CrudService){var crud=new CrudService("instructions",[],"cms");return this.saveInstruction=function(instruction){return crud.save(instruction)},this.deleteInstruction=function(instruction){return crud.del(instruction)},this.getInstruction=function(instructionId){return crud.get(instructionId)},this}])},{"./crud.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/crud.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/activity.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.activity",["underscore",require("../../../../.tmp/config").name]).factory("Activity",["_","$http","empiricalBaseURL",function(_,$http,empiricalBaseURL){function Activity(data){return this.data={},data&&_.extend(this.data,data),this}function missingRequiredKeys(data){var requiredKeys=["name","description","uid","topic_uid","activity_classification_uid"],actualKeys=_.keys(data),missingKeys=_.difference(requiredKeys,actualKeys);return missingKeys.length?missingKeys:!1}var url=empiricalBaseURL+"/activities";return Activity.prototype.create=function(){return $http.post(url,this.data)},Activity.prototype.update=function(){return $http.put(url+"/"+this.data.uid,this.data)},Activity.prototype.isValid=function(){var missingKeys=missingRequiredKeys(this.data);return missingKeys?(this.errorMessages="Activity cannot be submitted without required keys",!1):!0},Activity}])},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/activitySession.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.activity-session",[]).service("ActivitySession",["$http","empiricalBaseURL",function($http,empiricalBaseURL){function activitySessionUrl(id){return empiricalBaseURL+"/activity_sessions/"+id}function update(id,putData){return $http.put(activitySessionUrl(id),putData)}var activitySession=this;activitySession.finish=function(sessionId,putData){return putData.state="finished",update(sessionId,putData).then(function(response){return response.data.activity_session})}}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/concept.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.concept",["underscore",require("../../../../.tmp/config").name]).factory("ConceptService",["_","empiricalBaseURL","$http",function(_,empiricalBaseURL,$http){var url=empiricalBaseURL+"/concepts";return this.post=function(con){return $http.post(url,con).then(function(response){return response})},this.get=function(){return $http.get(url).then(function(response){var concepts=response.data.concepts,accumulator={concept_level_0:[],concept_level_1:[],concept_level_2:[]};return _.reduce(concepts,function(acc,concept){switch(concept.level){case 0:acc.concept_level_0.push(concept);break;case 1:acc.concept_level_1.push(concept);break;case 2:acc.concept_level_2.push(concept)}return acc},accumulator)})},this}])},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/conceptResult.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.concept-result",["firebase",require("../../../../.tmp/config").name]).service("ConceptResult",["$firebaseArray","firebaseUrl","$q",function($firebaseArray,firebaseUrl,$q){function getResultList(activitySessionId){var resultList=$firebaseArray(conceptResult.ref.child(activitySessionId));return resultList.$loaded()}var conceptResult=this;conceptResult.ref=new Firebase(firebaseUrl+"/concept_results"),conceptResult.saveToFirebase=function(activitySessionId,conceptUid,metadata){return getResultList(activitySessionId).then(function(list){return list.$add({concept_uid:conceptUid,metadata:metadata})})},conceptResult.findAsJsonByActivitySessionId=function(activitySessionId){return getResultList(activitySessionId).then(function(list){return list.map(function(fbResultObject){var clean=JSON.parse(JSON.stringify(fbResultObject));return delete clean.$id,delete clean.$priority,clean})})},conceptResult.removeBySessionId=function(activitySessionId){var resultsSessionRef=conceptResult.ref.child(activitySessionId);return $q(function(resolve,reject){resultsSessionRef.remove(function(err){err?reject("Failed to remove ref!"):resolve("Success!")})})}}])},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/standard.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.standard",[require("../../../../.tmp/config").name]).factory("StandardService",["empiricalBaseURL","$http",function(empiricalBaseURL,$http){var url=empiricalBaseURL+"/topics";return this.get=function(){return $http.get(url).then(function(response){return response.data.topics})},this}])},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/standard_level.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.standard_level",[require("../../../../.tmp/config").name]).factory("StandardLevelService",["empiricalBaseURL","$http",function(empiricalBaseURL,$http){var url=empiricalBaseURL+"/sections";return this.get=function(){return $http.get(url).then(function(response){return response.data.sections})},this}])},{"../../../../.tmp/config":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/topicCategory.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.lms.topicCategory",[]).factory("TopicCategoryService",["empiricalBaseURL","$http",function(empiricalBaseURL,$http){var url=empiricalBaseURL+"/topic_categories";return this.get=function(){return $http.get(url).then(function(response){return response.data.topic_categories})},this}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/localStorage.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.localStorage",["LocalStorageModule"]).factory("SentenceLocalStorage",["$q","localStorageService",function($q,localStorageService){function storeTempResult(passageId,crq,answer,correct){var key="sw-temp-"+passageId,rs=localStorageService.get(key);rs||(rs=[]),rs.push({conceptClass:crq.conceptCategory,correct:correct,answer:answer}),localStorageService.set(key,rs)}function saveLocalResults(passageId){if(passageId){var tempKey="sw-temp-"+passageId,trs=localStorageService.get(tempKey),rs=_.chain(trs).groupBy("conceptClass").map(function(entries,cc){return{conceptClass:cc,total:entries.length,correct:_.filter(entries,function(v){return v.correct}).length}}).value();return localStorageService.set("sw-"+passageId,rs),localStorageService.remove(tempKey),trs}}return{storeTempResult:storeTempResult,saveResults:saveLocalResults}}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/rule.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.rule",[require("./crud.js").name,require("./ruleQuestion.js").name]).factory("RuleService",["CrudService","RuleQuestionService","$q","_",function(CrudService,RuleQuestionService,$q,_){var crud=new CrudService("rules",["title","description","ruleNumber","ruleQuestions"],"cms");return this.ref=crud.getRef(),this.updateRule=function(rule){return crud.update(rule)},this.saveRule=function(rule){function addRuleNumber(rule){var d=$q.defer(),ruleNumber=new CrudService("ruleNumberCounter",[],"cms").getRef();return ruleNumber.$transaction(function(currentRuleNumber){if(!currentRuleNumber)return 1;if(!(0>currentRuleNumber))return currentRuleNumber+1}).then(function(snapshot){null===snapshot?d.reject(new Error("current rule number error: snapshot null")):(rule.ruleNumber=snapshot.val(),d.resolve(rule))},function(error){d.reject(error)}),d.promise}return addRuleNumber(rule).then(crud.save)},this.getAllRules=function(){return crud.all()},this.removeRuleQuestionFromRule=function(rule,question){if(!rule||!rule.ruleQuestions)throw new Error("rule does not have any ruleQuestions to remove");return _.each(rule.ruleQuestions,function(r,key){key===question.$id&&(rule.ruleQuestions[key]=null)}),crud.update(rule)},this.getRules=function(ruleIds){function getRuleQuestionsForRules(rules){var rqp=$q.defer(),ruleQuestionPromises=[];return _.each(rules,function(rule){ruleQuestionPromises.push(RuleQuestionService.getRuleQuestions(rule.ruleQuestions))}),$q.all(ruleQuestionPromises).then(function(ruleQuestions){_.each(rules,function(rule,index){rule.resolvedRuleQuestions=ruleQuestions[index]}),rqp.resolve(rules)},function(errors){rqp.reject(errors)}),rqp.promise}var d=$q.defer(),promises=_.map(ruleIds,function(id,key){return _.isArray(ruleIds)||(id=key),crud.get(id)});return $q.all(promises).then(getRuleQuestionsForRules).then(function(rules){d.resolve(rules)},function(error){d.reject(error)}),d.promise},this}])},{"./crud.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/crud.js","./ruleQuestion.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/ruleQuestion.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/ruleQuestion.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.ruleQuestion",[require("./crud.js").name,require("./instruction.js").name,require("./v2/question.js").name]).factory("RuleQuestionService",["CrudService","InstructionService","$q","_","Question",function(CrudService,InstructionService,$q,_,Question){function getInstructionForRuleQuestion(ruleQuestions){var insp=$q.defer(),ins=[];return _.each(ruleQuestions,function(rq){ins.push(InstructionService.getInstruction(rq.instructions))}),$q.all(ins).then(function(instructions){_.each(ruleQuestions,function(rq,index){rq.resolvedInstructions=instructions[index].$value}),insp.resolve(ruleQuestions)},function(errors){insp.reject(errors)}),insp.promise}var crud=new CrudService("ruleQuestions",["body","hint","instructions","prompt","conceptTag","conceptClass","conceptCategory"],"cms");return this.ref=crud.getRef(),this.saveRuleQuestion=function(ruleQuestion){return crud.save(ruleQuestion)},this.deleteRuleQuestion=function(ruleQuestion){return crud.del(ruleQuestion)},this._getAllRuleQuestionsWithInstructions=function(){return crud.all().then(function(ruleQuestionsData){return _.map(ruleQuestionsData,function(rqData){return new Question(rqData)})}).then(getInstructionForRuleQuestion)},this.getRuleQuestions=function(ruleQuestionIds){var d=$q.defer(),promises=_.map(ruleQuestionIds,function(id,key){return _.isArray(ruleQuestionIds)||(id=key),crud.get(id)});return $q.all(promises).then(getInstructionForRuleQuestion).then(function(ruleQuestionsData){var ruleQuestions=_.map(ruleQuestionsData,function(rqData){return new Question(rqData)});d.resolve(ruleQuestions)},function(error){d.reject(error)}),d.promise},this}])},{"./crud.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/crud.js","./instruction.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/instruction.js","./v2/question.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/question.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/concepts.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.firebase.concepts",["firebase","underscore",require("./../../../../.tmp/config.js").name]).factory("ConceptsFBService",["firebaseUrl","$firebaseArray","_","$q","$firebaseObject",function(firebaseUrl,$firebaseArray,_,$q,$firebaseObject){function ref(){return $firebaseArray(self.ref)}function conceptQuestions(id){return $firebaseArray(new Firebase(firebaseUrl+"/concepts/"+id+"/questions"))}var self=this;return this.ref=new Firebase(firebaseUrl+"/concepts"),this.get=function(){return ref().$loaded()},this.getById=function(id){return ref().$loaded().then(function(concepts){return concepts.$getRecord(id)})},this.deleteById=function(id){return ref().$loaded().then(function(concepts){return concepts.$remove(concepts.$indexFor(id))})},this.getByIds=function(ids){var baseRef=this.ref,promises=_.map(ids,function(id){return $firebaseObject(baseRef.child(id)).$loaded()});return $q.all(promises)},this.getByRuleNumbers=function(ruleNumbers){return ref().$loaded().then(function(concepts){return _.filter(concepts,function(concept){return _.contains(ruleNumbers,Number(concept.ruleNumber))})})},this.add=function(record){return ref().$loaded().then(function(concepts){var maxRule=_.max(concepts,function(c){return c.ruleNumber});return _.isNumber(maxRule.ruleNumber)?record.ruleNumber=maxRule.ruleNumber+1:record.ruleNumber=0,concepts.$add(record)})},this.update=function(record){return ref().$loaded().then(function(concepts){var index=concepts.$indexFor(record.$id);return concepts[index]=record,concepts.$save(index)})},this.addQuestionToConcept=function(concept,conceptQuestion){return conceptQuestions(concept.$id).$add(conceptQuestion)},this.getQuestionForConcept=function(concept,conceptQuestionId){return conceptQuestions(concept.$id).$loaded().then(function(q){return q.$getRecord(conceptQuestionId)})},this.modifyQuestionForConcept=function(concept,conceptQuestion){return conceptQuestions(concept.$id).$loaded().then(function(qs){var index=qs.$indexFor(conceptQuestion.$id);return qs[index]=conceptQuestion,qs.$save(index)})},this}])},{"./../../../../.tmp/config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/grammarActivity.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.firebase.grammarActivity",["firebase","underscore","angular-useragent-parser",require("./../../../../.tmp/config.js").name,require("./../rule.js").name,require("./../localStorage.js").name,require("./question.js").name,require("./../lms/conceptResult.js").name]).factory("GrammarActivity",["firebaseUrl","$firebaseObject","$firebaseArray","_","RuleService","$q","Question","SentenceLocalStorage","ConceptsFBService","ConceptResult","TypingSpeed","UAParser",function(firebaseUrl,$firebaseObject,$firebaseArray,_,RuleService,$q,Question,SentenceLocalStorage,ConceptsFBService,ConceptResult,TypingSpeed,UAParser){function GrammarActivity(data){return data&&_.extend(this,data),this}function loadQuestionsFromConcepts(concepts,quantities){if(!concepts.length)throw new Error("Cannot load questions for this activity: no concepts found");var questionsData=_.chain(concepts).map(function(concept,i){return _.each(concept.questions,function(question){question.conceptUid=concept.concept_level_0.uid,question.conceptIndex=i}),concept.questions}).map(function(questionSets,i){return _.sample(questionSets,quantities[i])}).flatten().value(),questionModels=_.map(questionsData,function(questionData){return new Question(questionData)});return questionModels}function loadQuestionsForFirebaseActivity(activity){var quantities=_.pluck(activity.concepts,"quantity"),conceptIds=_.keys(activity.concepts);return ConceptsFBService.getByIds(conceptIds).then(function(concepts){return activity.concepts=concepts,loadQuestionsFromConcepts(concepts,quantities)}).then(function(questions){return activity.questions=questions,activity})}return GrammarActivity.ref=new Firebase(firebaseUrl+"/grammarActivities"),GrammarActivity.DEFAULT_QUESTION_QUANTITY=3,GrammarActivity.getById=function(id){return $firebaseObject(GrammarActivity.ref.child(id)).$loaded().then(function(data){return new GrammarActivity(data)}).then(loadQuestionsForFirebaseActivity)},GrammarActivity.addToFB=function(ga){return $firebaseArray(GrammarActivity.ref).$add(ga)},GrammarActivity.getAllFromFB=function(){return $firebaseArray(GrammarActivity.ref).$loaded()},GrammarActivity.updateToFB=function(id,ga){return $firebaseObject(GrammarActivity.ref).$loaded().then(function(gas){return gas[id]=ga,gas.$save()})},GrammarActivity.deleteByIdFromFB=function(id){return $firebaseObject(GrammarActivity.ref).$loaded().then(function(gas){return gas[id]=null,gas.$save()})},GrammarActivity.getOneByIdFromFB=function(id){return $firebaseObject(GrammarActivity.ref.child(id)).$loaded()},GrammarActivity.fromPassageResults=function(ruleNumbers,passageId){return ConceptsFBService.getByRuleNumbers(ruleNumbers).then(function(concepts){var activity=new GrammarActivity({passageId:passageId,concepts:concepts}),quantities=_.times(concepts.length,function(){return GrammarActivity.DEFAULT_QUESTION_QUANTITY});return activity.questions=loadQuestionsFromConcepts(concepts,quantities),activity},function(err){console.error("Error loading concepts from Firebase",err)})},GrammarActivity.prototype.getConceptForQuestion=function(question){return this.concepts[question.conceptIndex]},GrammarActivity.prototype.getDeviceInfo=function(){var uaParser=new UAParser,UA=uaParser.getResult();return{browser:UA.browser.name,os:UA.os.name}},GrammarActivity.prototype.submitAnswer=function(question,sessionId){var correct=question.answerIsCorrect(),devInfo=this.getDeviceInfo();this.passageId&&SentenceLocalStorage.storeTempResult(this.passageId,question,question.response,correct),sessionId&&ConceptResult.saveToFirebase(sessionId,question.conceptUid,{answer:question.response,correct:correct?1:0,wpm:TypingSpeed.wordsPerMinute,browser:devInfo.browser,os:devInfo.os}).then(function(){TypingSpeed.reset()})},GrammarActivity}])},{"./../../../../.tmp/config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js","./../lms/conceptResult.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/lms/conceptResult.js","./../localStorage.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/localStorage.js","./../rule.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/rule.js","./question.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/question.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/passageWord.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.passageWord",["underscore"]).factory("PassageWord",["_",function(_){function PassageWord(data){return data&&_.extend(this,data),this}return PassageWord.INCORRECT_ERROR="Incorrect",PassageWord.NOT_NECESSARY_ERROR="Not Necessary",PassageWord.CORRECT="Correct",PassageWord.htmlMatches=function(text){return text?text.match(/<\s*br\s*?\/>/g):null},PassageWord.prototype.hasNotNecessaryError=function(){return this.type===PassageWord.NOT_NECESSARY_ERROR},PassageWord.prototype.hasIncorrectError=function(){return this.type===PassageWord.INCORRECT_ERROR},PassageWord.prototype.hasCorrect=function(){return this.type===PassageWord.CORRECT},PassageWord.prototype.errorCounter=function(){return"Edit "+String(this.resultIndex+1)+" of "+this.totalResults},PassageWord.prototype.hasErrorToShow=function(){return _.any([this.hasNotNecessaryError.bind(this),this.hasCorrect.bind(this),this.hasIncorrectError.bind(this)],function(fn){return fn()})},PassageWord.prototype.getErrorType=function(){return _.has(this,"minus")?PassageWord.INCORRECT_ERROR:PassageWord.NOT_NECESSARY_ERROR},PassageWord.prototype.isValid=function(){return _.has(this,"minus")?this.responseText===this.plus:this.text===this.responseText},PassageWord.prototype.isBr=function(){return null!==PassageWord.htmlMatches(this.responseText)},PassageWord.prototype.needsUnderlining=function(){return _.has(this,"minus")},PassageWord}])},{}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/proofreaderActivity.js":[function(require,module,exports){
"use strict";module.exports=angular.module("quill-grammar.services.firebase.proofreaderActivity",["firebase","underscore",require("./../../../../.tmp/config.js").name]).factory("ProofreaderActivity",["firebaseUrl","$firebaseObject","_","$q","$firebaseArray",function(firebaseUrl,$firebaseObject,_,$q,$firebaseArray){function ProofreaderModel(data){return data&&_.extend(this,data),this}return ProofreaderModel.ref=new Firebase(firebaseUrl+"/passageProofreadings"),ProofreaderModel.getById=function(id){return $firebaseObject(ProofreaderModel.ref.child(id)).$loaded().then(function(data){return data.passage?new ProofreaderModel(data):$q.reject(new Error("Error loading activity: activity with ID "+id+" does not exist."))})},ProofreaderModel.getAllFromFB=function(){return $firebaseArray(ProofreaderModel.ref).$loaded()},ProofreaderModel.addToFB=function(pa){return $firebaseArray(ProofreaderModel.ref).$add(pa)},ProofreaderModel.updateToFB=function(id,pa){return $firebaseObject(ProofreaderModel.ref).$loaded().then(function(pas){return pas[id]=pa,pas.$save()})},ProofreaderModel.deleteByIdFromFB=function(id){return $firebaseObject(ProofreaderModel.ref).$loaded().then(function(pas){return pas[id]=null,pas.$save()})},ProofreaderModel}])},{"./../../../../.tmp/config.js":"/Users/donald/Programming/Javascript/Quill-Grammar/.tmp/config.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/proofreadingPassage.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.proofreadingPassage",["underscore",require("./../rule.js").name,require("./passageWord.js").name,"uuid4","angulartics"]).factory("ProofreadingPassage",["_","uuid4","PassageWord","RuleService","$analytics","localStorageService","ConceptsFBService",function(_,uuid4,PassageWord,RuleService,$analytics,localStorageService,ConceptsFBService){function ProofreadingPassage(data){return data&&_.extend(this,data),this}function extractQuestionsFromPassage(passage){var questions={};return passage.replace(/{\+([^-]+)-([^|]+)\|([^}]+)}/g,function(key,plus,minus,ruleNumber){var genKey=uuid4.generate();questions[genKey]={plus:plus,minus:minus,ruleNumber:ruleNumber},passage=passage.replace(key,genKey)}),passage.replace(/{-([^|]+)\+([^-]+)\|([^}]+)}/g,function(key,minus,plus,ruleNumber){var genKey=uuid4.generate();questions[genKey]={plus:plus,minus:minus,ruleNumber:ruleNumber},passage=passage.replace(key,genKey)}),[questions,passage]}function removeNullWords(n){return""!==n}function parseHtmlTokens(w){var matches=PassageWord.htmlMatches(w);return matches?(_.each(matches,function(match){w!==match&&(w=w.replace(new RegExp(match,"g")," "+match+" "))}),w=w.trim(),w.split(/\s/)):w}function loadConcepts(proofreadingPassage){var ruleNumbers=_.chain(proofreadingPassage.questions).pluck("ruleNumber").map(function(rn){return Number(rn)}).uniq().value();return ConceptsFBService.getByRuleNumbers(ruleNumbers)}return ProofreadingPassage.fromPassageString=function(passage){function parseHangingPassageQuestionsWithNoSpace(w){return _.each(questions,function(v,key){w!==key&&-1!==w.indexOf(key)&&(w=w.split(key).join(" "+key).split(/\s/))}),w}function splitPassageIntoWords(w){if(_.has(questions,w)){var c=_.clone(questions[w]);return c.text=c.minus,c.responseText=c.text,new PassageWord(c)}return new PassageWord({text:w,responseText:w})}function trimSpecialObjects(w){return w.text=w.text.trim(),w.responseText=w.responseText.trim(),w}function removeLeftoverSpaces(w){return""!==w.text}var proofreadingPassage=new ProofreadingPassage({numChanges:0,madeChange:!1}),retVal=extractQuestionsFromPassage(passage),questions=retVal[0],convertedPassageText=retVal[1],words=_.chain(convertedPassageText.split(/\s/)).filter(removeNullWords).map(parseHtmlTokens).flatten().map(parseHangingPassageQuestionsWithNoSpace).flatten().map(splitPassageIntoWords).map(trimSpecialObjects).filter(removeLeftoverSpaces).value();return proofreadingPassage.words=words,proofreadingPassage.questions=questions,loadConcepts(proofreadingPassage).then(function(concepts){return proofreadingPassage.concepts=concepts,proofreadingPassage})},ProofreadingPassage.prototype.getNumErrors=function(){return _.keys(this.questions).length},ProofreadingPassage.prototype.getNumErrorsToSolve=function(){return Math.floor(this.getNumErrors()/2)},ProofreadingPassage.prototype.getNumCorrect=function(){return _.where(this.results,{type:PassageWord.CORRECT}).length},ProofreadingPassage.prototype.getResultRuleNumbers=function(){var ruleNumbers=_.chain(this.results).pluck("passageEntry").reject(function(r){return r.type!==PassageWord.INCORRECT_ERROR}).pluck("ruleNumber").reject(_.isUndefined).uniq().value();return ruleNumbers},ProofreadingPassage.prototype.saveLocalResults=function(id){function saveResults(r){localStorageService.set("pf-"+id,r),localStorageService.remove("sw-"+id),localStorageService.remove("sw-temp-"+id)}function getLocalResults(){return _.chain(results).pluck("passageEntry").reject(function(pe){return _.isUndefined(pe.ruleNumber)}).map(function(pe){var concept=_.find(concepts,function(c){var c1=String(c.ruleNumber),c2=String(pe.ruleNumber);return c1===c2});if(!concept)throw new Error("Could not find concept corresponding to rule number: "+pe.ruleNumber);return{title:concept.concept_level_0.name,correct:pe.type===PassageWord.CORRECT}}).groupBy("title").map(function(entries,title){return{concept:title,total:entries.length,correct:_.filter(entries,function(v){return v.correct}).length}}).value()}var results=this.results,concepts=this.concepts;saveResults(getLocalResults())},ProofreadingPassage.prototype.sendResultsAnalytics=function(){var event="Press Check Answer",passageResults=_.chain(this.results).pluck("passageEntry").map(function(p){return _.pick(p,["minus","ruleNumber","responseText","plus","type"])}).value(),correct=_.filter(passageResults,function(passageResult){return passageResult.type===PassageWord.CORRECT}),incorrect=_.filter(passageResults,function(passageResult){return passageResult.type!==PassageWord.CORRECT}),correctWords=_.map(correct,function(c){return c.responseText}),incorrectWords=_.map(incorrect,function(i){return i.responseText}),correctRuleNumbers=_.map(correct,function(c){return c.ruleNumber}),incorrectRuleNumbers=_.map(incorrect,function(i){return i.ruleNumber}),attrs={correct:correct,incorrect:incorrect,correctWords:correctWords,correctRuleNumbers:correctRuleNumbers,incorrectRuleNumbers:incorrectRuleNumbers,incorrectWords:incorrectWords,score:100*Number(correct.length/this.results.length)};$analytics.eventTrack(event,attrs)},ProofreadingPassage.prototype.submit=function(){var results=[];_.each(this.words,function(word,i){word.isValid()||results.push({index:i,passageEntry:word,type:word.getErrorType()}),word.isValid()&&_.has(word,"minus")&&results.push({index:i,passageEntry:word,type:PassageWord.CORRECT})}),this.results=results;var numErrorsToSolve=this.getNumErrorsToSolve(),numErrorsFound=this.getNumCorrect(),numEdits=this.numChanges,isFinished=numErrorsFound>=numErrorsToSolve||numEdits>=numErrorsToSolve;return isFinished},ProofreadingPassage.prototype.onInputChange=function(word){var nc=this.numChanges;""===word.responseText?word.countedChange||(nc++,word.countedChange=!0):word.responseText!==word.text?(word.countedChange||nc++,word.countedChange=!0):word.responseText===word.text&&word.countedChange&&(nc=Math.max(nc-1,0),word.countedChange=!1),this.numChanges=nc,!this.madeChange&&nc>0&&(this.madeChange=!0,$analytics.eventTrack("Edit One Passage Word",word))},ProofreadingPassage.prototype.getGrammaticalConcept=function(word){if(word.ruleNumber){var concept=_.findWhere(this.concepts,{ruleNumber:Number(word.ruleNumber)});if(concept&&concept.concept_level_0.name)return concept.concept_level_0.name}},ProofreadingPassage.prototype.getGrammaticalConceptData=function(word){if(word.ruleNumber){var concept=_.findWhere(this.concepts,{ruleNumber:Number(word.ruleNumber)});if(concept&&concept.concept_level_0.name)return concept}},ProofreadingPassage}])},{"./../rule.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/rule.js","./passageWord.js":"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/passageWord.js"}],"/Users/donald/Programming/Javascript/Quill-Grammar/src/scripts/services/v2/question.js":[function(require,module,exports){"use strict";module.exports=angular.module("quill-grammar.services.question",["underscore"]).factory("Question",["_",function(_){function Question(data){return data&&_.extend(this,data),this}function removeDelimeters(b){if("string"!=typeof b)throw new Error("Input must be type string removeDelimeters");return b.replace(delimRegEx.open,"").replace(delimRegEx.close,"")}function getCorrectString(b){var answers=_.chain(b).map(removeDelimeters).value();return"<ul><li>"+answers.join("</li><li>")+"</ul>"}function compareEntireAnswerToAnswers(answer){return function(b){var cleaned=removeDelimeters(b);return answer===cleaned}}Question.MAX_NUM_ATTEMPTS=2,Question.ResponseStatus={DEFAULT:0,TYPING_ERROR_NON_STRICT:2,INCORRECT:4,CORRECT:5,NO_ANSWER:6,NOT_LONG_ENOUGH:7,TOO_MANY_ATTEMPTS:8};var delim={open:"{",close:"}"},delimRegEx={open:new RegExp(delim.open,"g"),close:new RegExp(delim.close,"g")},matchAllDelimsStr=delim.open+"([^"+delim.open+"^"+delim.close+".]*)"+delim.close;return Question.ResponseMessages={},Question.ResponseMessages[Question.ResponseStatus.DEFAULT]="Check Work",Question.ResponseMessages[Question.ResponseStatus.NOT_LONG_ENOUGH]="<b>Try again!</b>Your answer is not long enough.",Question.ResponseMessages[Question.ResponseStatus.INCORRECT]="<b>Try Again!</b> Unfortunately, that answer is incorrect.",Question.ResponseMessages[Question.ResponseStatus.TYPING_ERROR_NON_STRICT]="You are correct, but you have some typing errors. You may correct them or continue.",Question.ResponseMessages[Question.ResponseStatus.TOO_MANY_ATTEMPTS]=function(question){return"<b>Incorrect.</b> Correct Answer: "+getCorrectString(_.pluck(question.answers,"text"))},Question.ResponseMessages[Question.ResponseStatus.CORRECT]="<b>Well done!</b> That's the correct answer.",Question.ResponseMessages[Question.ResponseStatus.NO_ANSWER]="You must enter a sentence for us to check.",Question.prototype.ensureLengthIsProper=function(answer){var threshold=.8;return function(possibleAnswer){var b=removeDelimeters(possibleAnswer);return answer.length/b.length>=threshold}},Question.prototype.compareGrammarElementToAnswers=function(answer){var b=this.getPossibleAnswers();return answer?_.any(b,function(possibleAnswer){for(var tmpArray,reg=new RegExp(matchAllDelimsStr,"g"),grammarElements=[];null!==(tmpArray=reg.exec(possibleAnswer));)grammarElements.push(tmpArray[1]);return _.every(grammarElements,function(element){var r=new RegExp("(^|\\W{1,1})"+element+"(\\W{1,1}|$)","g");return-1!==answer.search(r)})}):!1},Question.prototype.answerIsCorrect=function(){return this.status===Question.ResponseStatus.CORRECT||this.status===Question.ResponseStatus.TYPING_ERROR_NON_STRICT},Question.prototype.checkAnswer=function(){var answer=this.response;if(!answer)return void(this.status=Question.ResponseStatus.NO_ANSWER);var possibleAnswers=this.getPossibleAnswers(),exactMatch=_.any(possibleAnswers,compareEntireAnswerToAnswers(answer));exactMatch?this.status=Question.ResponseStatus.CORRECT:_.every(possibleAnswers,this.ensureLengthIsProper(answer))?this.compareGrammarElementToAnswers(answer)?this.status=Question.ResponseStatus.TYPING_ERROR_NON_STRICT:this.status=Question.ResponseStatus.INCORRECT:this.status=Question.ResponseStatus.NOT_LONG_ENOUGH,this.attempts?this.attempts++:this.attempts=1,this.attempts>=Question.MAX_NUM_ATTEMPTS&&(this.answerIsCorrect()||(this.status=Question.ResponseStatus.TOO_MANY_ATTEMPTS))},Question.prototype.getPossibleAnswers=function(){return _.pluck(this.answers,"text")},Question.prototype.getResponseMessage=function(){var msg=Question.ResponseMessages[this.status];return _.isFunction(msg)?msg(this):msg},Question}])},{}]},{},["./src/scripts/app/app.module.js"]);